% Atiyah_MacDonald_c_tex
% !TEX encoding = UTF-8 Unicode
% https://docs.google.com/document/d/1AW4qMXoarPW1L1Nxbgy4bODorWEpE6_Gdd35sFJKyew/edit
% https://github.com/Pierre-Yves-Gaillard/Atiyah_MacDonald_c/edit/master/Atiyah_MacDonald_c.tex
% version a of 20180208 https://docs.google.com/document/d/1p2ri2Mu-zyF7-Gk1eeJ4f0OinG0BPXZEAsljF3af2zs/edit
%\documentclass[12pt]{article}%\documentclass{article}
\documentclass[parskip=half,fontsize=12pt]{scrartcl}%\documentclass[parskip=full]{scrartcl}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{amssymb,amsmath,amsthm} 
\usepackage[papersize={400pt,520pt},margin=15pt]{geometry}% e-readers
%\usepackage{geometry}% normal
%\usepackage[margin=15pt]{geometry} old
%\usepackage[papersize={4.5in,6in},margin=0.5cm]{geometry} old
%\usepackage[parfill]{parskip}%https://tex.stackexchange.com/questions/133003/using-the-parskip-package-i-find-the-space-between-subtitles-ugly
\usepackage{datetime}
%%\usepackage[osf]{Baskervaldx} % oldstyle figures
%\usepackage{Baskervaldx}
%%\usepackage[baskervaldx]{newtxmath}
\usepackage{tikz-cd}
\usepackage{comment}
%\usepackage[dvipsnames]{xcolor} % creates clashes !!!
\usepackage[pdfusetitle]{hyperref}
%\pagestyle{empty}
%\newcommand{\nn}{\newcommand}
\newcommand{\oo}{\operatorname}\newcommand{\ooo}{\operatorname*}
\newcommand{\mf}{\mathfrak}
\newcommand{\aaa}{\mf a}
\newcommand{\bbb}{\mf b}
\newcommand{\ccc}{\mf c}
\newcommand{\mmm}{\mf m}
\newcommand{\nnn}{\mf n}
\newcommand{\ppp}{\mf p}
\newcommand{\qqq}{\mf q}
\newcommand{\Ann}{\oo{Ann}}
\newcommand{\Ass}{\oo{Ass}}
\newcommand{\bu}{\bullet}
\DeclareMathOperator*{\colim}{colim}
\newcommand{\ds}{\displaystyle}
\newcommand{\epi}{\twoheadrightarrow}
\newcommand{\incl}{\hookrightarrow}
\newcommand{\Ker}{\operatorname{Ker}}\newcommand{\Coker}{\operatorname{Coker}}
\newcommand{\mono}{\rightarrowtail}
\newcommand{\Spec}{\operatorname{Spec}}\newcommand{\Sp}{\operatorname{Spec}}
\newcommand{\Tor}{\operatorname{Tor}}
\newcommand{\xr}{\xrightarrow}
%\newcommand{\todo}{To do: }%\newcommand{\up}{Unsolved problem: }
%\newcommand{\nt}{\newtheorem}
\newtheorem{thm}{Theorem}%[section]
\newtheorem{cor}[thm]{Corollary}
\newtheorem{df}[thm]{Definition}
\newtheorem{exo}[thm]{Exercise}
\newtheorem{lem}[thm]{Lemma}
\newtheorem{note}[thm]{Note}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{qn}[thm]{Question}
%\newtheorem{rk}[thm]{Remark}
%\addtolength{\parskip}{.2\baselineskip}
\title{About Atiyah and MacDonald's Book}
\author{Pierre-Yves Gaillard}
\date{\today,\currenttime}

\begin{document}%\ar[r,yshift=0.9ex]\ar[r,yshift=-0.9ex]%\ar[r,yshift=4pt]\large%{\oo c}

%\large

\maketitle\tableofcontents

This text is available at 

\centerline{\href{http://www.iecl.univ-lorraine.fr/~Pierre-Yves.Gaillard/DIVERS/Atiyah_MacDonald_c/}{https://goo.gl/S9ykSu} and \href{https://github.com/Pierre-Yves-Gaillard/Atiyah_MacDonald_c/blob/master/Atiyah_MacDonald_c.tex}{https://goo.gl/8FNDcf}%\quad\href{https://docs.google.com/document/d/1AW4qMXoarPW1L1Nxbgy4bODorWEpE6_Gdd35sFJKyew/edit?usp=sharing}{https://goo.gl/w26ZGZ}
}

Atiyah and MacDonald's book referred to in the title is of course the famous \textbf{Introduction to Commutative Algebra}.

Many parts of the present text are taken from the wonderful text \textbf{Exercises to Atiyah and MacDonald's Introduction to Commutative Algebra} by Jeffrey Daniel Kasik Carlson, \href{https://goo.gl/WEfMG7}{https://goo.gl/WEfMG7}.

Here are some other links:

$\bu$ Errata \href{https://mathoverflow.net/q/42241/461}{https://mathoverflow.net/q/42241/461}

%$\bu$ \href{https://sites.google.com/view/mathlife1}{https://sites.google.com/view/mathlife1}

$\bu$ Athanasios Papaioannou, Solutions to Atiyah and MacDonald’s Introduction to Commutative Algebra \href{https://tinyurl.com/r3y453b}{https://tinyurl.com/r3y453b}

% \href{shorturl.at/mqzH9}{shorturl.at/mqzH9} https://tinyurl.com/r3y453b  \href{https://dangtuanhiep.files.wordpress.com/2008/09/papaioannoua_solutions_to_atiyah.pdf}{https://dangtuanhiep.files.wordpress.com/2008/09/papaioannoua\_solutions\_to\_atiyah.pdf} 

$\bu$ Thomas J. Haines, Lectures on Commutative Algebra, 

\href{http://www.math.umd.edu/~tjh/CommAlg.pdf}{http://www.math.umd.edu/$\sim$tjh/CommAlg.pdf}

$\bu$ Shengtian Yang 

\href{http://arxiv.codlab.net/book/note-am-ica/note-am-ica_0.1.2.pdf}{\small http://arxiv.codlab.net/book/note-am-ica/note-am-ica\_0.1.2.pdf}

\href{http://www.yangst.codlab.net}{http://www.yangst.codlab.net}

$\bu$ Yongwei Yao

\href{http://www2.gsu.edu/~matyxy/math831/}{http://www2.gsu.edu/$\sim$matyxy/math831/}

\href{http://www2.gsu.edu/~matyxy/math831/math831.html}{http://www2.gsu.edu/$\sim$matyxy/math831/math831.html}

%$\bu$ Takumi Murayama \href{http://www2.gsu.edu/~matyxy/math831/math831.html}{http://www2.gsu.edu/$\sim$matyxy/math831/math831.html}

$\bu$ Boocher \href{http://www.maths.ed.ac.uk/~aboocher/math/AMnotes.pdf}{\small http://www.maths.ed.ac.uk/$\sim$aboocher/math/AMnotes.pdf}

$\bu$ Allen Altman and Steven Kleinman %Flores \href{http://www.math.ku.edu/~zflores/mathematics.html}{http://www.math.ku.edu/$\sim$zflores/mathematics.html}

\href{http://web.mit.edu/18.705/www/13Ed.pdf}{http://web.mit.edu/18.705/www/13Ed.pdf}

\href{http://web.mit.edu/18.705/www/}{http://web.mit.edu/18.705/www/}

$\bu$ Wiki \href{http://am-solutions.wikispaces.com}{http://am-solutions.wikispaces.com}

\section{About Chapter 1}

\subsection{Page 6}%

\begin{note}\label{ef}
The intersection and the product of the empty family of ideals is the unit ideal.
\end{note}

It is written

\emph{In the ring $\mathbb Z$, $\cap$ and + are distributive over each other. This is not the case in general.}

Here is an example: In the ring $K[x,y]$, where $K$ is a field and $x$ and $y$ are indeterminates, we have 
$$
(x+y)\cap\Big((x)+(y)\Big)\not\subset\Big((x+y)\cap (x)\Big)+\Big((x+y)\cap (y)\Big).
$$

\subsection{Page 7, Proposition 1.10}%

\textbf{Chinese Remainder Theorem.} \emph{Let $A$ be a commutative ring and $\aaa_1,\dots,\aaa_n$ ideals such that $\aaa_i+\aaa_j=A$ for $i\not=j$. Then the natural morphism from $A$ to the product of the $A/\aaa_i$ is surjective. Moreover the intersection of the $\aaa_i$ coincides with their product.}

\begin{proof} 
We have
\begin{equation}\label{crt}
A=\aaa_1+\aaa_2\cdots\aaa_n.
\end{equation}
Indeed, this can be checked either by multiplying together the equalities $A=\aaa_1+\aaa_i$ for $i=2,\dots,n$, or by noting that a prime ideal containing a product of ideals contains one of the factors. Then \eqref{crt} implies the existence of an $a_1$ in $A$ such that
$$
a_1\equiv1\bmod\aaa_1,\quad a_1\equiv0\bmod \aaa_i\ \forall\ i > 1.
$$
Similarly we can find elements $a_i$ in $A$ such that $a_i\equiv\delta_{ij}\bmod \aaa_j$ (Kronecker delta). This proves the first claim.

Let $\aaa$ be the intersection of the $\aaa_i$. Multiplying \eqref{crt} by $\aaa$ we get
$$
\aaa=
\aaa_1\aaa+
\aaa\aaa_2\cdots\aaa_n\subset
\aaa_1\ (\aaa_2\cap\cdots \cap \aaa_n)\subset \aaa.
$$
This gives the second claim, directly for $n=2$, by induction for $n>2$. 
\end{proof}

\subsection{Page 8}%

$\bu$ \textbf{Proposition 1.11i, Prime Avoidance}

The following is taken from Wikipedia:

\href{https://en.wikipedia.org/wiki/Prime_avoidance_lemma}{https://en.wikipedia.org/wiki/Prime\_avoidance\_lemma}

\emph{Let $A$ be a commutative ring and $S$ a multiplicatively closed additive subgroup of $A$. Let $\aaa_1,\dots,\aaa_n$, $n\ge1$ be ideals such that $\aaa_i$ is prime for $i\ge3$. If $S$ is not contained in any $\aaa_i$, then $S$ is not contained in their union.}

\begin{proof} 
We argue by induction on $n$. It suffices to find an element $s$ that is in $S$ and not in $\aaa_i$ for any $i$. 

1. The case $n=1$ is trivial. 

2. Suppose $n\ge2$. For each $i$ choose $s_i$ in $S\setminus\bigcup_{j \ne i}\aaa_j$, this set being nonempty by inductive hypothesis. We can assume $s_i \in \aaa_i$ for all $i$; otherwise, some $s_i$ avoids all the $\aaa_j$'s and we are done. 

Claim: the element $s:=s_1\cdots s_{n-1}+s_n$ is in $S$ but not in $\aaa_i$ for any $i$. 

2.1. If $s$ is in $\aaa_i$ for some $i\le n-1$, then $s_n$ is in $\aaa_i$, a contradiction. 

2.2. If $s$ is in $\aaa_n$, then $s_1\cdots s_{n-1}$ is in $\aaa_n$. 

2.2.1. If $n$ is 2, we get $s_1\in \aaa_2$, a contradiction.

2.2.2. If $n>2$ then, since $\aaa_n$ is prime, there is an $i$ less than $n$ such that $s_i$ is in $\aaa_n$, a contradiction.

This proves the claim, and thus the statement. 
\end{proof}

Here is a version which is slightly weaker but sufficient for our purpose:

\begin{prop}\label{111i}
Let $A$ be a ring, let $\aaa$ be an ideal, and let $\ppp_1,\dots,\ppp_n,n\ge1$ be prime ideals. If $\mf a$ is not contained in any $\ppp_i$, then $\mf a$ is not contained in their union.
\end{prop}
\begin{proof} 
We can assume that $n\ge2$ and that there are elements $a_1,\dots,a_n$ in $\mf a$ such that 
$$
a_i\in\ppp_i\setminus\bigcup_{j \ne i}\ppp_j.
$$ 
Then $a:=a_1\cdots a_{n-1}+a_n$ is in $\mf a$ but not in $\ppp_i$ for any $i$.
\end{proof}

%About the proof of Part (ii) of Proposition 1.11 p.~8, if a prime ideal contains the intersection of a finite family of ideals, then it contains the product of this family, and thus one of the factors.

$\bu$ \textbf{Proposition 1.11ii}%

Note that $\ppp$ is prime $\iff$
$$
\ppp\supset\mf a\bbb\quad\implies\quad\ppp\supset\mf a\quad\text{or}\quad\ppp\supset\bbb.
$$

$\bu$ \textbf{Quotient ideal}%

We have 
$$
\mf a\subset\mf a',\ \bbb'\subset\bbb\ \implies\ (\mf a:\bbb)\subset(\mf a':\bbb'),
$$ 
$$
(1:\bbb)=(1)=(\mf a:0),\quad(\mf a:1)=\mf a.
$$

$\bu$ \textbf{Exercise 1.12i}%

To show that the inclusion $\mf a\subset(\mf a:\bbb)$ is strict in general, let $A$ be nonzero and set $\mf a=\bbb=(0)$.

$\bu$ \textbf{Exercise 1.12ii}%

To show that the inclusion $(\mf a\!:\!\bbb)\,\bbb\subset(\mf a:\bbb)$ is strict in general, let $A$ be nonzero and set $\mf a=(1),\ \bbb=(0)$.

\subsection{Page 9, extended ideal}%

If $f:A\to B$ is a morphism of rings and $\mf a$ is an ideal of $A$, then we can define $\mf a^{\oo e}$ by the formula
$$
\mf a^{\oo e}:=\sum_{\alpha\in\mf a}\ (f(\alpha)).
$$

\subsection{Page 10, Exercise 1.18, Part 1}%

Let $K$ be a field and let $X$ and $Y$ be indeterminates. If $\mf a$ is an ideal of $K[X,Y]$, we denote by $x$ and $y$ the images of $X$ and $Y$ in $K[X,Y]/\mf a$.

$\bu$ Let us show that the inclusion $(\mf a_1\cap\mf a_2)^{\oo e}\subset\mf a_1^{\oo e}\cap\mf a_2^{\oo e}$ is strict in general. Set (with obvious notation) 
$$
A:=K[X,Y]/(X^2,XY,Y^2),\quad B:=K[X]/(X^2),
$$ 
$$
f:A\to B,\quad f(x):=x,\quad f(\,y):=0,
$$ 
$$
\mf a_1:=(x),\quad\mf a_2:=(x-y).
$$

$\bu$ Let us show that the inclusion $\bbb_1^{\oo c}+\bbb_2^{\oo c}\subset(\bbb_1+\bbb_2)^{\oo c}$ is strict in general. Set (with obvious notation) 
$$
A:=K[X]/(X^2),\quad B:=K[X,Y]/(X^2,XY,Y^2),
$$ 
$$
f:A\to B,\quad f(x):=x,
$$ 
$$
\bbb_1:=(\,y),\quad\bbb_2:=(x-y).
$$

$\bu$ Let us show that the inclusion $\bbb_1^{\oo c}\bbb_2^{\oo c}\subset(\bbb_1\bbb_2)^{\oo c}$ is strict in general. Set $A:=K[XY]$, $B:=K[X,Y]$, and let $f:A\to B$ be the inclusion. Then we have 
$$
(X)^{\oo c}(Y)^{\oo c}=(X^2Y^2),\quad(XY)^{\oo c}=(XY).
$$

$\bu$ Let us show that the inclusion $(\mf a_1:\mf a_2)^{\oo e}\subset(\mf a_1^{\oo e}:\mf a_2^{\oo e})$ is strict in general. Set $A:=K[X]$, $B:=K[X,Y]/(XY)$, $f(X):=x$. Then we have 
$$
y\in((0)^{\oo e}:(X)^{\oo e})=((0):(X)^{\oo e}),
$$ 
$$y\notin(0)=(0)^{\oo e}=((0):(X))^{\oo e}.$$

$\bu$ Let us show that the inclusion $(\bbb_1:\bbb_2)^{\oo c}\subset(\bbb_1^{\oo c}:\bbb_2^{\oo c})$ is strict in general. Set $A:=K$, $B:=K[X]$, $\bbb_1:=(0)$, $\bbb_2:=(X)$. Then we have 
$$
1\in(\bbb_1^{\oo c}:\bbb_2^{\oo c})\setminus(\bbb_1:\bbb_2)^{\oo c}.
$$
$\bu$ Let us show that the inclusion $r(\mf a)^{\oo e}\subset r(\mf a^{\oo e})$ is strict in general. Set $A:=K[X^2]$, $B:=K[X]$, $\mf a:=(X^2)$. Then we have 
$$
X\in r(\mf a^{\oo e})\setminus r(\mf a)^{\oo e}.
$$

\subsection{Page 10, Exercise 1.18, Part 2}%

We have 
$$
\left(\sum\mf a_i\right)^{\oo e}=\sum\mf a_i^{\oo e},\quad\left(\sum\bbb_i\right)^{\oo c}\supset\sum\bbb_i^{\oo c},
$$
$$
\left(\bigcap\mf a_i\right)^{\oo e}\subset\bigcap\mf a_i^{\oo e},\quad\left(\bigcap\bbb_i\right)^{\oo c}=\bigcap\bbb_i^{\oo c}.
$$

We prove the first of these four statements, leaving the others to the reader. We have 
$$
\left(\sum\mf a_i\right)^{\oo e}=\sum_{\alpha\in\sum\mf a_i}(f(\alpha)),\quad\sum\mf a_i^{\oo e}=\sum_i\sum_{\alpha_i\in\mf a_i}(f(\alpha_i)).
$$ 
The inclusion $\supset$ is clear. Let us prove the inclusion $\subset$. Let $\alpha$ be in $\sum\mf a_i$. This means that $\alpha$ is of the form $\sum\alpha_i$ with $\alpha_i\in\mf a_i$, $\alpha_i=0$ for almost all $i$. This yields 
$$
f(\alpha)=\sum_if(\alpha_i)\in\sum_i\sum_{\alpha_i\in\mf a_i}(f(\alpha_i))=\sum\mf a_i^{\oo e}.
$$ 

\subsection{Page 10, Exercise 1.18, Part 3}%

Let us prove that $C$ is closed under quotients. 

For $\aaa,\bbb\in C$ we have
$$
(\aaa:\bbb)\subset(\aaa:\bbb)^{\oo{ec}}\subset(\aaa^{\oo e}:\bbb^{\oo e})^{\oo c}\subset(\aaa^{\oo{ec}}:\bbb^{\oo{ec}})=(\aaa:\bbb).
$$ 
Indeed, the first inclusion follows from Proposition 1.17 p.~10, whereas the second and third inclusions follow from Exercise 1.18 p.~10. 

\subsection{Page 10, Exercise 1.1}%

If $x$ is nilpotent, then $\sum_{n\ge0}x^n$ is the inverse of $1-x$. If $u$ is a unit and $x$ is nilpotent, then $u+x=u\,(1+x/u)$ is a unit.

\subsection{Page 11, Exercise 1.2}%

This will follow from Exercise 1.3.

%See \href{https://goo.gl/sbszfj}{https://goo.gl/sbszfj}

\subsection{Page 11, Exercise 1.3i and 1.3ii}%

Prove both statements by induction on the number of indeterminates. It seems better to solve Exercise 1.3ii before Exercise 1.3i.

\subsection{Page 11, Exercise 1.3iii}% old version https://docs.google.com/document/d/1zlz5FlVrglnxgwCK_Tx-2QaKcUEMQXUG2O3q69s2y0A/edit

In the three statements below, $A$ and $B$ are rings, $p,q,r,s$ are nonnegative integers satisfying $q>0$ and $r<s$, and the $x_i$ and $y_j$ are indeterminates.

Recall the statement of Exercise 1.3iii: 

$(\star)$ If $f\in A[x_1,\dots,x_p]$ has a nonzero annihilator in $A[x_1,\dots,x_p]$, then $f$ has a nonzero annihilator in $A$. 

\begin{lem}\label{1.3iiil1}
If $f\in B[\,y_1,\dots,y_q]$ has a nonzero annihilator in $B[\,y_1]$, then $f$ has a nonzero annihilator in $B$.
\end{lem}

\begin{lem}\label{1.3iiil2}
If $f\in A[x_1,\dots,x_s]$ has a nonzero annihilator in 
$$
A[x_1,\dots,x_{r+1}],
$$ 
then $f$ has a nonzero annihilator in $A[x_1,\dots,x_r]$.
\end{lem}

Clearly Lemma~\ref{1.3iiil2} implies $(\star)$. Moreover, Lemma~\ref{1.3iiil2} follows from Lemma~\ref{1.3iiil1} by setting $B=A[x_1,\ldots,x_r]$, $q=s-r$, $y_i=x_{r+i}$.

It only remains to prove Lemma~\ref{1.3iiil1}. To do so set 
$$
f=a_0+\cdots+a_n y_1^n,
$$ 
where $n$ is the $y_1$-degree of $f$ (we can assume $f\ne0$) and 
$$
a_i\in B[\,y_2,\ldots,y_q].
$$ 
Let 
$$
g=b_0+\cdots+b_m y_1^m\in B[\,y_1]
$$ 
be a nonzero polynomial of least degree $m$ such that 
\begin{equation}\label{1.3iii1}
fg=0.
\end{equation}
It suffices to prove 
\begin{equation}\label{1.3iii2}
m=0.
\end{equation}
For this it suffices to prove
\begin{equation}\label{1.3iii3}
a_i g=0\ \forall\ i.
\end{equation}
Assume \eqref{1.3iii3} is false, and let $i$ be the largest index satisfying $a_i g\ne0$. Then \eqref{1.3iii1} implies $a_i b_m=0$ [because $a_i b_m\ne0$ would imply $\deg_{y_1}(fg)=i+m$, where $\deg_{y_1}$ is the $y_1$-degree, but we have $fg=0$] and thus $\deg_{y_1}(a_i g)<m$. As $f\cdot(a_i g)=0$, this entails $a_i g=0$, a contradiction. This proves \eqref{1.3iii3} and thus \eqref{1.3iii2}, completing the proof of Lemma~\ref{1.3iiil1}. 

\subsection{Page 11, Exercise 1.3iv}%

Let $f,g\in A[x_1,\ldots,x_n]$. If $\aaa,\bbb,\ccc$ are respectively the ideals generated by the coefficients of $f,g,fg$, then we have $\ccc\subset\aaa\bbb\subset\aaa\cap\bbb$. As $\ccc=(1)$ implies $\aaa=(1)=\bbb$, we can assume $\ccc\ne(1)$, that is $\ccc\subset\mmm$ for some maximal ideal $\mmm$. Then the images $\overline f$ and $\overline g$ of $f$ and $g$ in $(A/\mmm)[x_1,\ldots,x_n]$ satisfy $\overline f\,\overline g=0$, and we get $\overline f=0$ or $\overline g=0$, that is $\aaa\ne(1)$ or $\bbb\ne(1)$.

\subsection{Page 11, Exercise 1.4}%

We must show that the Jacobson radical of $A[x]$ coincides with its nilradical. Let $f$ be in the Jacobson radical of $A[x]$. It suffices to show that $f$ is nilpotent. By Proposition~1.9 p.~6 of the book, $1-xf$ is a unit. Exercise 1.2i p.~11 implies that the coefficients of $f$ are nilpotent, and Exercise 1.2ii implies that $f$ itself is nilpotent. 

\subsection{Page 11, Exercise 1.5}%

\subsubsection{Exercise 1.5ii}

Here is an example of a non-nilpotent formal power series all of whose coefficients are nilpotent. Put $B:=\mathbb Z[y_2,y_3,\dots]$ where $y_2,y_3,\dots$ are indeterminates. Let $\aaa$ be the ideal of $B$ generated by the $y_i^i$ for $i\ge2$ and the $y_iy_j$ for $i\neq j$. Let $a_i$ be the image of $y_i$ in $A:=B/\aaa$. It is easy to see that $a_i^{i-1}\neq0$. Then $f:=a_2x^2+a_3x^3+\cdots$ satisfies 
$$
f^n=\sum_{i>n}a_i^nx^{in}\neq0.
$$

\subsubsection{Exercise 1.5iii}%

Other wording: $\mf R(A[[x]])=\mf R(A)+(x)$.

\subsubsection{Exercise 1.5iv}%

Let $\mmm$ be a maximal ideal of $A[[x]]$. We must show that $\mmm^{\oo c}$ is maximal and that $\mmm=\mmm^{\oo c}+(x)$. We have 

(a) $x\in\mmm$. Proof: $1-xf\in A[[x]]^\times$ for all $f\in A[[x]]$ by (i).

(b) $A[[x]]=A+\mmm$. Proof: $A[[x]]=A+(x)\overset{(\text a)}\subset A+\mmm$.

(c) $A/\mmm^{\oo c}\simeq A[[x]]/\mmm$. Proof: 
$$
A/\mmm^{\oo c}=A/(A\cap\mmm)\simeq(A+\mmm)/\mmm\overset{(\text b)}=A[[x]]/\mmm.
$$ 
Then (c) implies that $\mmm^{\oo c}$ is maximal.

(d) $\mmm=\mmm^{\oo c}+(x)$. Proof: Let $f\in A[[x]]$ with $f=a_0+a_1x+\cdots$. There is a unique $g\in A[[x]]$ such that $f=a_0+xg$, and (a) implies that $f\in\mmm$ if and only if $a_0\in\mmm^{\oo c}$. 

\subsubsection{Exercise 1.5v}%

In the next few lines, $A^*$ shall designate the set of prime ideals of the ring $A$, and $f^*:B^*\to A^*$ shall denote the map induced by the ring morphism $f:A\to B$. 

We must show that $A[[x]]^*\to A^*$ is surjective.

If 
$$
A\xrightarrow fB\xrightarrow gC
$$ 
are ring morphisms and if $(g\circ f)^*:C^*\to A^*$ is surjective, then so is $f^*:B^*\to A^*$. We solve Exercise 1.5v by applying this observation to the natural morphisms $A\to A[[x]]\to A$, whose composition is the identity of $A$. 

\subsection{Page 11, Exercise 1.6}%

\textbf{Statement.} A ring $A$ is such that every ideal not contained in the nilradical contains a non-zero idempotent (that is, an element $e$ such that $e^2=e\ne0$). Prove that the nilradical and Jacobson radical of $A$ are equal.

\textbf{Hint.} If $e=e^2\in\mf R$, then $e=0$. Indeed, the element $1-e$ being a unit, the equality $e(1-e)=0$ implies $e=0$.

\subsection{Page 11, Exercise 1.8}\label{vp1}%

\textbf{Statement.} Let $A$ be a ring $\ne0$. Show that the set of prime ideals of $A$ has minimal elements with respect to inclusion.

\textbf{Comment.} Let $X$ be the set of prime ideals of $A$. If $Y$ is a subset of $X$, and if the intersection of any totally ordered subset of $Y$ belongs to $Y$, then $Y$ has at least one minimal element.

In particular, if $\ppp_0\in X$ and if $\aaa$ is an ideal of $A$, then then the set 
$$
\{\ppp\in X\ |\ \aaa\subset\ppp\subset\ppp_0\}
$$ 
has at least one minimal element.

\subsection{Page 11, Exercise 1.11iii}\label{1.11iii}%

Let $A$ be boolean, and let us show that any finitely generated ideal $\aaa$ is principal. We can assume $\aaa=(x,y)$. Then $z:=x+y-xy\in\aaa$ satisfies $xz=x,yz=y$, and we get $\aaa=(z)$.

\subsection{Page 11, Exercise 1.12}\label{112}%

A local ring $(A,\mmm)$ contains no idempotent $\neq0,1$. 

Proof: Let $e\in A$ be idempotent. If $e$ is a unit, then $e=e^{-1}e^2=e^{-1}e=1$. If $e$ is not a unit, then $e\in\mmm=\mf R$, and $1-e$ is a unit (by Proposition~1.9 p.~6 of the book) and an idempotent, and thus equal to $1$, hence $e=0$.

\subsection{Page 11, Exercise 1.13}%

In the notation of the exercise, let us show $\aaa\neq(1)$. 

Given $f_1,\dots,f_n\in\Sigma$, set $x_i:=x_{f_i}$ for $i=1,\dots,n$. Assuming $\aaa=(1)$ by contradiction, we can choose $f_1,\dots,f_n$ as above in such a way that there are $g_i(x_1,\dots,x_n)$ in $K[x_1,\dots,x_n]$ such that 
$$
\sum_{i=1}^n g_i(x_1,\dots,x_n)f_i(x_i)=1.
$$ 
Letting $L$ be an extension of $K$ in which each $f_i$ has a root $\alpha_i$, we get the equality $0=1$ in $L$ be evaluating the above display at $(\alpha_1,\dots,\alpha_n)$.

\subsection{Page 12, Exercise 1.14}\label{114}%

More precisely, for each $\mf a\in\Sigma$ there is a maximal element $\bbb\in\Sigma$ such that $\mf a\subset\bbb$. The proof is similar to that of Proposition~1.8 p.~5 of the book.

\subsection{Page 12, Exercise 1.15}\label{vp2}%

By Section~\ref{vp1} p.~\pageref{vp1} we have 
$$
V(E)=\bigcup_{\ppp\in M}V(\ppp),
$$ 
where $M$ is the set of minimal elements of $V(E)$.

\subsection{Page 12, Exercise 1.17vi}%

We must show that $X_f$ is quasi-compact, that is, assuming 
$$
X_f\subset\bigcup_{i\in I}X_{g_i},
$$ 
we must show that there is a finite subset $F$ of $I$ such that 
\begin{equation}\label{117}
X_f\subset\bigcup_{i\in F}X_{g_i}.
\end{equation}
Our assumption means 
$$
\bigcap_{i\in F}V(g_i)\subset V(f).
$$ 
Writing $\aaa$ for the ideal generated by the $g_i$, then above display is equivalent to 
$$
V(\aaa)\subset V(f),
$$ 
that is to 
$$
f^n\in\aaa\text{ for some } n.
$$ 
But this holds if and only if $f^n$ belongs to the ideal generated by 
$$
\{f_i\ |\ i\in F\}
$$ 
for some finite subset $F$ of $I$, and $F$ clearly satisfies \eqref{117}.

\subsection{Page 13, Exercise 1.18iv}%

\textbf{Statement.} Prove that $\Spec(A)$ is a $T_0$-space (this means that if $x,y$ are distinct points of $\Spec(A)$, then either there is a neighborhood of $x$ which does not contain $y$, or else there is a neighborhood of $y$ which does not contain $x$).

\textbf{Solution.} (Sketch.) Let $\ppp,\qqq\in\Spec(A)$ be distinct. It suffices to show that there is an ideal $\aaa$ such that either $\ppp\supset\aaa$ and $\qqq\not\supset\aaa$ or $\qqq\supset\aaa$ and $\ppp\not\supset\aaa$. We can assume $\qqq\not<\ppp$, and it suffices to set $\aaa:=\ppp$.

\subsection{Page 13, Exercise 1.19}\label{irr}%

\textbf{Statement.} A topological space $X$ is said to be \textbf{irreducible} if $X\ne\varnothing$ and if every pair of non-empty open sets in $X$ intersect, or equivalently if every non-empty open set is dense in $X$. Show that $\Spec(A)$ is irreducible if and only if the nilradical of $A$ is a prime ideal.

\textbf{Observations:}

$\bu$ The statement implies that the closed irreducible subsets of $\Spec(A)$ are the closures of the singletons, i.e. the $V(\ppp)$. 

$\bu$ $X\ne\varnothing$ is irreducible if and only if $X=C\cup D$ with $C$ and $D$ closed implies $C=X$ or $D=X$. 

Assume $X\ne\varnothing$. Let us show that $X$ is irreducible if and only if every non-empty open set is dense in $X$, or, equivalently, let us prove that $X$ is reducible if and only if some non-empty open set is not dense in $X$. 

If $X$ is reducible, there are disjoint non-empty open subsets $U$ and $V$. Then $V$ is contained in the complement of the closure of $U$, and $U$ is not dense. 

If some non-empty open subset $U$ is not dense in $X$, the complement of the closure of $U$ is non-empty open subset disjoint from $U$.

\subsection{Page 13, Exercise 1.20}%

\textbf{Statement.} Let $X$ be a topological space.

(i) If $Y$ is an irreducible (Exercise 19) subspace of $X$, then the closure $\overline Y$ of $Y$ in $X$ is irreducible.

(ii) Every irreducible subspace of $X$ is contained in a maximal irreducible subspace.

(iii) The maximal irreducible subspaces of $X$ are closed and cover $X$. They are called the irreducible components of $X$. What are the irreducible components of a Hausdorff space?

(iv) If $A$ is a ring and $X=\Spec(A)$, then the irreducible components of $X$ are the closed sets $V(\ppp)$, where $\ppp$ is a minimal prime ideal of $A$ (Exercise 8).

\textbf{Solution.} (i) This results immediately from the following observations:

$\bu\ Y$ is irreducible if and only if for all open subsets $U,V$ of $X$ we have: $U$ and $V$ meet $Y$ implies that $U\cap V$ meet $Y$.

$\bu$ An open subset of $X$ which meets $\overline Y$ meets $Y$. (Proof: If $U$ doesn't meet $Y$, then $Y\subset X\setminus U$, and thus $\overline Y\subset X\setminus U$.)

Parts (ii) and (iii) are left to the reader.

(iv) This follows from the first observation made in Section~\ref{irr} p.~\pageref{irr} above.

\subsection{Page 13, Exercise 1.21}%

\subsubsection{Part (iii)}\label{121iii}%

In the notation of the Exercise, we must show 
\begin{equation}\label{phi}
\overline{\phi^*(V(\bbb))}=V(\bbb^{\oo c}).
\end{equation}
Let us prove first 
\begin{equation}\label{S}
\overline S=V(\aaa)\text{ where }\aaa:=\bigcap_{\ppp\in S}\ \ppp
\end{equation}
for $S\subset\Spec(A)$. The inclusion $S\subset V(\aaa)$ is clear. Let $\aaa'$ be an ideal of $A$ satisfying $S\subset V(\aaa')$. It suffices to show $V(\aaa)\subset V(\aaa')$. But this is clear because we have $\aaa'\subset\ppp$ for all $\ppp\in S$, and thus 
$$
\aaa'\subset\bigcap_{\ppp\in S}\ \ppp=\aaa.
$$ 
This proves \eqref{S}. Now let us check \eqref{phi}. We have 
$$
\overline{\phi^*(V(\bbb))}=V\left(\bigcap_{\ppp\in\phi^*(V(\bbb))}\ppp\right)=V\left(\bigcap_{\qqq\supset\bbb}\qqq^{\oo c}\right)=V\left(\left(\bigcap_{\qqq\supset\bbb}\qqq\right)^{\oo c}\right)=V(r(\bbb)^{\oo c})
$$
$$
=V(r(\bbb^{\oo c}))=V(\bbb^{\oo c}).
$$
Let $\mathcal I$ be the set of radical ideals of $A$, let $\mathcal C$ be the set of closed subsets of $\Spec(A)$, and define $W:\mathcal C\to\mathcal I$ by 
$$
W(C):=\bigcap_{\ppp\in C}\ \ppp.
$$ 
\begin{prop}\label{gal}
The map $W$ is bijective and its inverse is $\aaa\mapsto V(\aaa)$.
\end{prop}
This follows from \eqref{S}.

\subsubsection{Part (v)}\label{121v}%

In the notation of the exercise we must show 
$$
\overline{\phi^*(Y)}=X\iff\Ker\phi\subset\mf N(A).
$$ 
More generally we have 
$$
\overline{\phi^*(Y)}=V(\Ker\phi)
$$ 
by Part (iii) of the same exercise (see Section~\ref{121iii} above).

\subsection{Page 13, Exercise 1.22, (i) implies (iii)}%

We have $X=V(\aaa)\sqcup V(\bbb)$ with $\aaa,\bbb\ne(1)$ and $\aaa,\bbb\not\subset\mf N$. This implies $\aaa+\bbb=(1)$ and $\aaa\cap\bbb\subset\mf N$. There are $a\in\aaa$ and $b\in\bbb$ such that $a,b\notin\mf N$ and $a+b=1$, and thus $(a^n)+(b^n)=(1)$ and $a^nb^n=0$ for some $n$, and we have $e+f=1$ and $ef=0$ for some $e\in(a^n)$ and some $f\in(b^n)$ with $e\ne0\ne f$. This gives $e-e^2=ef=0$, and thus $e^2=e$. Similarly $f^2=f$.

\subsection{Page 14, Exercise 1.23}%

(i) In fact we have $X=X_f\sqcup X_{1-f}$ for all $f$ in $A$.

(ii) See Section~\ref{1.11iii} p.~\pageref{1.11iii}.

(iv) If $f\in\ppp\setminus\qqq$ then $\ppp\in X_{1-f}$ and $\qqq\in X_f$.

\subsection{Page 14, Exercise 1.25}%

The following observation can be used in the solution to Exercise~1.25.

Let $a$ and $b$ be elements of a boolean ring $A$. We claim
\begin{equation}\label{125a}
(a)=(b)\iff a=b.
\end{equation} 
In words: In a boolean ring, any principal ideal has a unique generator. Let us first show 
\begin{equation}\label{125b}
a\in(b)\iff ab=a.
\end{equation}
Assume $a\in(b)$, that is $a=bc$ for some $c$, and thus $ab=b^2c=bc=a$. The other implication is trivial. This proves \eqref{125b}. To prove the non-obvious implication in \eqref{125a}, assume $(a)=(b)$, that is $a\in(b)$ and $b\in(a)$. By \eqref{125b} this gives $a=ab=b$. $\square$

Note that \eqref{125a} and Proposition~\ref{gal} p.~\pageref{gal} imply $X_f=X_g\iff f=g$.

Note also the following: Let $A$ be a boolean ring. Then the map $a\mapsto(a)$ is a bijection from $A$ to the set $P$ of principal ideals of $A$. Moreover 

$\bullet\ P$ is a sublattice of the lattice of ideals of $A$, 

$\bullet\  P$ is the lattice attached to $A$,

$\bullet$ we have $(a)+(b)=(a+b+ab),\ (a)\cap(b)=(ab)$. 

\subsection{Page 16, Exercise 1.28}% 

Assume that $k$ is infinite and set $t:=(t_1,\dots,t_n)$, $u:=(u_1,\dots,u_m)$, where the $t_i$ and $u_j$ are indeterminates. 

To a polynomial map $\phi:k^n\to k^m$ we attach a $k$-algebra morphism $\psi:k[u]\to k[t]$ by setting $\psi(g):=g\circ\phi$, where $g\in k[u]$ is viewed as a polynomial map $g:k^m\to k$. 

Conversely, to a $k$-algebra morphism $\psi:k[u]\to k[t]$ we attach a polynomial map $\phi:k^n\to k^m$ by setting $\phi_i(x):=\psi(u_i)(x)$. 

Let $\phi:k^n\to k^m$ be a polynomial map, let $\psi:k[u]\to k[t]$ be the corresponding $k$-algebra morphism, and let $\phi':k^n\to k^m$ be the polynomial map attached to $\psi$. For $x\in k^n$ we have 
$$
\phi_i'(x)=\psi(u_i)(x)=u_i(\phi(x))=\phi_i(x).
$$ 
Conversely, let $\psi:k[u]\to k[t]$ be a $k$-algebra morphism, let $\phi:k^n\to k^m$ be the corresponding polynomial map, and let $\psi':k[u]\to k[t]$ be the $k$-algebra morphism attached to $\phi$. For $g\in k[u]$ and $x\in k^n$ we have 
$$
\psi'(g)(x)=g(\phi(x))=g(\phi_1(x),\dots,\phi_m(x))=g(\psi(u_1)(x),\dots,\psi(u_m)(x)). 
$$ 
As the $k$-algebra morphisms $\alpha,\beta:k[u]\rightrightarrows k$ defined by 
$$
\alpha(g):=g(\psi(u_1)(x),\dots,\psi(u_m)(x))
$$ 
and 
$$
\beta(g):=\psi(g)(x)
$$ 
coincide on the $u_i$, they are equal, so that we get 
\begin{equation}\label{128}
g(\psi(u_1)(x),\dots,\psi(u_m)(x))=\psi(g)(x),
\end{equation}
and thus 
$$
\psi'(g)(x)=\psi(g)(x).
$$ 
This shows that $\phi\mapsto\psi$ and $\psi\mapsto\phi$ are inverse bijections. To complete the solution to the Exercise, it suffices to show (using obvious notation):

(a) If $\phi:k^n\to k^m$ maps $X$ into $Y$, then $\psi:k[u]\to k[t]$ maps $I(Y)$ to $I(X)$. 

(b) If $\psi:k[u]\to k[t]$ maps $I(Y)$ to $I(X)$, then $\phi:k^n\to k^m$ maps $X$ into $Y$. 

Proof of (a): For $g\in I(Y)$ and $x\in X$ we have 
$$
\psi(g)(x)=g(\phi(x))=0.
$$ 
Proof of (b): For $x\in X$ and $g\in I(Y)$ we have 
$$
g(\phi(x))=g(\phi_1(x),\dots,\phi_m(x))=g(\psi(u_1)(x),\dots,\psi(u_m)(x))
$$ 
$$
=\psi(g)(x)=0,
$$ 
the penultimate equality being justifies by \eqref{128}.

% comment removed: https://docs.google.com/document/d/1auR2cq3XwTck00fSWk4i_h-Fuy9JKwLC6WVMjiXaGdM/edit

\section{About Chapter 2}%%

\subsection{Page 21, Proposition 2.4}\label{24}%

Proposition 2.4 reads:

\emph{Let $M$ be a finitely generated $A$-module, let $\mf a$ be an ideal of $A$, and let $\phi$ be an $A$-module endomorphism of $M$ such that $\phi(M)\subseteq\aaa M$. Then $\phi$ satisfies an equation of the form
$$
\phi^n+a_1\,\phi^{n-1}+\cdots+a_n=0
$$ 
where the $a_i$ are in $\mf a$.}

Strictly speaking, this makes no sense because $\phi$ and the $a_i$ belong to different rings. We suggest the following restatement:

\emph{Let $M$ be a finitely generated $A$-module, let $\aaa$ be an ideal of $A$, let $\phi$ be an $A$-module endomorphism of $M$ such that $\phi(M)\subseteq\aaa M$, and let $\psi:A\to\oo{End}_A(M)$ be the natural morphism. Then $\phi$ satisfies an equation of the form
$$
\phi^n+\psi(a_1)\,\phi^{n-1}+\cdots+\psi(a_n)=0
$$ 
where the $a_i$ are in $\aaa$.}

[We have used the symbol $\subseteq$ above to make the quote accurate, but in general we denote inclusions by $\subset$.]

Another fix would be to equip $\operatorname{End}_A(M)$ with its natural $A$-module structure and change the display to 
$$
\phi^n+a_1\,\phi^{n-1}+\cdots+a_n\,\phi^0=0.
$$

If $\phi=\psi(\,y)$ for some $y$ in $A$ we get 
\begin{equation}\label{2124}
\psi(\,y^n+a_1\,y^{n-1}+\cdots+a_n)=0.
\end{equation}
This yields the following:

\emph{If $yM\subset\aaa M$ for some $y$ in $A$, then there is an $x$ in $A$ such that $xM=0$ and $x\equiv y^n\pmod{\aaa}$ for some $n$.}

Corollary 2.5 reads:

\emph{Let $M$ be a finitely generated $A$-module and let $\aaa$ be an ideal of $A$ such that $\aaa M=M$. Then there exists $x\equiv1\pmod{\aaa}$ such that $xM=0$.}

The proof reads:

Take $\phi=$ identity, $x=1+a_1+\cdots+a_n$ in (2.4).

I suggest the following restatement of the proof:

Since $\phi=$ identity, we can take $y=1$ in \eqref{2124}. This gives 
$$
\psi(1+a_1+\cdots+a_n)=0,
$$ 
and we can set $x:=1+a_1+\cdots+a_n$.

Note that Corollary 2.5 can also be stated as follows:

\emph{Let $M$ be a finitely generated $A$-module and let $\aaa$ be an ideal of $A$ such that $\aaa M=M$. Then there exists $\alpha\in\aaa$ such that $\alpha m=m$ for all $m\in M$.}

In other words, we go from $\aaa M=M$ to $\alpha m=m$.

Let us rewrite the proof of Proposition 2.4 to turn it into a proof of the corrected statement:%with as few changes as possible:

Let $x_1,\dots,x_n$ be a set of generators of $M$. Then each $\phi(x_i)\in\aaa M$, so that we have say $\phi(x_i)=\sum_{j=1}^na_{ij}x_j\ (1\le i\le n; a_{ij}\in\aaa)$, i.e., 
$$
\sum_{j=1}^n\ (\delta_{ij}\phi-\psi(a_{ij}))\ x_j=0
$$ 
where $\delta_{ij}$ is the Kronecker delta. Set $b_{ij}:=\delta_{ij}\phi-\psi(a_{ij})$, and let us regard the matrix $(b_{ij})$ as a matrix with entries in the subring $B$ of $\text{End}_A(M)$ generated by $\psi(A)$ and $\phi$, subring which is clearly commutative. Letting $(c_{ij})$ be the adjoint of $(b_{ij})$, we get 
$$
0=\sum_jc_{ij}\sum_kb_{jk}x_k=\sum_{j,k}c_{ij}b_{jk}x_k=\sum_k\left(\sum_jc_{ij}b_{jk}\right)x_k
$$ 
$$
=\sum_k\delta_{ik}\det(b_{j\ell})\,x_k=\det(b_{j\ell})\,x_i.
$$ %By multiplying on the left by the adjoint $(c_{ij})$ of $(b_{ij})$ 
It follows that $\det(b_{j\ell})$ annihilates each $x_i$, hence is the zero endomorphism of $M$. Expanding out the determinant, we have an equation of the required form.

(The underlying reasoning is that we consider the natural morphism from the ring of $n$ by $n$ matrices with entries in $B$ to the endomorphism ring of the $A$-module $M^n$.)

\subsection{Page 23, proof of Proposition 2.9 (i)}%

Let us prove: $\overline v$ injective $\implies$ $v$ surjective. If $\phi:M''\to M''/\oo{Im}(v)$ is the canonical projection, we get 
$$
0=\phi\circ v=\overline v(\phi)\ \implies\ \phi=0\ \implies\ v\text{ surjective.}
$$

\subsection{Page 24, vanishing tensors}\label{vt}%

Permanent tag: vanten.

This is taken from Lemma 10, Chapter 1, Section 2, Subsection 11, page 41 in Nicolas Bourbaki, \textbf{Algèbre commutative: Chapitres 1 à 4}, Masson, Paris 1985:

\emph{Let $A$ be a (non necessarily commutative) associative ring with $1$, let $M$ be a right $A$-module, let $N$ be a left $A$-module, let 
$$
(\,y_i)_{i\in I}\subset N
$$ 
be a generating family, let 
$$
(\,x_i)_{i\in I}\subset M
$$ 
be a finitely supported family, and assume 
$$
\sum_{i\in I}x_i\otimes y_i=0
$$ 
in $M\otimes_AN$. Then there is a finite set $J$ and there are finitely supported families 
$$
(x'_j)_{j\in J}\subset M,\quad(a_{ij})_{i\in I,j\in J}\subset A
$$ 
such that 
$$
\sum_{j\in J} x'_ja_{ij}=x_i
$$ 
for all $i$ and 
$$
\sum_{i\in I}a_{ij}y_i=0
$$ 
for all $j$.}

\begin{proof} 
Let $F$ be the free left $A$-module whose basis is the family of symbols $(\,e_i)_{i\in I}$, and consider the exact sequence 
$$
0\to R\xrightarrow\iota F\xrightarrow\varphi N\to 0
$$ 
where $\varphi$ is defined by $\varphi(e_i)=y_i$. It induces the exact sequence 
$$
M\otimes_AR\xrightarrow{\iota'}M\otimes_AF\xrightarrow{\varphi'}M\otimes_AN\to 0,
$$ 
and we get successively
$$
\varphi'\left(\sum_{i\in I}x_i\otimes e_i\right)=\sum_{i\in I}x_i\otimes y_i=0,
$$ 
$$
\sum_{i\in I}x_i\otimes e_i=\iota'\left(\sum_{j\in J}x'_j\otimes r_j\right)=\sum_{j\in J}x'_j\otimes\iota(r_j)
$$ 
where $J$ is a finite set, where $x'_j$ is in $M$ and where $r_j$ is in $R$, 
$$
\iota(r_j)=\sum_{i\in I}a_{ij}e_i
$$ 
for some finitely supported family $(a_{ij})_{i\in I,j\in J}\subset A$, 
$$
\sum_{i\in I}x_i\otimes e_i=\sum_{j\in J}x'_j\otimes\iota(r_j)=\sum_{j\in J} x'_j\otimes\sum_{i\in I}a_{ij}e_i
$$
$$
=\sum_{i\in I}\sum_{j\in J} x'_j\otimes a_{ij}e_i=\sum_{i\in I}\left(\sum_{j\in J}x'_ja_{ij}\right)\otimes e_i,
$$ 
$$
x_i=\sum_{j\in J}x'_ja_{ij},
$$ 
$$
0=\varphi(\iota(r_j))=\sum_{i\in I}a_{ij}y_i.
$$ 
\end{proof}

In the same spirit, we have:

\emph{Let $A$ be a (non necessarily commutative) associative ring with $1$; let $I$ be a set; let $J$ be a finite set; let 
$$
A^{\oplus I}\xrightarrow\phi A^{\oplus J}\xrightarrow\psi N\to0
$$ 
be an exact sequence of left $A$-modules; let $\phi$ be given by 
$$
\phi(e_i)=\sum_ja_{ij}f_j,
$$ 
where $(e_i)$ and $(f_j)$ are the obvious canonical bases; for $j$ in $J$ set $v_j:=\psi(f_j)\in N$; let $M$ be a right $A$-module; let $u$ in $M^{\oplus J}$ satisfy $\sum u_j\otimes v_j=0$ in $M\otimes_AN$. Then there is a $w$ in $M^{\oplus I}$ such that 
$$
\sum_iw_ia_{ij}=u_j
$$ 
for all $j$.}

\begin{proof} 
Applying $M\otimes_A-\ $ to the above exact sequence we get the exact sequence 
$$
M^{\oplus I}\xrightarrow{\phi'}M^{\oplus J}\xrightarrow{\psi'}M\otimes_AN\to0
$$ 
and $\psi'(u)=0$. Thus there is a $w$ in $M^{\oplus I}$ such that $\phi'(w)=u$, and it's easy to see that this $w$ does the job. 
\end{proof}

\subsection{Page 27, contracted ideals}\label{27}%

If $A\to B$ is a morphism, then an ideal $\aaa$ of $A$ is contracted if and only if the natural map $A/\aaa\to B\otimes_A A/\aaa$ is injective. In particular, if a proper ideal $\aaa$ is contracted, we have $B\otimes_A A/\aaa\ne0$. Indeed, $B\otimes_A A/\aaa\simeq B/\aaa^{\oo e}$ and $\oo{Ker}(A/\aaa\to B\otimes_A A/\aaa)\simeq\aaa^{\oo{ec}}/\aaa$. %(Compare with Section~\ref{43b} p.~\pageref{43b}.)

\subsection{Page 29, Proposition 2.19}%

I don't understand the proof that (ii) implies (i). Here is another argument.

We start by proving (ii)$\iff$(iii) as in the book. Then we prove (iii)$\implies$(i) as follows:

Let $P\xr fQ\xr gR$ be exact, let $Q\xr{g'}g(Q)$ and $g(Q)\xr iR$ be the obvious maps, and let $T$ be the functor $N\otimes_A-$. We must show that 
$$
T(P)\xr{T(f)}T(Q)\xr{T(g)}T(R)
$$ 
is exact. The sequences 
$$
P\xr fQ\xr{g'}g(Q)\to0,\quad0\to g(Q)\xr{i'}R,
$$ 
$$
T(P)\xr{T(f)}T(Q)\xr{T(g')}T(g(Q))\to0,\quad0\to T(g(Q))\xr{T(i')}T(R),
$$ 
being exact, we get 
$$
\Ker(T(g))=\Ker(T(i)\circ T(g'))=\oo{Im}(T(f)).
$$

\subsection{Page 31, Exercise 2.1}%

Generalization: compute $A/\aaa\otimes_AA/\bbb$ (obvious notation).

\subsection{Page 32, Exercise 2.11}%

We solve the last part of Exercise 2.11. We claim that if $f:A^m\to A^n$ is an $A$-linear injection, then $m\le n$. 

Suppose for the sake of contradiction that there are positive integers $i,j$ and an $A$-linear injection $f:A^{i+j}\to A^i$. 

Set $k:=i+j$ and define $g:A^k\to A^k$ by $g(x,y):=(f(x,y),0)$ for $x\in A^i$, $y\in A^j$. Note that $g$ is injective. By Proposition~2.4 p.~21 of the book (see Section~\ref{24} p.~\pageref{24} above) there is a monic polynomial $P\in A[t]$ such that there is an $a$ in $A$ with 
\begin{equation}\label{211}
gP(g)=a\oo{id}_{A^k}.
\end{equation} 
We can assume that the degree of $P$ is minimal for this condition. In particular $P(g)$ is nonzero. Evaluating \eqref{211} on $(0,y)$, $y\in A^j$, gives $ay=0$. As $y$ is arbitrary, this implies $a=0$, and thus $gP(g)=0$, and the injectivity of $g$ yields $P(g)=0$, a contradiction. 

\subsection{Page 32, Exercise 2.14}\label{colim}%

Assume we have an inductive system $(M_i)$ of $A$-modules indexed by a category  $I$, that is, for each object $i$ of $I$ we have an $A$-module $M_i$, and for each morphism $f:d(f)\to c(f)$ in $I$ we have an $A$-linear map $M_f:M_{c(f)}\to M_{d(f)}$. 

Consider the commutative diagram %Define the morphisms $u$ and $v$ by the commutative diagram
$$
\begin{tikzcd}
M_{d(f)}\ar[d,"\alpha_{f}"']\ar[dr,"\beta_{d(f)}"]&M_i\ar[d,"\beta_i"]\\ 
\ds\bigoplus_gM_{d(g)}\ar[r,yshift=0.9ex,"u"]\ar[r,yshift=-0.9ex,"v"']&\ds\bigoplus_jM_j\ar[r,"\pi"]&C\\ 
M_{d(f)}\ar[u,"\alpha_{f}"]\ar[r,"M_f"']&M_{c(f),}\ar[u,"\beta_{c(f)}"']
\end{tikzcd}
$$ 
where the $\alpha_f$ and the $\beta_i$ are the coprojections, and the middle line is exact (i.e. the last arrow is a coequalizer). 

We claim that $C$ is a colimit of our system. %The proof is left to the reader.

Let $h:\bigoplus M_j\to N$ be $A$-linear. We have 
$$
h\circ u=h\circ v
$$ 
$$
\iff h\circ u\circ\alpha_f=h\circ v\circ\alpha_f\ \forall\ f
$$ 
$$
\iff h\circ\beta_{d(f)}=h\circ\beta_{c(f)}\circ M_f\ \forall\ f.
$$ 
This shows that $C$ is indeed a colimit of our system.

The following definition is taken from the Stacks Project\\ \href{https://stacks.math.columbia.edu/tag/002V}{https://stacks.math.columbia.edu/tag/002V}:

\begin{df}
%\label{definition-directed}
We say that a category $I$ is \emph{filtered} if the following conditions hold:
\begin{enumerate}
\item the category $I$ has at least one object,
\item for every pair of objects $x, y$ of $I$ there exists an object $z$ and morphisms $x \to z$, $y \to z$, and
\item for every pair of objects $x, y$ of $I$ and every pair of morphisms $a, b : x \to y$ of $I$ there exists a morphism $c : y \to z$ of $I$ such that $c \circ a=c\circ b$ as morphisms in $\mathcal{C}$.
\end{enumerate}
\end{df}

Assume now that the category $I$ is filtered, and form the commutative diagram %Define the morphisms $u$ and $v$ by the commutative diagram
$$
\begin{tikzcd}
M_{d(f)}\ar[d,"\alpha'_{f}"']\ar[dr,"\beta'_{d(f)}"]&M_i\ar[d,"\beta'_i"]\ar[dr,"\gamma_i"]\\ 
\ds\bigsqcup_gM_{d(g)}\ar[r,yshift=0.9ex,"u"]\ar[r,yshift=-0.9ex,"v"']&\ds\bigsqcup_iM_i\ar[r,"\pi'"]&C'\\ 
M_{d(f)}\ar[u,"\alpha'_{f}"]\ar[r,"M_f"']&M_{c(f),}\ar[u,"\beta'_{c(f)}"']
\end{tikzcd}
$$ 
which is the "set theoretical analog" of the previous one, that is, $\bigsqcup$ denotes disjoint union, and the middle line is exact in the category of sets (i.e. the last arrow is a set theoretical coequalizer). Then $C'$ is the set theoretical colimit of our inductive system. 

We claim that the natural set theoretical map $C'\to C$ is bijective. 

To prove this we define a structure of $A$-module on $C'$. To define the addition it suffices to define $\gamma_i(x_i)+\gamma_j(x_j)$ for $x_i\in M_i$, $x_j\in M_j$. To do this we choose morphisms $f:i\to k$, $g:j\to k$, we check that the element 
$$
\gamma_k(M_f(x_i)+M_g(x_j))\in C'
$$ 
does not depend on the choice of $k,f$ and $g$, and we set 
$$
\gamma_i(x_i)+\gamma_j(x_j):=\gamma_k(M_f(x_i)+M_g(x_j))\in C'.
$$ 
Then we define the map $A\times C'\to C'$ (details left to the reader), we check that we have indeed defined a structure of $A$-module on $C'$, we use it to define a morphism $C\to C'$, and we check that this morphism is inverse to the morphism $C'\to C$ previously defined. Again, the details are left to the reader. 

% comment removed https://docs.google.com/document/d/1p9Zb4h4QfJOoEdHG-OtcEpEXKNNxvEHr9XZ5lTQ6tg8/edit

\subsection{Page 33, Exercise 2.20}%

% comment removed https://docs.google.com/document/d/17kV4NGPGv6_o1oibgrm3QyNS-c5T0mJVynjJzqlLK9o/edit

In view of Section~\ref{colim} p.~\pageref{colim}, to prove that 
\begin{equation}\label{tpcwc}
\text{the tensor product commutes with colimits,} 
\end{equation}
it suffices to check that it commutes with direct sums. 

To do so, let $M$ be an $A$-module, let $(N_i)$ be a family of $A$-module, and define the morphisms $f$ and $g$ by the commutative diagram 
$$
\begin{tikzcd} 
\bigoplus_i(M\otimes N_i)\ar[r,yshift=0.9ex,"f"]\ar[r,leftarrow,yshift=-0.9ex,"g"']& M\otimes\left(\bigoplus_iN_i\right)\\ 
M\otimes N_i\ar[u,"\beta_i"]\ar[r,equal]&M\otimes N_i,\ar[u,"1\otimes\alpha_i"']
\end{tikzcd}
$$ 
the tensor products being taken over $A$.

We leave it to the reader to check that $f$ and $g$ are inverse isomorphisms.

\subsection{Page 34, Exercise 2.23}\label{223}%

Exercises 2.21 and 2.23 p.~34 of the book imply that $B=0$ if and only if 
$$
B_{\lambda_1}\otimes_A\cdots\otimes_AB_{\lambda_n}=0
$$ 
for some family $(\lambda_1,\dots,\lambda_n)$ of distinct elements of $\Lambda$. 

\subsection{Page 34, Exercise 2.25, first solution}\label{s225a}%

Recall the statement of Exercise 2.25:

\begin{exo}[Exercise 2.25]\label{e225}
Let $0\to N'\to N\to N''\to0$ be an exact sequence, with $N''$ flat. Then $N'$ is flat if and only if $N$ is flat.
\end{exo}

Here is a solution to Exercise 2.25 which does \emph{not} use the Tor functor. Of course, the solution using the Tor functor (and assuming the Tor functor and some of its basic properties are known) is much simpler. In the next section (Section~\ref{sol2} p.~\pageref{sol2}) we give a proof which includes a definition of the Tor functor.

The proof below follows closely the proof of Proposition 1.2.5.5 in Bourbaki's \textbf{Algèbre commutative}.

In this section, the ground ring is denoted by $R$, not by $A$.

\subsubsection{Part 1: The Snake Lemma}\label{ssl}

Let 
\begin{equation}\label{b10}
\begin{tikzcd}
A\ar[d,"\alpha"]\ar[r,"u"]&B\ar[d,"\beta"]\ar[r,"v"]&C\ar[d,"\gamma"]\\ 
A'\ar[r,"u'"']&B'\ar[r,"v'"']&C'
\end{tikzcd}
\end{equation}
be a commutative diagram of $R$-modules with exact rows. 

\begin{lem}\label{b1i}
If $\gamma$ is injective, we have 
$$
\oo{Im}(\beta)\cap\oo{Im}(u')=\oo{Im}(u'\circ\alpha)=\oo{Im}(\beta\circ u).
$$
\end{lem}

\begin{proof}
We clearly have 
$$
\oo{Im}(u'\circ\alpha)=\oo{Im}(\beta\circ u)\subset\oo{Im}(\beta)\cap\oo{Im}(u').
$$ 
Conversely, let $b'\in\oo{Im}(\beta)\cap\oo{Im}(u')$. There is a $b\in B$ such that $b'=\beta(b)$. As $v'\circ u'=0$, we have 
$$
0=v'(b')=v'(\beta(b))=\gamma(v(b)),
$$ 
whence $v(b)=0$ since $\gamma$ is injective. The first row of \eqref{b10} being exact, there is an $a\in A$ such that $b=u(a)$, whence $b'=\beta(u(a))$.
\end{proof}

\begin{lem}\label{b1ii}
If $\alpha$ is surjective, we have 
$$
\oo{Ker}(\beta)+\oo{Im}(u)=\oo{Ker}(v'\circ\beta)=\oo{Ker}(\gamma\circ v).
$$
\end{lem}

\begin{proof}
As $v\circ u=0$ and $v'\circ u'=0$, it is clear that 
$$
\oo{Ker}(\beta)+\oo{Im}(u)\subset\oo{Ker}(v'\circ\beta)=\oo{Ker}(\gamma\circ v).
$$ 
Conversely, let $b\in\oo{Ker}(v'\circ\beta)$. Then $\beta(b)\in\oo{Ker}(v')$, and there is a $a'\in A'$ such that $u'(a')=\beta(b)$ since the bottom row of \eqref{b10} is exact. As $\alpha$ is surjective, there is an $a\in A$ such that $\alpha(a)=a'$, whence 
$$
\beta(b)=u'(\alpha(a))=\beta(u(a));
$$ 
this implies that $b-u(a)$ is in in $\oo{Ker}(\beta)$.
\end{proof}

We extend the commutative diagram \eqref{b10} as follows:
\begin{equation}\label{b10x}
\begin{tikzcd}
\oo{Ker}(\alpha)\ar[d]\ar[r,"u_1"]&\oo{Ker}(\beta)\ar[d,"j"]\ar[r,"v_1"]&\oo{Ker}(\gamma)\ar[d,"k"]\\ 
A\ar[d,"\alpha"]\ar[r,"u"]&B\ar[d,"\beta"]\ar[r,"v"]&C\ar[d,"\gamma"]\\ 
A'\ar[d,"p"]\ar[r,"u'"]&B'\ar[d,"q"]\ar[r,"v'"]&C'\ar[d]\\ 
\oo{Coker}(\alpha)\ar[r,"u_2"]&\oo{Coker}(\beta)\ar[r,"v_2"]&\oo{Coker}(\gamma),
\end{tikzcd}
\end{equation} 
the new maps being the natural ones.

Recall that we are working under the assumption that the second and third rows of \eqref{b10x} are exact.

\begin{lem}\label{b2i}
The sequence 
$$
\oo{Ker}(\alpha)\xr{u_1}\oo{Ker}(\beta)\xr{v_1}\oo{Ker}(\gamma)
$$ 
is a complex. Moreover, if $u'$ is injective, this complex is exact.
\end{lem}
 
\begin{proof}
The first claim is clear. We have 
$$
\oo{Ker}(v_1)=\oo{Ker}(\beta)\cap\oo{Ker}(v)=\oo{Ker}(\beta)\cap\oo{Im}(u)=\oo{Im}(j)\cap\oo{Im}(u).
$$ 
Assume that $u'$ is injective. As Lemma~\ref{b1i} implies 
$$
\oo{Im}(j)\cap\oo{Im}(u)=\oo{Im}(j\circ u_1)=\oo{Im}(u_1),
$$ 
we get $\oo{Ker}(v_1)=\oo{Im}(u_1)$.
\end{proof}

\begin{lem}\label{b2ii}
The sequence 
$$
\oo{Coker}(\alpha)\xr{u_2}\oo{Coker}(\beta)\xr{v_2}\oo{Coker}(\gamma)
$$ 
is a complex. Moreover, if $v$ is surjective, this complex is exact.
\end{lem}

\begin{proof}
As $u_2$ and $v_2$ are obtained from $u$ and $v$ by taking quotients, it is clear that $v_1\circ u_2=0$. Suppose $v$ is surjective; $q$ and $p$ being surjective, we get, in view of the assumptions and Lemma~\ref{b1ii},
$$
\oo{Ker}(v_2) = q(\oo{Ker}(v_2\circ q))= q(\oo{Ker}(v')+\oo{Im}(\beta))=q(\oo{Ker}(v'))
$$ 
$$
=q(\oo{Im}(u'))=\oo{Im}(q\circ u')=\oo{Im}(u_2\circ p)=\oo{Im}(u_2).
$$ 
(Lemma~\ref{b1ii} is used to prove the second equality.)
\end{proof} 

\begin{thm}[Snake Lemma]\label{lsl}
Assume that $u'$ is injective and that $v$ is surjective. Then the correspondence (see Bourbaki's \textbf{Théorie des ensembles}, Section II.3) 
$$
\delta:=p\circ u'^{-1}\circ\beta\circ v^{-1}\circ k
$$ 
is an $R$-linear map. On other words, there is a unique $R$-linear map $\delta:\oo{Ker}(\gamma)\to\oo{Coker}(\alpha)$ having the following property: if $c\in\oo{Ker}(\gamma),b\in B$ and $a'\in A'$ satisfy $v(b)=k(c)$ and $u'(a')= \beta(b)$, then we have $\delta(c)=p(a')$. Moreover the sequence 
%$$\oo{Ker}(\alpha)\xr{u_1}\oo{Ker}(\beta)\xr{v_1}\oo{Ker}(\gamma)\xr \delta\oo{Coker}(\alpha)\xr{u_2}\oo{Coker}(\beta)\xr{v_2}\oo{Coker}(\gamma)$$ 
$$
\begin{tikzcd}
\Ker(\alpha)\ar["u_1"]{r}&\Ker(\beta)\ar["v_1"]{r}&\Ker(\gamma)\ar["\delta"']{ddll}\\ \\ 
\Coker(\alpha)\ar["u_2"']{r}&\Coker(\beta)\ar["v_2"']{r}&\Coker(\gamma).
\end{tikzcd}
$$ 
is exact.
\end{thm}

The name ``Snake Lemma'' comes from the fact that the above exact sequence can be displayed as 
$$%https://tex.stackexchange.com/a/82774/8816
\begin{tikzcd}
  \Ker(\alpha) \ar["u_1"]{r} & \Ker(\beta) \ar["v_1"]{r}
             \ar[draw=none]{d}[name=X, anchor=center]{}
    & \Ker(\gamma) \ar[rounded corners,
            to path={ -- ([xshift=2ex]\tikztostart.east)
                      |- (X.center) \tikztonodes
                      -| ([xshift=-2ex]\tikztotarget.west)
                      -- (\tikztotarget)}]{dll}[at end]{} \\      
  \Coker(\alpha) \ar["u_2"]{r} & \Coker(\beta) \ar["v_2"]{r} & \Coker(\gamma).
\end{tikzcd}
$$

\begin{proof} (a) The correspondence $\delta$ is a map: For $c\in\oo{Ker}(\gamma)$ there is a $b\in B$ such that $v(b)=k(c)$ because $v$ is surjective; moreover, we have $v'(\beta(b))=\gamma(k(c))=0$, and thus there is a unique $a'\in A'$ such that $u'(a')=\beta(b)$ because $u'$ is injective. Let us show that the element $p(a')\in\oo{Coker}(\alpha)$ does not depend on the choice of the element $b\in B$ such that $v(b)=k(c)$. Indeed, if $b^*\in B$ is another element such that $v(b^*)=k(c)$, we have $b^*=b+u(a)$ where $a\in A$; let us show that if $a'^*\in A'$ is such that $u'(a'^*)=\beta(b^*)$, then $a'^*=a'+\alpha(a)$; indeed we have 
$$
u'(a'+\alpha(a))=u'(a')+u'(\alpha(a))=\beta(b)+\beta(u(a))
$$ 
$$
=\beta(b+u(a))=\beta(b^*)=u'(a'^*),
$$ 
and the injectivity of $u'$ implies $a'+\alpha(a)=a'^*$. Finally, we conclude that $p(a'^*)=p(a')+p(\alpha(a))=p(a')$. We can thus set $\delta(c)=p(a')$ and we have defined a map $\delta:\oo{Ker}(\gamma)\to\oo{Coker}(\alpha)$.

(b) Linearity of $\delta$: If $c_1,c_2$ are in $\oo{Ker}(\gamma)$ and $c=c_1+c_2$, pick $b_1$ and $b_2$ in $B$ such that $v(b_1)=k(c_1)$ and $v(b_2)=k(c_2)$, and define $b\in B$ by $b:=b_1+b_2$; it is then obvious that $\delta(c)=\delta(c_1)+\delta(c_2)$. We prove similarly that $\delta(rc)=r\delta(c)$ for $r\in R$.

(c) Exactness at $\oo{Ker}(\beta)$ and $\oo{Coker}(\beta)$: Follows from Lemmas \ref{b2i} and \ref{b2ii} respectively.

(d) Equality $\delta\circ v_1=0$: Suppose that $c=v_1(\overline b)$ with $\overline b\in\oo{Ker}(\beta)$; we then take for $b\in B$ the element $j(\overline b)$. As $\beta(j(\overline b))=0$, we see that $\delta(c)=0$, hence $\delta\circ v_1=0$. 

(e) Exactness at $\oo{Ker}(\gamma)$: Suppose that $\delta(c)=0$. It suffices to show that we have $c=v_1(b^*)$ for some $b^*\in\oo{Ker}(\beta)$. Defining $b$ and $a'$ as in (a), we get $p(a')=\delta(c)=0$. Thus there is an $a$ in $A$ such that $a'=\alpha(a)$, %In the notation of (a) we have $a'=\alpha(a)$ with $a\in A$, 
and we get 
$$
\beta(b)=u'(a')= u'(\alpha(a))= \beta(u(a)),
$$ 
that is, $\beta(b-u(a))=0$. The element $b-u(a)$ is thus of the form $j(b^*)$ for some $b^*\in\oo{Ker}(\beta)$. It is enough to show $c=v_1(b^*)$. We have 
$$
k(c)=v(b)= v(u(a)+j(b^*))=v(j(b^*))=k(v_1(b^*)).
$$ 
The injectivity of $k$ yields $c=v_1(b^*)$, as desired.

(f) Equality $u_2\circ\delta=0$: We have (still with the notation of (a)) 
$$
u_2(\delta(c))=u_2(p(a'))=q(u'(a'))=q(\beta(b))=0.
$$ 
%hence $u_2\circ\delta=0$. 

(g) Exactness at $\oo{Coker}(\alpha)$: Suppose that an element $p(a')$ in $\oo{Coker}(\alpha)$ (with $a'\in A'$) satisfies $u_2(p(a'))=0$. It suffices to prove $p(a')=\delta(c)$ for some $c\in\oo{Ker}(\gamma)$. We have $q(u'(a'))=0$, and thus $u'(a')=\beta(b)$ for some $b\in B$; as $v'(u'(a')))=0$, we get $v'(\beta(b))=0$, thus $\gamma(v(b))=0$, that is $v(b)=k(c)$ for some $c\in\oo{Ker}(\gamma)$, and we obtain the sought-for equality $p(a')=\delta(c)$ by definition of $\delta$.%which shows that \eqref{eb2iii} is exact at $\oo{Coker}(\alpha)$.
\end{proof}
%\begin{lem}\label{bc1i}If $u',\alpha$ and $\gamma$ are injective, then $\beta$ is injective.\end{lem}\begin{proof}This follows from Lemma~\ref{b2i}: indeed we have $\oo{Ker}(\alpha)=0$ and $\oo{Ker}(\gamma)=0$, hence $\oo{Ker}(\beta)=0$.\end{proof}

\subsubsection{Part 2}

\begin{lem}\label{b254}
If $M$ is a flat $R$-module, if 
$$
0\to M_1\to M_2\to M\to0
$$ 
is an exact sequence of $R$-modules, and if $N$ is an $R$-module, then the sequence 
$$
0\to M_1\otimes_RN\to M_2\otimes_RN\to M\otimes_RN\to0
$$ 
is exact.
\end{lem}

\begin{proof}
Let 
$$
0\to P\to F\to N\to 0
$$ 
be an exact sequence of $R$-modules such that $F$ is free, and form the diagram
$$
\begin{tikzcd}
&M_1\otimes P\ar[d]\ar[r]&M_2\otimes P\ar[d,"f"]\ar[r]&M\otimes P\ar[d,"g"]\ar[r]&0\\ 
0\ar[r]&M_1\otimes F\ar[d]\ar[r]&M_2\otimes F\ar[d]\ar[r]&M\otimes F\\ 
&M_1\otimes N\ar[d]\ar[r]&M_2\otimes N\ar[d]\\ 
&0&0
\end{tikzcd}
$$ 
where the tensor products are taken over $R$, and where the maps are the natural ones. This diagram is clearly commutative and exact. By the Snake Lemma (Theorem~\ref{lsl}) there is an exact sequence  
$$
\oo{Ker}(f)\to\oo{Ker}(g)\to M_1\otimes N\to M_2\otimes N.
$$ 
As $M$ is flat, $g$ is injective. Thus $M_1\otimes N\to M_2\otimes N$ is also injective. 
\end{proof}

Clearly the following lemma implies Exercise~2.25 (stated as Exercise~\ref{e225} p.~\pageref{e225}).

\begin{lem}
Let $0\to M'\to M\to M''\to0$ be an exact sequence of $R$-modules with $M''$ flat. Then $M'$ if flat if and only if $M$ is flat.
\end{lem}

\begin{proof}
Let $N'\to N$ be a monomorphism of $R$-modules and form the commutative diagram 
$$
\begin{tikzcd}
&&&0\ar[d]\\ 
0\ar[r]&M'\otimes N'\ar[d,"\alpha"]\ar[r,"f"]&M\otimes N'\ar[d,"\beta"]\ar[r]&M''\otimes N'\ar[d,"\gamma"]\ar[r]&0\\ 
0\ar[r]&M'\otimes N\ar[r,"g"]&M\otimes N\ar[r]&M''\otimes N\ar[r]&0,
\end{tikzcd}
$$ 
the maps being the natural ones. The diagram is exact by flatness of $M''$ and Lemma~\ref{b254}.

Assume that $M$ is flat. Then $\beta$ is injective, and so is $\beta\circ f=g\circ\alpha$. This shows that $\alpha$ is injective, and thus that $M'$ is flat.

Assume that $M'$ is flat. Then $\alpha$ is injective, and Lemma~\ref{b2i} implies that $\beta$ is injective, and thus that $M$ is flat.
\end{proof}

\subsection{Page 34, Exercise 2.25, second solution}\label{sol2}% doc snake0: https://docs.google.com/document/d/1gTyvvgy4XYRi04V_LI47nxX0mYQvRyn57lMmjo59hlM/edit

In Section~\ref{s225a} p.~\pageref{s225a} above we gave a solution to Exercise 2.25 p.~34 of the book which doesn't use the Tor functor. The purpose of the present section is to give a solution which \emph{does} use the Tor functor, but does \emph{not} assume this functor to be known. We'll follow Bourbaki's \textbf{Algèbre homologique}. 

We return to the notation $A$ for a commutative ring with one. \emph{Module} stands for $A$-\emph{module}. 

We already stated Exercise 2.25 as Exercise~\ref{e225} p.~\pageref{e225} above, but for the reader's convenience we restate it:

\begin{exo}[Exercise 2.25]\label{e225b}
Let $0\to N'\to N\to N''\to0$ be an exact sequence, with $N''$ flat. Then $N'$ is flat if and only if $N$ is flat.
\end{exo}

%We refer the reader to Bourbaki's \textbf{Théorie des ensembles}, II.3 for the notion of \emph{correspondence} from a set to another set.

% There was a comment here: https://docs.google.com/document/d/1xGlYIpKhDsSRHiQCVdxI3JIqTVgRilYS7cghOi3g8ec/edit

\subsubsection{Complexes}%

A \emph{graded module} is a module $C$ equipped with a family $(C_n)_{n\in\mathbb Z}$ of submodules such that $C=\bigoplus_{n\in\mathbb Z}C_n$. 

A \emph{degree $k$ morphism} from a graded module $C$ to a graded module $D$ is an $A$-linear map $f:C\to D$ such that $f(C_n)\subset D_{n+k}$ for all $n$. 

A \emph{complex} is a graded module $C=\bigoplus_{n\in\mathbb Z}C_n$ equipped with a degree $-1$ endomorphism $d$, called the \emph{differential} of $C$, such that $d\circ d=0$. 

A \emph{morphism} from a complex $C$ to a complex $D$ is degree $0$ morphism $C\to D$ which commutes with the differentials. 

The identity of $C$ is a morphism of complexes, and the composition of two morphisms of complexes is a morphism of complexes. 

If $C$ is a complex the kernel of $d$ is denoted $Z(C)$ and the image of $d$ is denoted $B(C)$. 

We have $B(C)\subset Z(C)$, and we set $H(C):=Z(C)/B(C)$. 

The modules $Z(C),B(C)$ and $H(C)$ are graded in an obvious way, are regarded as complexes with vanishing differential, and are respectively called the subcomplex of \emph{cycles}, the subcomplex of \emph{boundaries}, and the \emph{homology} complex of $C$.

%A morphism of complexes $f:C\to D$ induces in an obvious way a degree $0$ morphism of graded modules $H(f):H(C)\to H(D)$. 

%If $H(f)$ is bijective, $f$ is called a \emph{homologism}.

\subsubsection{The homology long exact sequence}\label{hles}% 

Let $0\to C'\xr uC\xr vC''\to0$ be a short exact sequence of complexes. Applying Lemma~\ref{b2i} p.~\pageref{b2i} and Lemma~\ref{b2ii} p.~\pageref{b2ii} to %the Snake Lemma (Theorem~\ref{lsl} p.~\pageref{lsl}) to
$$
\begin{tikzcd}
C'_{n+1}\ar[d,"d'_{n+1}"]\ar[r,"u_{n+1}"]&C_{n+1}\ar[d,"d_{n+1}"]\ar[r,"v_{n+1}"]&C''_{n+1}\ar[d,"d''_{n+1}"]\\ 
C'_n\ar[r,"u_n"']&C_n\ar[r,"v_n"']&C''_n,
\end{tikzcd}
$$ 
we get exact sequences 
$$
Z_{n+1}(C')\to Z_{n+1}(C)\to Z_{n+1}(C''),
$$ 
$$
\frac{C'_n}{B_n(C')}\to\frac{C_n}{B_n(C)}\to\frac{C''_n}{B_n(C'')}\ .
$$ 
It is easy to see that we even have exact sequences 
$$
0\to Z_{n+1}(C')\to Z_{n+1}(C)\to Z_{n+1}(C''),
$$ 
$$
\frac{C'_n}{B_n(C')}\to\frac{C_n}{B_n(C)}\to\frac{C''_n}{B_n(C'')}\to0,
$$ 
so that we get an exact commutative diagram 
$$
\begin{tikzcd}
&0\ar{d}&0\ar{d}&0\ar{d}\\ 
&H_n(C')\ar["u_1"]{r}\ar["i"]{d}&H_n(C)\ar["v_1"]{r}\ar["j"]{d}&H_n(C'')\ar["k"]{d}\\ 
&\ds\frac{C'_n}{B_n(C')}\ar["u"]{r}\ar["f"]{d}&\ds\frac{C_n}{B_n(C)}\ar["v"]{r}\ar["g"]{d}&\ds\frac{C''_n}{B_n(C'')}\ar["h"]{d}\ar{r}&0\\ 
0\ar{r}&Z_{n-1}(C')\ar["u'"']{r}\ar["p"]{d}&Z_{n-1}(C)\ar["v'"']{r}\ar["q"]{d}&Z_{n-1}(C'')\ar["r"]{d}\\ 
&H_{n-1}(C')\ar["u_2"']{r}\ar{d}&H_{n-1}(C)\ar["v_2"']{r}\ar{d}&H_{n-1}(C'')\ar{d}\\ 
&0&0&0,
\end{tikzcd}
$$ 
and the Snake Lemma (Theorem~\ref{lsl} p.~\pageref{lsl}) furnishes a ``bi-infinite'' exact sequence 
$$
\cdots\to H_{n+1}(C'')\to H_n(C')\to H_n(C)\to H_n(C'')\to H_{n-1}(C')\to\cdots
$$ 
called the \emph{homology long exact sequence.}

%\subsection{Homotopy}Let $C$ and $D$ be two complexes and $f$ and $g$ be two morphisms from $C$ to $D$. A \emph{homotopy from $f$ to $g$} is a degree $1$ morphism $s:D\to C$ such that $g-f=d\circ s+s\circ d$. If such a homotopy $s$ exists we say that $f$ and $g$ are \emph{homotopic}. One easily checks that this is an equivalence relation, and that we have $H(f)=H(g)$ if $f$ and $g$ are homotopic.

\subsubsection{The canonical free resolution}

Let $M$ be an $A$-module. 

Set $F_0(M):=A^{(M)}$, that is, $F_0(M)$ is the free $A$-module with basis $M$. 

We have a natural epimorphism $F_0(M)\to M$. Let $Z$ be its kernel and set $F_1(M):=F_0(Z)$. 

We have again a natural epimorphism $F_1(M)\to Z$. Let $Y$ be its kernel and set $F_2(M):=F_0(Y)$. 

As before we get a natural epimorphism $F_2(M)\to Y$. 

This gives a complex $F_2(M)\to F_1(M)\to F_0(M)\to M\to0$ which is exact at $F_1(M)$, $F_0(M)$ and $M$. 

Iterating we get an infinite exact sequence  
$$
\cdots\to F_n(M)\to F_{n-1}(M)\to\cdots\to F_1(M)\to F_0(M)\to M\to0.
$$ 
We say that the complex $F(M)$, that is the complex 
$$
\cdots\to F_n(M)\to F_{n-1}(M)\to\cdots\to F_1(M)\to F_0(M),
$$ 
is \emph{the canonical free resolution of} $M$. 

We clearly have $H_0(F(M))\simeq M$ and $H_n(F(M))=0$ for $n\ge1$.

\subsubsection{The Tor functor}\label{Tor-f}

In the above notation, let $N$ be an $A$-module. Note that $F(M)\otimes_AN$ is in a natural way a complex of $A$-modules. We set 
$$
\Tor^A(M,N):=H(F(M)\otimes_AN).
$$ 
This graded $A$-module vanishes in negative degree. 

If $N$ is flat, then $\Tor^A_n(M,N)=0$ for all $n\ge1$.

It is easy to check the canonical isomorphism $\Tor^A_0(M,N)\simeq M\otimes_AN$.

Let $0\to N'\to N\to N''\to0$ be an exact sequence of $A$-modules. It is easy to see that $0\to F(M)\otimes_AN'\to F(M)\otimes_AN\to F(M)\otimes_AN''\to0$ is an exact sequence of complexes of $A$-modules. By Section~\ref{hles} and the above observations we get a long exact sequence 
$$
\begin{matrix}
\cdots&\to&\Tor^A_2(M,N)&\to&\Tor^A_2(M,N'')&\to\\ \\ 
\Tor^A_1(M,N')&\to&\Tor^A_1(M,N)&\to&\Tor^A_1(M,N'')&\to\\ \\ 
M\otimes_AN'&\to&M\otimes_AN&\to&M\otimes_AN''&\to\\ \\ 
0.
\end{matrix}
$$ 
In particular 

$M$ \emph{is flat if and only if $\ \Tor^A_1(M,N'')=0$ for all $N''$ --- in which case we have $\Tor^A_n(M,N'')=0$ for all $n\ge1$ and all $N''$.}

Now Exercise 2.25 (see Exercise~\ref{e225b} above) follows from the above statement and the above long exact sequence.

\subsection{Page 35, Exercise 2.26}\label{35}%

The goal is to show:

\begin{thm}\label{flatcrit}
In the above setting, $M$ is flat if and only if for all finitely generated ideal $\aaa$ the morphism $M\otimes\aaa\to M$ sending $x\otimes a$ to $xa$ is injective.
\end{thm}

Here is the sketch of a solution (following Bourbaki's \textbf{Algèbre commutative}).

Given $A$-modules $M$ and $N$ we say that $M$ is $N$\textbf{-flat} if for all submodule $N'$ of $N$ the natural morphism $M\otimes N'\to M\otimes N$ is injective. (Here and in the sequel ``$\otimes$'' means ``$\otimes_A$''.) 

(a) If $M\otimes N'\to M\otimes N$ is injective for \emph{all finitely generated} submodule $N'$ of $N$, then $M$ is $N$-flat.

\begin{proof} 
Let $N''$ be an arbitrary submodule of $N$; let $x_1,\dots,x_n$ be in $M$; let $y_1,\dots,y_n$ be in $N''$; define $t''\in M\otimes N''$ by $t''=\sum x_i\otimes y_i$; define $t\in M\otimes N$ by $t=\sum x_i\otimes y_i$; and assume $t=0$. It suffices to show $t''=0$. Let $N'$ be the submodule of $N''$ generated by the $y_i$. By assumption the tensor $t'\in M\otimes N'$ defined by $t'=\sum x_i\otimes y_i$ vanishes. As the natural map $M\otimes N'\to M\otimes N''$ sends $t'$ to $t''$, we have indeed $t''=0$. 
\end{proof}

(b) If $M$ is $N$-flat and if $P$ is a submodule or a quotient of $N$, then $M$ is $P$-flat. 

\begin{proof} 
The case of the submodules is left to the reader. Let 
$$
0\to R\xrightarrow iN\xrightarrow pQ\to0
$$ 
be exact, and let us show that $M$ is $Q$-flat. Let $Q'$ be a submodule of $Q$, and set $N':=p^{-1}(Q')$. We get a commutative diagram with exact rows
$$
\begin{tikzcd}
0\ar[r]&R\ar[d,"r"]\ar[r,"i'"]&N'\ar[d,"n"]\ar[r,"p'"]& Q'\ar[d,"q"]\ar[r]&0\\ 
0\ar[r]&R\ar[r,"i"']&N\ar[r,"p"']& Q\ar[r]&0
\end{tikzcd}
$$ 
where $r$ is the identity of $R$, and the maps $i',p',n$ and $q$ are the obvious ones. Letting $S\mapsto\overline S$ be the ``functor'' $M\otimes-$ we obtain the commutative diagram with exact rows
$$
\begin{tikzcd}
\overline R\ar[d,"\overline r"]\ar[r,"\overline{i'}"]&\overline{N'}\ar[d,"\overline n"]\ar[r,"\overline{p'}"]& \overline{Q'}\ar[d,"\overline q"]\ar[r]&0\\ 
\overline R\ar[r,"\overline i"']&\overline N\ar[r,"\overline p"']& \overline Q\ar[r]&0
\end{tikzcd}
$$ 
where $\overline r$ is the identity of $\overline R$. As $\overline n$ is injective, so is $\overline q$. 
\end{proof}

(c) If $N=\bigoplus_{i\in I}N_i$ is the direct sum of a family of submodules, and if $M$ is $N_i$-flat for each $i$, then $M$ is $N$-flat. 

\begin{proof} 
Let $(N_i)_{i\in I}$ be our family. 

$\bu$ First assume $I=\{1,2\}$. Consider the \emph{split} exact sequence 
$$
0\to N_1\xrightarrow i N_1\oplus N_2\xrightarrow pN_2\to0,
$$ 
let $N'$ be a submodule of $N$, set $N'_1:=N'\cap N_1$, let $N'_2$ be the image of $N'$ in $N_2$, and let 
$$
\begin{tikzcd}
0\ar[r]&N'_1\ar[d,"f_1"]\ar[r,"i'"]&N'\ar[d,"f"]\ar[r,"p'"]&N'_2\ar[d,"f_2"]\ar[r]&0\\ 
0\ar[r]&N_1\ar[r,"i"']&N\ar[r,"p"']&N_2\ar[r]&0
\end{tikzcd}
$$  
be the obvious commutative diagram with exact rows. Writing $S\mapsto\overline S$ for the ``functor'' $M\otimes-$, we obtain the commutative diagram with exact rows
$$
\begin{tikzcd}
\overline{N'_1}\ar[d,"\overline{f_1}"]\ar[r,"\overline{i'}"]&\overline{N'}\ar[d,"\overline f"]\ar[r,"\overline{p'}"]& \overline{N'_2}\ar[d,"\overline{f_2}"]\\ 
\overline{N_1}\ar[r,"\overline i"']&\overline N\ar[r,"\overline p"']& \overline{N_2}.
\end{tikzcd}
$$ 
It is easy to see that $\overline{f_1},\overline{f_2}$ and $\overline i$ are injective, and that this implies that $\overline f$ is also injective. This completes the proof of (c) in the case $I=\{1,2\}$.

$\bu$ Second assume that $I$ is \emph{finite}. We prove the statement by induction.

$\bu$ Third assume that $I$ is \emph{arbitrary}, and let $N'$ be a finitely generated submodule of $N=\bigoplus_{i\in I}N_i$. Then there is a finite subset $J$ of $I$ such that $N'\subset\bigoplus_{j\in J}N_j$, and we have 
$$
N=\left(\bigoplus_{j\in J}N_j\right)\oplus\left(\bigoplus_{i\in I\setminus J}N_i\right). 
$$ 
We leave the rest of the proof to the reader.

From this point, the proof of Theorem~\ref{flatcrit} p.~\pageref{flatcrit} is straightforward. The details are again left to the reader.

\end{proof}

\subsection{Page 35, flat modules}%

Taken from Chapter 1, Section 2, Subsection 11 in Nicolas Bourbaki, \textbf{Algèbre commutative: Chapitres 1 à 4}, Masson, Paris 1985:

\emph{Let $A$ be a (non necessarily commutative) associative ring with $1$, let $M$ be a right $A$-module, and let $N$ be a left $A$-module. Then $M$ is $N$-flat (see \S\ref{35}) if and only if the following condition holds:}

\emph{For all finite families $(x_i)\subset M,(y_i)\subset N$ such that $\sum x_i\otimes y_i=0$ there are finite families $(a_{ij})\subset A$ and $(x'_j)\subset M$ such that $\sum_jx'_ja_{ij}=x_i$ for all $i$ and $\sum_ia_{ij}y_i=0$ for all $j$.}

\emph{Proof.} This follows easily from \S\ref{vt}. $\square$

We also have:

\emph{Let $A$ be a (non necessarily commutative) associative ring with $1$ and $M$ a right $A$-module. Then $M$ is flat if and only if the following condition holds:}

\emph{For all finite families $(x_i)\subset M,(a_i)\subset A$ such that $\sum x_ia_i=0$ there are finite families $(a'_{ij})\subset A$ and $(x'_j)\subset M$ such that $\sum_jx'_ja'_{ij}=x_i$ for all $i$ and $\sum_ia'_{ij}a_i=0$ for all $j$.}

\emph{Proof.} We set $N:=A$ in the previous statement and use \S\ref{35}. $\square$

There is also a statement and a proof of this result in the Stacks Project; see the tag \href{http://stacks.math.columbia.edu/tag/00HK}{http://stacks.math.columbia.edu/tag/00HK}

\subsection{Page 35, Exercise 2.27}\label{227}%

\textbf{Statement.} A ring $A$ is \emph{absolutely flat} if every $A$-module is flat. Prove that the following are equivalent:

(i) $A$ is absolutely flat.

(ii) Every principal ideal is idempotent.

(iii) Every finitely generated ideal is a direct summand of $A$. 

\textbf{Hints.}

$\bu$ To show that (i) implies (ii), let $x$ be in $A$ and consider the obvious diagram 
$$
(x)\otimes A\xr\beta(x)\otimes A/(x)\xr\alpha A/(x). 
$$ 
(In this Section tensor products are taken over $A$.) It is clear that $\beta$ is surjective and that $\alpha\circ\beta$ is zero. The flatness of $A/(x)$ implies the injectivity of $\alpha$, and we get $0=(x)\otimes A/(x)\simeq(x)/(x^2)$, hence $(x)^2=(x)$. $\square$

% comment removed https://docs.google.com/document/d/1qNW_ZVfE2nwm_A5NCGzWo_yu8CYKC0g1NUcCXkT2Igs/edit

$\bu$ Let us show that (iii) implies (i). Let $M$ be an $A$-module and $\aaa$ a finitely generated ideal. By Theorem~\ref{flatcrit} p.~\pageref{flatcrit} above it suffices to check that the natural morphism $\aaa\otimes M\to M$ is injective. This morphism is the composite of the obvious morphisms 
$$
\aaa\otimes M\to(\aaa\oplus\bbb)\otimes M=A\otimes M\to M,
$$ 
where $\bbb$ is an ideal such that $A=\aaa\oplus\bbb$ (such an ideal exists by assumption). These morphisms are clearly injective. $\square$ 

\begin{note}
The argument given in the book shows that (i), (ii) and (iii) are also equivalent to

(iv) Every finitely generated ideal is generated by an idempotent,

and also to 

(v) For all $a$ in $A$ there is an $x$ in $A$ such that $a=a^2x$. 
\end{note}

\subsection{Page 35, Exercise 2.28}\label{228}%

An absolutely flat local ring is a field: This follows immediately from Property~(iv) above (Section~\ref{227}) and Exercise 1.12 p.~11 of the book (see Section~\ref{112} p.~\pageref{112} above). 

\section{About Chapter 3}%%

\subsection{Page 37}%

Recall that $f:A\to S^{-1}A$ is the canonical morphism.

It is written:

"Conversely, these three conditions determine the ring $S^{-1}A$ up to isomorphism. Precisely:

\textbf{Corollary 3.2.} \emph{If $g:A\to B$ is a ring homomorphism such that}

(i) $s\in S\implies g(s)$ \emph{is a unit in} $B$;

(ii) $g(a)=0\implies as=0$ \emph{for some} $s\in S$;

iii) \emph{Every element of $B$ is of the form} $g(a)g(s)^{-1}$.

\emph{Then there is a unique isomorphism $h:S^{-1}A\to B$ such that} $g=h\circ f$."

The following wording would be slightly better:

Conversely, these three conditions determine the ring $S^{-1}A$ up to unique isomorphism. Precisely:

\textbf{Corollary 3.2.} \emph{If $g:A\to B$ is a ring homomorphism such that}

(i) $s\in S\implies g(s)$ \emph{is a unit in} $B$;

(ii) $g(a)=0\implies as=0$ \emph{for some} $s\in S$;

iii) \emph{Every element of $B$ is of the form} $g(a)g(s)^{-1}$.

\emph{Then there is a unique morphism $h:S^{-1}A\to B$ such that $g=h\circ f$. Moreover this morphism is an isomorphism.}

\subsection{Page 39, Proposition 3.4}%

It is easy to see that we have 
$$
S^{-1}\sum M_i=\sum S^{-1}M_i.
$$ 
It is also easy to see that we have 
$$
S^{-1}\bigcap M_i\ \subset\ \bigcap S^{-1}M_i.
$$ 
But the converse inclusion 
$$
\bigcap S^{-1}M_i\ \subset\ S^{-1}\bigcap M_i
$$ 
is not true in general. Here is a counterexample. Let $K$ be a field and $x$ an indeterminate. Setting $A:=K[x]$, $S:=K[x]\setminus\{0\}$ we get 
$$
\bigcap_n S^{-1}(x^n)=K(x),\quad S^{-1}\bigcap_n(x^n)=(0).
$$

\subsection{Pp 39-40, Propositions 3.5 and 3.7}%

The natural $A$-linear map $f:M\to S^{-1}M$ has the following universal property:

For all $A$-linear map $g:M\to N$ from $M$ to an $S^{-1}A$-module $N$ such that $sm=0$ for some $s$ in $S$ and some $m$ in $m$ implies $g(m)=0$ there is a unique $S^{-1}A$-linear map $h:S^{-1}M\to N$ such that $g=h\circ f$.

Using this universal property one can describe explicitly the respective inverses of the isomorphisms in Propositions 3.5 and 3.7.

\subsection{P. 39, Proposition 3.5}%

In the setting of Proposition 3.5 p.~39 we have:

\emph{If $1\otimes x=0$ in $S^{-1}A\otimes_AM$ then we have $sx=0$ for some} $s\in S$.

\emph{Proof.} We have $1\otimes x=0$ in $N\otimes_AM$ where $N$ is some finitely generated sub-$A$-module of $S^{-1}A$. For any $s\in S$ set $A/s:=\{a/s\ |\ a\in A\}$; this is also a sub-$A$-module of $S^{-1}A$. Then $N\subset A/s$ for some $s$, and we have $1\otimes x=0$ in $A/s\otimes_AM$. Defining $f:A\to A/s$ by $f(a):=a/s$ and letting $B$ be the kernel of $f$, and $g:M\to A/s\otimes_AN$ the map induced by $f$, we get exact sequences 
$$
B\otimes_AM\to M\xr gA/s\otimes_AM\to0
$$ 
and 
$$
0\to BM\to M\xr gA/s\otimes_AM\to0.
$$ 
We have $g(sx)=0$ and thus $sx=\sum_{i=1}^nb_ix_i$ with $b_i\in B$ and $x_i\in M$. As $b_i/s=0$ in $S^{-1}A$ there is a $t\in S$ such that $tb_i=0$ for all $i$. This gives $tsx=0.\ \square$

\subsection{P. 40, Proposition 3.8}\label{38}%

For $a\in A$ and $\ppp\in\Spec(A)$ write $a_\ppp$ for the element $a/1\in A_\ppp$. Then we have for $a\in A$:
$$
a=0\iff a_\ppp=0\ \forall\ \ppp\in\Spec(A)\iff a_\mmm=0\ \forall\ \mmm\text{ maximal.}
$$ 
This follows from Proposition 3.8 and the easy equality $(a)_\ppp=(a_\ppp)$. 

\subsection{P. 40, Proposition 3.9}\label{re}%

Here is a mild generalization:

\emph{The complex of $A$-modules $M\xr fN\xr g P$ is exact if and only if the complex} 
$$
M_\mmm\xr{f_\mmm}N_\mmm\xr{g_\mmm}P_\mmm
$$ 
\emph{is exact for all maximal ideal $\mmm$ of} $A$.
\begin{proof}
Use the isomorphism 
$$
\oo{Ker}(g_\mmm)/\oo{Im}(f_\mmm)\simeq(\oo{Ker}(g)/\oo{Im}(f))_\mmm
$$ 
and Proposition 3.8 of the book.
\end{proof}

\subsection{Pp 41-42, proof of Proposition 3.11}%

\subsubsection{Part (ii)}

$\bu $ Here is a more detailed proof of the statement 

\emph{If $\aaa$ is an ideal in $A$, then $\aaa^{\oo{ec}}=\bigcup_{s\in S}\ (\aaa:s)$}.

We have 

$x\in\aaa^{\oo{ec}}=(S^{-1}\aaa)^{\oo c}$

$\ds\iff\frac{x}{1}=\frac{a}{s'}$ for some $a\in\aaa,s'\in S$ 

$\iff(xs'-a)t'=0$ for some $a\in\aaa$ and some $s',t'\in S$ 

$\iff xst\in\aaa$ for some $s,t\in S$

$\iff xs\in\aaa$ for some $s\in S$

$\iff x\in\bigcup_{s\in S}\ (\aaa:s)$.

To prove 

$xst\in\aaa$ for some $s,t\in S$ $\implies$ $(xs'-a)t'=0$ for some $a\in\aaa$ and some $s',t'\in S$

we set $a:=xst$, $s':=st$, $t':=1$.%\bigskip%\hrule\bigskip\textbf{Comment.} 

$\bu$ A particular case of the statement 

\emph{$\aaa^{\oo e}=(1)$ if and only if $\aaa$ meets $S$}

is 

\emph{$(0)^{\oo e}=(1)$ if and only if $\ 0\in S$,}

that is 
\begin{equation}\label{s-1a}
S^{-1}A=0\iff\ 0\in S
\end{equation}
(It is easy to prove this particular case directly.)

\subsubsection{Part (iv)}\label{prcor}%

Set $X:=\Sp(A),Y:=\Sp(S^{-1}A)$ and let $c:Y\to X$ be the contraction map. In view of Proposition 1.17iii p.~10 of the book, it suffices to show:
$$
c(Y)=\{\ppp\in X\ |\ \ppp\cap S=\varnothing\}
$$ 
and 
$$
\ppp\in c(Y)\implies S^{-1}\ppp\in X.
$$ 
The conclusion is that 

\emph{the contraction and extension maps are inverse inclusion preserving bijections between $Y$ and $c(Y)$.} 

% comment removed https://docs.google.com/document/d/1bFidiNFmzhw5CQkg8ZiIsbVKhNkEZ8LJnyYfJD2KPLg/edit

\subsection{Page 43, Proposition 3.14}%

The inclusion 
$$
S^{-1}\oo{Ann}M\subset\oo{Ann}S^{-1}M
$$ 
holds even is $M$ is not finitely generated. Here is a counterexample to the reverse inclusion:

Let $K$ be a field and $x$ an indeterminate. Set 
$$
A:=K[x],\quad S:=K[x]\setminus\{0\},\quad M:=\bigoplus A/(x^n).
$$ 
We get $\oo{Ann}M=(0)$, $S^{-1}M=0$, $\oo{Ann}S^{-1}M=(1)$. 

\subsection{Page 43, Proposition 3.16}%

Compare with Exercise 3.21iv p. 47 of the book Section~\ref{321iv} p.~\pageref{321iv} below.

\subsection{Proof of Proposition 3.16}

The commutative diagram
$$
\begin{tikzcd}
\kern-22pt\ppp<A\ar[d,"\alpha"']\ar[r,"f"]&B>\ppp B\ar[d,"\beta"]\kern-30pt\\ 
\kern-22pt\ppp_\ppp<A_\ppp\ar[r,"f_\ppp"']&B_\ppp>\mmm\supset\ppp B_\ppp\kern-66pt.
\end{tikzcd}
$$ 
might help. Note that we have $f_\ppp^{-1}(\mmm)=\ppp_\ppp$.

%https://docs.google.com/document/d/1YYUDEGhoImy-b_Lx9foGoetelzzXbN1IiNbpo7pXh98/edit {comment} 180522

\subsection{Strengthening of Proposition 3.16}\label{43}

Proposition 3.16 can also be stated as follows:

\emph{Let $A\to B$ be a morphism of commutative rings, let $\aaa$ be a contracted ideal in $A$, and let $\Sigma$ be the set of those ideals in $B$ which contract to $\aaa$. (In particular $\Sigma$ is nonempty.) Order $\Sigma$ by inclusion. Then we have}

(a) \emph{$\aaa^{\oo e}$ is the least element of $\Sigma$, or, equivalently, $\aaa^{\oo e}$ is the intersection of all the elements of $\Sigma$,}

(b) \emph{$\Sigma$ has one, or more, maximal elements,}

(c) \emph{if $\ \aaa$ is prime, then any maximal element of $\Sigma$ is also prime.}

The proofs of these statements are straightforward and elementary. We'll prove (c), the proofs of (a) and (b) being similar and left to the reader.

To prove (c), let $\qqq$ be a maximal element of $\Sigma$. Assume by contradiction that $\qqq$ is not prime. Then there are ideals $\mf{b,b}'$ in $B$ such that $\qqq\not\supset\bbb$, $\qqq\not\supset\bbb'$, $\qqq\supset\mf{bb}'$. Replacing $\bbb$ and $\bbb'$ with $\bbb+\qqq$ and $\bbb'+\qqq$, we can assume that $\qqq$ is a proper sub-ideal of $\bbb$ and $\bbb'$. By maximality of $\qqq$, the prime ideal $\aaa$ is a proper sub-ideal of $\bbb^{\oo c}$ and $\bbb'^{\oo c}$. By Exercise 1.18 p.~10 we also have 
$$
\bbb^{\oo c}\bbb'^{\oo c}\subset(\mf{bb}')^{\oo c}\subset\qqq^{\oo c}=\aaa,
$$ 
in contradiction with the primality of $\aaa$.

\subsection{Related result}\label{res}% previous version https://docs.google.com/document/d/1FLOY6fmb0i51WurlovxJkWdDL-SOx5gDK0UZWK0kUjA/edit

Here is a related result:
\begin{equation}\label{fiber1}
\ppp\text{ is the contraction of a prime ideal if and only if }A_\ppp/\ppp_\ppp\otimes_AB\ne0.
\end{equation}
This will follow from Claim~1 and Claim~2 below.

\textbf{Claim~1.} Let $C_1,\ldots,C_6$ be the six $B$-algebras 
$$
A_\ppp\otimes_AB/\ppp B,\quad (B/\ppp B)_\ppp,\quad B_\ppp/\ppp_\ppp B,
$$ 
$$  
\frac{A_\ppp\otimes_AB}{\ppp_\ppp\otimes_AB}\ ,\quad\frac{A_\ppp}{\ppp_\ppp}\otimes_AB,\quad (A/\ppp)_\ppp\otimes_AB.
$$ 
Then for any $1\le i,j\le6$ there is a unique $B$-algebra morphism $C_i\to C_j$, and this morphism is bijective.

\textbf{Proof of Claim~1.} Left to the reader. 

Note that $C_i$ is an initial object in the category of those $B$-algebras $C$ such that the image of $a\in A$ in $C$ is zero if $a\in\ppp$ and is a unit if $a\notin\ppp$. 

\textbf{Claim~2.} We have $\big(B/\ppp^{\oo e}\big)_\ppp=0\iff\ppp^{\oo{ec}}\ne\ppp$. 

\textbf{Proof of Claim~2.} 
$$
\big(B/\ppp^{\oo e}\big)_\ppp=0\iff\frac11=\frac01\text{ in }\big(B/\ppp^{\oo e}\big)_\ppp\iff\exists\ s\in A\setminus\ppp\ |\ f(s)\in\ppp^{\oo e}
$$ 
$$
\iff\exists\ s\in\ppp^{\oo{ec}}\setminus\ppp\iff\ppp^{\oo{ec}}\ne\ppp.
$$ 
Statement \eqref{fiber1} follows also from Exercise 3.21iv p.~47 of the book (see Section~\ref{321iv} p.~\pageref{321iv} below). 

% comment removed https://docs.google.com/document/d/1fIl3kyz4VZj3UEkEyfreFtOzEm6ZO_1WCRS14hkmw1w/edit

\subsection{Page 44, Exercise 3.5}%

\textbf{Statement.} Let $A$ be a ring. Suppose that, for each prime ideal $\ppp$, the local ring $A_\ppp$ has no nilpotent element $\ne0$. Show that $A$ has no nilpotent element $\ne0$. If each $A_\ppp$ is an integral domain, is $A$ necessarily an integral domain?

\textbf{Hint.} First part: use Corollary 3.12 p.~42 of the book; see also Section~\ref{38} p.~\pageref{38}. Second part: take the zero ring (or a product of two fields).

\subsection{Page 44, Exercise 3.6}\label{36}%

\textbf{Statement.} Let $A$ be a ring $\ne0$ and let $\Sigma$ be the set of all multiplicatively closed subsets $S$ of $A$ such that $0\notin S$. Show that $\Sigma$ has maximal elements, and that $S\in\Sigma$ is maximal if and only if $A\setminus S$ is a minimal prime ideal of $A$.

\textbf{Hint.} The union of a chain in $\Sigma$ belongs to $\Sigma$. If $S\in\Sigma$ is maximal, then $S^{-1}A\ne0$. In particular $A$ has a prime ideal $\ppp$ disjoint from $S$, and $A\setminus\ppp$ is an element of $\Sigma$ containing $S$, hence equal to $S$ by maximality of $S$.

% previous version of E 3.7 and E 3.8 https://docs.google.com/document/d/17YFAWtEXwYAJzdMWuQHhimOkH3r1XfLmwqo1q8LgB80/edit

\subsection{Page 44, Exercise 3.7}%

\subsubsection{Preliminaries}\label{satprel}

The theme of Exercise 3.7 and 3.8 is the notion of saturation. Here are a few comments one can make at the outset.

\begin{note}%
Let $S$ and $T$ be two multiplicative subsets of $A$. Then there is at most one $A$-algebra morphism from $S^{-1}A\to T^{-1}A$. Moreover such a morphism exists if and only if for each $s\in S$ the image of $s$ in $T^{-1}A$ is a unit.
\end{note}

\begin{note}%
Let $S$ be a multiplicative subset of $A$. Then the following five subsets of $A$ are equal:

$\bullet$ the intersection of all saturated multiplicative subsets of $A$ containing $S$,

$\bullet$ the set of all those elements of $A$ whose image in $S^{-1}A$ is a unit,

$\bullet$ the complement in $A$ of the union of the prime ideals of $A$ which are disjoint from $S$,

$\bullet$ the set of all those elements $a\in A$ such that $ab\in S$ for some $b\in A$.

Moreover this set is the least saturated multiplicative subset of $A$ containing $S$.
\end{note}

This set is called the \textbf{saturation} of $S$ and is denoted $\overline S$.

\begin{note}%
The unique $A$-algebra morphism $S^{-1}A\to\overline S^{-1}A$ is bijective. Moreover, if $T$ is another multiplicative subset, then there is a (necessarily unique) $A$-algebra morphism $S^{-1}A\to T^{-1}A$ if and only if $\overline S\subset T$.
\end{note}

\subsubsection{Exercise 3.7}\label{37}%

\textbf{Statement.} A multiplicatively closed subset $S$ of a ring $A$ is said to be \emph{saturated} if $xy\in S\iff x\in S$ and $y\in S$. 

Prove that

(i) $S$ is saturated $\iff A\setminus S$ is a union of prime ideals.

(ii) If $S$ is any multiplicatively closed subset of $A$, there is a unique smallest saturated multiplicatively closed subset $\overline S$ containing $S$, and that $\overline S$ is the complement in $A$ of the union of the prime ideals which do not meet $S$. ($S$ is called the \emph{saturation} of $S$.)

(iii) If $S=1+\aaa$,where $\aaa$ is an ideal of $A$, find $\overline S$.

\textbf{Solution.} Set $S^*:=A\setminus S$, and let $U$ be the union of the prime ideals which do not meet $S$.

(i) Implication $\Longleftarrow$ is easy. Let us prove $\implies$. Assume by contradiction that there is an $a\in S^*$ which is not in $U$. Then $a/1$ belongs to no prime ideal of $S^{-1}A$, and is therefore a unit of $S^{-1}A$. Hence there are $b\in A$ and $s\in S$ such that 
$$
\frac{ab}s=\frac a1\frac bs=\frac11\ .
$$ 
This implies $abt\in S$ for some $t\in S$, contradicting the saturation of $S$.

(ii) Left to the reader.

(iii) $\overline S$ is the complement of the union of the maximal ideals containing $\aaa$. 

\emph{Proof.} Let $M$ be the union of the maximal ideals containing $\aaa$ and $P$ the union of the prime ideals disjoint from $1+\aaa$:
$$
M:=\bigcup_{\mmm\supset\aaa}\mmm,\quad P:=\bigcup_{\ppp\cap(1+\aaa)=\varnothing}\ppp.
$$ 
It suffices to show $M=P$. 

To prove $M\subset P$, assume $\mmm\supset\aaa$, $\mmm$ maximal. It is enough to check $\mmm\cap(1+\aaa)=\varnothing$. If there was an $x$ in $\mmm\cap(1+\aaa)$, there would be an $a$ in $\aaa$ with $x=1+a$, which would imply $1\in\mmm$, contradiction. 

Let us verify $P\subset M$. Assume $\ppp\cap(1+\aaa)=\varnothing$, with $\ppp$ prime. It suffices to show $\ppp\subset M$. We claim $\ppp+\aaa\ne(1)$. If not we would have $p+a=1$ with $p\in\ppp$ and $a\in\aaa$, and thus 
$$
p=1-a\in\ppp\cap(1+\aaa)=\varnothing.
$$ 
As $\ppp+\aaa\ne(1)$, there is a maximal ideal containing $\ppp$ and $\aaa$. This implies $\ppp\subset M$, as announced.

\subsection{Page 44, Exercise 3.8}%

See Section~\ref{satprel} p.~\pageref{satprel} above.

\subsection{Page 44, Exercise 3.9}%

See Section \ref{114} p.~\pageref{114}. --- Actually there are two proofs of the fact that the set of zero-divisors  is a union of prime ideals: one is Exercise 1.14 p.~12, the other is Exercise 3.7 p.~44 (see Section~\ref{37} p~\pageref{37}). 

$\bu$ To show that a minimal prime ideal $\ppp$ consists of zero-divisors, set $S:=A\setminus\ppp$. Then $S$ is a maximal element of the set denoted $\Sigma$ in Exercise~3.6 (see Section~\ref{36} p.~\pageref{36}). It suffices to prove $S_0\subset S$. Let $s_0$ be in $S_0$. If $s_0$ was not in $S$, then $s_0$ and $S$ would generate a multiplicative set not containing $0$ which is larger than $S$, contradiction. 

$\bu$ (ii) Assume that $a/s\in S_0^{-1}A$ is neither a unit nor a zero-divisor. We have $a\notin S_0$. Then there is a nonzero $b$ in $A$ with $ab=0$, and we get $\frac as\frac b1=0$, hence $\frac b1=0$, that is $bs_0=0$ for some $s_0\in S_0$. This implies $b=0$, a contradiction.

\subsection{Page 44, Exercise 3.10}\label{310}%

\textbf{Statement.} Let $A$ be a ring.

(i) If $A$ is absolutely flat (Chapter 2, Exercise 27) and $S$ is any multiplicatively 
closed subset of $A$, then $S^{-1}A$ is absolutely flat. 

(ii) $A$ is absolutely flat $\iff$ $A_\mmm$ is a field for each maximal ideal $\mmm$.

\textbf{Solution.}

(i) We have, with obvious notation, 
$$
a=a^2x\implies\frac{a^2}{s^2}\frac{sx}1=\frac{a^2xs}{s^2}=\frac{a^2x}s=\frac as\ .
$$ 
(ii) Note that the statement to prove is equivalent to any of the following two statements:

$\bu\ A$ is absolutely flat if and only if for all maximal ideal $\mmm$ of $A$ we have $\mmm_\mmm=(0)$.

$\bu\ A$ is absolutely flat if and only if for all $\mu\in\mmm\subset A$ with $\mmm$ maximal, there is an $s\in A\setminus\mmm$ such that $s\mu=0$. 

Let us show that $A$ is absolutely flat $\iff$ $A_\mmm$ is a field for each maximal ideal $\mmm$. 

If $A$ is absolutely flat, then so is $A_\mmm$ by Part (i) of the same Exercise, and $A_\mmm$ is a field by Exercise 2.28 p.~35 of the book (see Section~\ref{228} p.~\pageref{228} above). 

Conversely, assume that $A_\mmm$ is a field for each maximal ideal $\mmm$ of $A$, and let $a$ be in $A$. We have $(a^2)_\mmm=(a)_\mmm$ for all maximal $\mmm$, and thus $(a^2)=(a)$. This shows that $A$ is absolutely flat by Exercise 2.27 p.~35 of the book (see Section~\ref{227} p.~\pageref{227}) ((ii) implies (i)).

\subsection{Page 44, Exercise 3.11}\label{311}%

\textbf{Statement.} Let $A$ be a ring. Prove that the following are equivalent:

(i) $A/\mf N$ is absolutely flat ($\,\mf N$ being the nilradical of $A$).

(ii) Every prime ideal of $A$ is maximal.

(iii)  $\Spec(A)$ is a T1-space (i.e., every subset consisting of a single point is closed).

(iv) $\Spec(A)$ is Hausdorff.

If these conditions are satisfied, show that $\Spec(A)$ is compact and totally disconnected (i.e. the only connected subsets of $\Spec(A)$ are those consisting of a single point).

\textbf{Solution.} The equivalence (ii)$\iff$(iii) is clear, as well as the implication (iv)$\implies$(ii).

(ii)$\implies$(iv): We assume that each prime ideal of $A$ is maximal and we show that $X=\Spec(A)$ is Hausdorff. Let $x$ and $y$ be two distinct points of $X$. We claim:

$(\star)$ There are elements $a\in\ppp_y\setminus\ppp_x$, $b\in\ppp_x\setminus\ppp_y$ such that $ab=0$.

Statement $(\star)$ implying that $X_a$ and $X_b$ are disjoint open neighborhoods of $x$ and $y$ respectively, it suffices to prove $(\star)$.

Assume $(\star)$ is false. Then $S:=(A\setminus\ppp_x)(A\setminus\ppp_y)$ is a multiplicatively closed subset avoiding $0$, hence $S^{-1}A$ is not the zero ring, hence there is a maximal ideal $\mmm$ in $S^{-1}A$. The contraction $\mmm^{\oo c}$ of $\mmm$ in $A$ is a prime, and thus maximal, ideal contained in $A\setminus S\subset\ppp_x$ (because $A\setminus\ppp_x\subset S$). This implies $\mmm^{\oo c}=\ppp_x$. Similarly we have $\mmm^{\oo c}=\ppp_y$. As $\ppp_x\ne\ppp_y$, this is a contradiction. %$\mmm^{\oo c}\subset\ppp_y$, and thus $\mmm^{\oo c}\subset\ppp_x\cap\ppp_y$. This is a contradiction because $\mmm^{\oo c}$, $\ppp_x$ and $\ppp_y$ are maximal, and $\ppp_x\ne\ppp_y$. 
$\square$

At this point we know that (ii), (iii) and (iv) are equivalent.

Introduce the following notation: For any ideal $\aaa$ of any ring $R$ write $\overline\aaa$ for the image of $\aaa$ in $\overline R:=R/\mf N(R)$, and define $\overline r\in\overline R$ for $r\in R$ similarly.

(i)$\implies$(ii): Let $A/\mathfrak N$ be absolutely flat and assume by contradiction that there is a prime ideal $\ppp$ strictly contained in a maximal ideal $\mmm$. Let us denote this situation by $\ppp<\mmm$. Then we get firstly $\overline\ppp<\overline\mmm$ with $\overline\ppp$ prime and $\overline\mmm$ maximal, and secondly $\overline\ppp_{\overline\mmm}<\overline\mmm_{\overline\mmm}$ with $\overline\ppp_{\overline\mmm}$ prime and $\overline\mmm_{\overline\mmm}$ maximal. But Exercise 3.10ii p.~44 of the book (see Section~\ref{310} above) implies $\overline\mmm_{\overline\mmm}=(\overline0)$. $\square$

% comment removed https://docs.google.com/document/d/14jVzaDzT3fBsM44o-TqK-vj3Y-ffV171uFQfRRwIR9g/edit

(ii)$\implies$(i): We assume that the prime ideals of $A$ are maximal and we show that $A/\mathfrak N$ is absolutely flat. Let $\mmm$ be a maximal ideal of $A$. By Section~\ref{310} above it suffices to show $\overline\mmm_{\overline\mmm}=(0)$. But we have 
$$
\overline\mmm_{\overline\mmm}=\mf N\left(\overline A_{\overline\mmm}\right)=\mf N\left(\overline A\right)_{\overline\mmm}=(0),
$$ 
the second equality following from Corollary 3.12 p.~42 of the book. $\square$

% comment removed https://docs.google.com/document/d/1mij8FgdhlRfU_TojPAxb68_PkIviz2Fb7nNJBkzCiWM/edit

Proof that $X$ is totally disconnected: Let $x$ and $y$ be two different points of $X$. We saw that there is an $a\in A$ such that $x\in X_a$ and $y\notin X_a$ (see Statement $(\star)$ above). It suffices to show that $X_a$ is closed, but this follows from the fact that $X$ is Hausdorff and $X_a$ is compact.  
$\square$

Here is a related result:

\emph{The following conditions on a ring $A$ are equivalent:}

(a) \emph{the Krull dimension of $A$ is at most zero,}

(b) \emph{$A/\mf N$ is absolutely flat, where $\mf N$ is the nilradical of $A$,}

(c) \emph{for each $a$ in $A$ the descending chain $(a)\supset(a^2)\supset\cdots$ stabilizes.}

\emph{Proof.} In view of Exercise 3.11 p. 44 of the book (see Section~\ref{311} p.~\pageref{311}), it suffices to prove (b)$\implies$(c)$\implies$(a). 

(b)$\implies$(c): With obvious notation we have $\overline a=\overline a^2\overline b$ for some $b$ in $A$, that is $(a-a^2b)^n=0$ for some $n\ge1$. This is easily seen to imply $a^n\in(a^{n+1})$ and thus $(a^{n+1})=(a^n)$. 

(c)$\implies$(a): Let $\ppp$ be a prime ideal of $A$ and let $a$ be in $A\setminus\ppp$. We have $a^n(1-ab)=0$ for some $b$ in $A$ and some $n$ in $\mathbb N$. In particular $a^n(1-ab)\in\ppp$, and thus $1-ab\in\ppp$. This implies that $A/\ppp$ is a field, and therefore that $\ppp$ is maximal. $\square$

\subsection{Page 45, Exercise 3.12iv}%

[In the hint, ``Chapter 1'' should be ``Chapter 2''.]

By Exercise 2.20 p.~33 of the book we have 
$$
K\otimes_AM\simeq\left(\colim_{a\in A\setminus\{0\}}Aa^{-1}\right)\otimes_AM\simeq\colim_{a\in A\setminus\{0\}}\left(Aa^{-1}\otimes_AM\right).
$$ 
If $1\otimes x$ vanishes in $K\otimes_AM$, then Exercise 2.15 p.~33 of the book implies that $1\otimes x$ already vanishes in $Aa^{-1}\otimes_AM$ for some $a\in A\setminus\{0\}$, and we get 
$$
0=1\otimes x=a^{-1}a\otimes x=a^{-1}\otimes ax,
$$ 
in $Aa^{-1}\otimes_AM$. This implies $ax=0$ because the map $M\to Aa^{-1}\otimes_AM$, $y\mapsto a^{-1}\otimes y$ is an isomorphism. 

\subsection{Page 45, Exercise 3.14}\label{314}%

\textbf{Statement.} Let $M$ be an $A$-module and $\aaa$ an ideal of $A$. Suppose that $M_\mmm=0$ for all maximal ideals $\mmm\supset\aaa$. Prove that $M=\aaa M$. 

\textbf{Solution.} Let $\mmm$ be a maximal ideal of $A/\aaa$. It suffices to show 
$$
(M/\aaa M)_\mmm=0.
$$ 
Letting $\mmm^{\oo c}$ be the contraction of $\mmm$ in $A$, we get 
$$
(M/\aaa M)_\mmm\simeq(M/\aaa M)_{\mmm^{\oo c}}\simeq M_{\mmm^{\oo c}}/(\aaa M)_{\mmm^{\oo c}}=0.
$$ 

\subsection{Page 45, Exercise 3.15}%

\textbf{Statement.} Let $A$ be a ring. Show that every set of $n$ generators of $A^n$ is a basis of $A^n$. Deduce that every set of generators of $A^n$ has at least $n$ elements. [Hint. Let $x_1,\ldots,x_n$ be a set of generators and $e_1,\ldots,e_n$ the canonical basis of $A^n$. Define $\phi:A^n\to A^n$ by $\phi(e_i)=x_i$. Then $\phi$ is surjective and we have to prove that it is an isomorphism. By (3.9) we may assume that $A$ is a local ring. Let $N$ be the kernel of $\phi$ and let $k=A/\mmm$ be the residue field of $A$\ldots]

\textbf{Solution.} The exact sequence 
$$
0\to N\to A^n\to A^n\to0
$$ 
in the hint induces an exact sequence 
$$
\Tor^A_1(k,A^n)\to k\otimes_AN\to k\otimes_AA^n\to k\otimes_AA^n\to0,
$$ 
(see Section~\ref{Tor-f} p.~\ref{Tor-f} above) which we can write as 
$$
0\to N/\mmm N\to k^n\to k^n\to0. 
$$ 
The $k$-linear map $k^n\to k^n$, being surjective, is injective, so that we get $N=\mmm N$. Exercise 2.12 p.~32 of the book shows that $N$ is finitely generated, and Nakayama’s Lemma (Proposition 2.6 p.~21 of the book) gives $N=0$ ($\mmm$ being the Jacobson radical of the local ring $A$). 

% comment removed https://docs.google.com/document/d/1xq5VCYuRUAVFwrbOqkGsjJjaLqYfpHNf5kZr2zub8rs/edit

\subsection{Page 46, Exercise 3.16}\label{316}%

We claim that Property (vi) below is equivalent to Properties (i) to (v).

(vi) For any $A$-linear morphism $M'\to M$, if $M'_B\to M_B$ is injective, then so is $M'\to M$.

(vi) $\implies$ (v): We must prove that $M\to M_B$ is injective. It suffices to show that $M_B\to M_{BB}$ is injective. But this follows from Exercise 2.13 p.~32 of the book.

(iv) $\implies$ (vi): Let $0\to M'\to M\to M''$ be an exact sequence such that $M_B\to M''_B$ is injective. It suffices to show $M'=0$, or even $M'_B=0$. But this follows from the fact that $0\to M'_B\to M_B\to M''_B$ is exact.

\subsection{Page 46, Exercise 3.17}%

Let $M'\to M$ be injective. We must show that $M'_B\to M_B$ is injective.  By Section~\ref{316} and by the fact that $B\to C$ is faithfully flat, it suffices to check that $M'_{BC}\to M_{BC}$ is injective, i.e., that $M'_C\to M_C$ is injective. But this follows from the fact that $A\to C$ is flat.

\subsection{Page 46, Exercise 3.18}%

The phrase ``$B_\qqq$ is a local ring of $B_\ppp$'' means ``$B_\qqq$ is a localization of $B_\ppp$''.

\subsection{Page 46, Exercise 3.19}%

\textbf{General Observation.} If $P(M)$ is a property that an $A$-module $M$ may or may not have, then to prove $P(M)$ for all finitely generated module, it suffices to prove that 

$\bu\ P(A/\aaa)$ holds for all ideal $\aaa$,

$\bu\ P(M_1+M_2)$ holds for all finitely generated submodules $M_1$ and $M_2$ of a module $M$ whenever $P(M_1)$ and $P(M_2)$ hold.

It seems better to start by proving (iii) and (iv), and then (ii). For (iv), see \eqref{tpcwc} p.~\pageref{tpcwc}. For (v), use (ii) and the General Observation. 

Hint for (vi): Use Proposition 3.7 p. 40 of the book.

%Hint for (viii): Use the general observation above. [Note that we have $V(\Ann(M_B)=V(\Ann(M)^{\oo e})$.]

Proof of (viii): Let $\qqq\in\Spec(B)$ and set $\ppp:=\qqq^{\oo c}$. It suffices to show 
$$
M_{B,\qqq}=0\iff M_\ppp=0.
$$ 
We claim
\begin{equation}\label{mbq}
\frac{M_{B,\qqq}}{\qqq M_{B,\qqq}}\simeq\frac{B_\qqq}{\qqq_\qqq}\otimes_{A_\ppp/\ppp_\ppp}\frac{M_\ppp}{\ppp M_\ppp}\ .
\end{equation}
As $M$ is finitely generated, \eqref{mbq} will imply 
$$
M_{B,\qqq}=0\iff\frac{M_{B,\qqq}}{\qqq M_{B,\qqq}}=0\iff\frac{M_\ppp}{\ppp M_\ppp}=0\iff M_\ppp=0.
$$ 
Let us prove \eqref{mbq}. We have 
$$
\frac{M_{B,\qqq}}{\qqq M_{B,\qqq}}=
\frac{(B\otimes_AM)_\qqq}{\qqq(B\otimes_AM)_\qqq}\simeq
\frac{B_\qqq}{\qqq_\qqq}\otimes_BB\otimes_AM\simeq
\frac{B_\qqq}{\qqq_\qqq}\otimes_AM
$$ 
$$
\simeq
\frac{B_\qqq}{\qqq_\qqq}\otimes_{A_\ppp/\ppp_\ppp}\frac{A_\ppp}{\ppp_\ppp}\otimes_AM\simeq
\frac{B_\qqq}{\qqq_\qqq}\otimes_{A_\ppp/\ppp_\ppp}\frac{M_\ppp}{\ppp M_\ppp}\ .
$$ 
Let us show that the inclusion $\oo{Supp}(M_B)\subset f^{*-1}(\oo{Supp}(M))$ holds even if $M$ is not finitely generated. It suffices to prove 
$$%\begin{equation}\label{bamq}
(B\otimes_AM)_\qqq\simeq B_\qqq\otimes_{A_\ppp}M_\ppp.
$$%\end{equation} 
Indeed, we have 
$$
(B\otimes_AM)_\qqq\simeq B_\qqq\otimes_BB\otimes_AM\simeq
B_\qqq\otimes_AM
$$ 
$$
\simeq B_\qqq\otimes_{A_\ppp}A_\ppp\otimes_AM
\simeq B_\qqq\otimes_{A_\ppp}M_\ppp\ .
$$

\subsection{Page 46, Exercise 3.20}%

Counterexample to the converse of (ii): $A:=K$ a field, $B:=K[\varepsilon]$ with $\varepsilon^2=0$, $f:K\to K[\varepsilon]$ the inclusion. 

\subsection{Page 47, Exercise 3.21iv}\label{321iv}%

In fact the fiber $f^{*-1}(\ppp)$ is the set of those prime ideals $\qqq$ of $B$ which satisfy 
$$
\ppp^{\oo{e}}\subset\qqq\subset B\setminus f(S),
$$ 
where $S:=A\setminus\ppp$. Equip $f^{*-1}(\ppp)\subset\Spec(B)$ with the induced topology. Then the closed subsets of $f^{*-1}(\ppp)$ are given by the conditions 
$$
\bbb\subset\qqq\subset B\setminus f(S),
$$ 
where $\bbb$ is an ideal of $B$ containing $\ppp^{\oo{e}}$ and avoiding $S$. In particular $f^{*-1}(\ppp)$ is naturally homeomorphic to $\Spec((B/\ppp^{\oo{e}})_\ppp)$.

We also give the commutative diagram
$$
\begin{tikzcd}
(B_\ppp/\ppp B_\ppp)^*\ar[d,"\overline{f_\ppp}^*"]\ar[r]&(B_\ppp)^*\ar[d,"(f_\ppp)^*"]\ar[r]& B^*\ar[d,"f^*"]\\ 
(A_\ppp/\ppp_\ppp)^*\ar[r]&(A_\ppp)^*\ar[r]& A^*,
\end{tikzcd}
$$ 
where $R^*$ stands for $\Spec(R)$, and recall the isomorphism 
$$
(A_\ppp/\ppp_\ppp)\otimes_AB\simeq B_\ppp/\ppp B_\ppp
$$ 
proved in Section~\ref{res} p.~\pageref{res}, Claim~1. 

\subsection{Page 47, Exercise 3.23}%

%\begin{note}\label{sheaf} Let $f,g\in A$. Then there is at most one $A$-algebra morphism from $A_f$ to $A_g$. Moreover such a morphism exists if and only if $f/1$ is a unit of $A_g$, that is if and only if $f/1$ is contained in no prime prime ideal of $A_g$, that is if and only if $g\notin\ppp$ implies $f\notin\ppp$ for all prime ideal $\ppp$ of $A$, that is if and only if $X_g\subset X_f$. \end{note}

The notes in Section~\ref{satprel} p.~\pageref{satprel} above imply (i), (ii), (iii) and (iv). Part (v) results from the following more general statement, whose proof is left to the reader:

If $S$ is any multiplicative subset of $A$ then there is a natural isomorphism 
$$
\colim_{f\in S}A_f\simeq S^{-1}A.
$$

%By Proposition~\ref{gal} p.~\pageref{gal} we have $X_g\subset X_f$ if and only if $g\in r(f)$.

\begin{comment}
It seems simpler to proceed as follows:

For $f\in A$ put 
$$
S(f):=A\ \setminus\ \bigcup_{\ppp\notni f}\ \ppp,
$$ 
where it is understood that $\ppp$ is in $X$. Note that $S(f)$ is a multiplicatively closed set depending only on $X_f$, not on $f$. Finally put 
$$
A(X_f):=S(f)^{-1}A.
$$ 
Here is a mild generalization: 

For each radical ideal $\aaa$ of $A$ put 
$$
S_\aaa:=A\ \setminus\ \bigcup_{\ppp\not\supset\aaa}\ \ppp.
$$ 
This is multiplicatively closed. For $\aaa\subset\bbb$ we have a natural morphism $S_{\bbb}^{-1}A\to S_\aaa^{-1}A$. We also have a canonical isomorphism 
$$
\colim_{\aaa\not\subset\ppp}S_\aaa^{-1}A\simeq A_\ppp.
$$
\end{comment}

\subsection{Page 47, Exercise 3.24}%

We can assume that $I$ is nonempty, and that $0\in I$. Let $\alpha_i:A\to A_{f_i}$ and $\phi_{ij}:A_{f_i}\to A_{f_if_j}$ be the natural morphisms, and consider the diagram 
$$
0\to A\xr\alpha\prod_{i\in I}A_{f_i}\xr\beta\prod_{i,j\in I}A_{f_if_j},
$$ 
where $\alpha$ is induced by the $\alpha_i$ and $\beta$ is defined by 
$$
\beta((a_i)):=(\phi_{ij}(a_i)-\phi_{ji}(a_j)).
$$
This is clearly a complex. It suffices to show that it is exact. By Section~\ref{re} p.~\pageref{re}, we can assume that $A$ is local. As the $f_i$ generate the unit ideal, one of them is a unit, so that we can assume $f_0=1$. It is easy to see that $\alpha$ is injective. Assuming $\beta((a_i))=0$, it is straightforward to check that $(a_i)$ is equal to $\alpha(a_0)$.


\begin{comment}
Denote the natural morphism $A\to A_{f_i}$ by $a\mapsto a_{|i}$, and the natural morphism $A_{f_i}\to A_{f_if_j}$ by $a_i\mapsto a_{i|j}$. We can assume that $I$ is nonempty, and that $0\in I$. Consider the diagram 
$$
0\to A\xr\alpha\prod_{i\in I}A_{f_i}\xr\beta\prod_{i,j\in I}A_{f_if_j}
$$ 
defined by $\alpha(a):=(a_{|i})$ and $\beta((a_i)):=((a_{i|j}-a_{j|i}))$. This is clearly a complex. It suffices to show that it is exact. By Section~\ref{re} p.~\pageref{re}, we can assume that $A$ is local. As the $f_i$ generate the unit ideal, one of them is a unit, so that we can assume $f_0=1$. It is easy to see that $\alpha$ is injective. Assuming $\beta((a_i))=0$, it is straightforward to check that $(a_i)$ is equal to $\alpha(a_0)$.

%

Denote the natural morphism $A\to A_{f_i}$ by $a\mapsto a_{|i}$, and the natural morphism $A_{f_i}\to A_{f_if_j}$ by $a_i\mapsto a_{i|j}$. 

Step 1: $I=\{1,\dots,n\}$. Consider the diagram 
$$
0\to A\xr\alpha\prod_{i\in I}A_{f_i}\xr\beta\prod_{i,j\in I}A_{f_if_j}
$$ 
defined by $\alpha(a):=(a_{|i})$ and $\beta((a_i)):=((a_{i|j}-a_{j|i}))$. This is clearly a complex. It suffices to show that it is exact. By Section~\ref{re} p.~\pageref{re}, we can assume that $A$ is local. Let $\mmm$ be its maximal ideal. As the $f_i$ generate the unit ideal, one of them is a unit, so that we can assume $f_1=1$. It is easy to see that $\alpha$ is injective. Assuming $\beta((a_i))=0$, it is straightforward to check that $(a_i)$ is equal to $\alpha(a_1)$. This solves the exercise in the case $I=\{1,\dots,n\}$.

Step 2: $I$ arbitrary. Let $(s_i)$ be a family such that $s_i\in A_{f_i}$ for all $i$ and $s_{i|j}=s_{j|i}$ for all $i,j$. There are $i_1,\dots,i_n$ such that $(f_{i_1},\dots,f_{i_n})=(1)$ and, by Step~1, there is an $s\in A$ such that $s_{|i_k}=s_{i_k}$ for $1\le k\le n$. Let $i_{n+1}$ be in $I$. There is again a $t\in A$ such that $t_{|i_k}=s_{i_k}$ for $1\le k\le n+1$. By uniqueness we get $t=s$. As $i_{n+1}$ was arbitrary, we have $s_{|i}=s_i$ for all $i$. This proves the existence of a solution to our problem. The uniqueness is clear.
\end{comment}

\subsection{Page 48, Exercise 3.25}%

For the hint see Exercise 3.21iv p. 47 of the book and Section~\ref{res} p.~\pageref{res} above.

\subsection{Page 48, Exercise 3.26}%

For the hint see Exercise 3.21iv p. 47 of the book and Section~\ref{res} p.~\pageref{res} above.

\subsection{Page 48, Exercise 3.27}%

In the hint to (i), ``Examples 25 and 26'' should be ``Exercises 25 and 26''. 

Part (ii): see Exercise 1.22 p. 13 of the book. 

For (iv), see Section~\ref{223} p.~\pageref{223}.

\section{About Chapter 4}%%

\subsection{Contracted primary ideals}\label{cpi}%

Section~\ref{43} p.~\pageref{43} prompts the question: Is a contracted primary ideal the contraction of a primary ideal? We show that the answer is negative.

Let $K$ be a field and set $A:=K[\varepsilon]$ with $\varepsilon^2=0$ but $\varepsilon\ne0$. Note that $(0)\subset A$ is primary. We will define a ring $B$ which contains $A$. Then $(0)\subset A$ will be a contracted primary ideal, and we will show that $(0)\subset A$ is not the contraction of a primary ideal of $B$. 

We define $B$ by 
$$
B=K[X,Y_1,Y_2,\dots]/\mathfrak b=K[x,y_1,y_2,\dots]
$$ 
(obvious notation) with 
$$
\mathfrak b=(X^2Y_1)+\sum_{i\ge2}(X^nY_n-XY_1),
$$
and we embed $A$ in $B$ by setting $\varepsilon:=xy_1$. We get $\varepsilon x=0$ and $\varepsilon=x^ny_n$ for all $n\ge1$; in particular $\varepsilon\in(x^n)$ for all $n\ge1$.

We claim that we have $XY_1\notin\mathfrak b$, or, equivalently, $\varepsilon\ne0$.

Proof of the claim: Assume by contradiction 
$$
XY_1\in(X^2Y_1,X^2Y_2-XY_1,\dots,X^nY_n-XY_1).
$$ 
Dividing by $X$ we get 
$$
Y_1\in(XY_1,XY_2-Y_1,X^2Y_3-Y_1,\dots,X^{n-2}Y_{n-1}-Y_1,X^{n-1}Y_n-Y_1).
$$ 
Setting $Y_i:=X^{n-i}Y_n$ for $1\le i\le n-1$ we get $X^{n-1}Y_n\in(X^nY_n)$, which is false. 

The above proof was explained to me by an anonymous user, whose user name is user26857, of the Mathematics Stackexchange forum; see 

\href{https://math.stackexchange.com/q/2389114/660}{https://math.stackexchange.com/q/2389114/660}

We prove that $(0)\subset A$ is not the contraction of a primary ideal of $B$.

Let $\mathfrak q$ be a primary ideal of $B$. If we had $\varepsilon\notin\mathfrak q$ and $x^n\notin\mathfrak q$ for all $n\ge1$, then $x$ would be a non nilpotent zero divisor in $B/\mathfrak q$, contradicting the assumption that $\mathfrak q$ is primary. Thus we have $x^n\in\mathfrak q$ for some $n\ge1$, or $\varepsilon\in\mathfrak q$. But, since $\varepsilon\in(x^n)$, we get $\varepsilon\in\mathfrak q$ in both cases, and $\mathfrak q$ contracts to $(1)$ instead of contracting to $(0)$.

\subsection{Page 50}\label{contrpry}%

Just before Proposition 4.1: In fact, the contraction of a $\ppp$-primary ideal is a $\ppp^{\oo c}$-primary ideal.

\subsection{Page 52, Corollary to Theorem 4.5}%%

(Theorem 4.5 is the First Uniqueness Theorem.)
\begin{cor}\label{c45}
In the notation of Theorem 4.5, if %we have: (a) If 
$(\aaa:x)$ is prime, then $(\aaa:x)$ $=\ppp_i$ for some $i$. %(b) If $1\le i\ne j\le n$, then $\ppp_i\ne\ppp_j$.
\end{cor}

\subsection{Page 52, Proof of Theorem 4.5}%

The following statement, occurring in the proof of Theorem 4.5, is often used in the sequel of the book:

{\em In the setting of Theorem 4.5 we have} 
\begin{equation}\label{45}
r(\aaa:x)=\bigcap_{x\notin\qqq_j}\ppp_j.
\end{equation}
(See Note~\ref{ef} p.~\pageref{ef}). Here are more details. Still in the setting and notation of Theorem 4.5, for $x$ in $A$ set $J(x):=\{j\ |\ x\notin\qqq_j\}$. Then $(\qqq_j:x)$ is $\ppp_j$-primary for $j\in J(x)$, and we have 
$$
(\aaa:x)=\bigcap_{j\in J(x)}(\qqq_j:x).
$$ 
In particular, we have $J(x_i)=\{i\}$, and thus 
$$
(\aaa:x_i)=(\qqq_i:x_i),\quad r(\aaa:x_i)=\ppp_i.
$$

\subsection{Page 52, Corollary to Proposition 4.6}%

\begin{note}\label{fmme}
If $\aaa$ is decomposable, then the set of prime ideals containing $\aaa$ has only finitely many minimal elements.
\end{note}

\subsection{Page 53, decomposable ideals}\label{di}%

The purpose of this section is to prove the following statement:

\emph{An ideal having only finitely many minimal primes is not necessarily decomposable.}

The following is due to user26857 of Mathematics Stackexchange.\bigskip\bigskip

\hrule\bigskip

Taken from\\ https://math.stackexchange.com/a/207468/660:

In order to find an ideal which doesn't have a primary decomposition, the following construction is useful. Let $R$ be a commutative ring and $M$ an $R$-module. On the set $A=R\times M$ one defines the following two algebraic operations:
$$
(a,x)+(b,y)=(a+b,x+y)
$$
$$
(a,x)(b,y)=(ab,ay+bx).
$$
With these two operations $A$ becomes a commutative ring with $(1,0)$ as unit element. ($A$
is called the \emph{idealization} of the $R$-module $M$ or the \emph{trivial extension} of $R$ by $M$.)

Let us list some important properties of this ring:

1. $\{0\}\times M$ is an ideal of $A$ isomorphic to $M$ (as $R$-modules) and there is a ono-to-one correspondence between the ideals of $R$ and the ideals of $A$ containing $\{0\}\times M$, the ideal $\aaa\subset R$ corresponding to $\aaa\times M\subset A$.

2. $A$ is a Noetherian ring if and only if $R$ is Noetherian and $M$ is finitely generated.

3. All prime (maximal) ideals of $A$ have the form $\ppp\times M$, where $\ppp$ is a prime (maximal) ideal of $R$.

4. If $R$ is an integral domain and $M$ is divisible, then all the ideals of $A$ have the form $\aaa\times M$ with $\aaa$ ideal of $R$, or $\{0\}\times N$ with $N$ submodule of $M$.\bigskip\bigskip

\hrule\bigskip%

Taken from\\ https://math.stackexchange.com/a/1679116/660:\bigskip

\begin{note}%\label{nice}
If $A$ is the idealization of the $\mathbb Z$-module $\mathbb Q$, then the primary ideals of $A$ are  

$\bullet\quad p^n\mathbb Z\times\mathbb Q$ with $p$ prime, $n\ge1$, 

$\bullet\quad\{0\}\times\mathbb Q$,

$\bullet\quad\{0\}\times\{0\}$. 

Moreover $\{0\}\times\mathbb Q$ is the only minimal prime of $\{0\}\times\mathbb Z$, and $\{0\}\times\mathbb Z$ has no primary decomposition (see Note~\ref{fmme}).
\end{note}\bigskip
%Then $\aaa:=\{0\}\times\mathbb Z$ has only one minimal prime $\{0\}\times\mathbb Q$ and $\aaa$ has no primary decomposition.\bigskip%https://math.stackexchange.com/a/1679116/660

\hrule\bigskip

\subsection{Page 53, proof of Proposition 4.8.ii}\label{prycor}%\label{contrpry}

Using the notation of Section~\ref{prcor} p.~\pageref{prcor} and taking Section~\ref{contrpry} p.~\pageref{contrpry} into account, we set 
$$
X':=\{\qqq\ |\ \qqq\text{ primary ideal of }A\},
$$ 
$$
Y':=\{\qqq\ |\ \qqq\text{ primary ideal of }S^{-1}A\}.
$$ 
We then have a contraction map $c:Y'\to X'$ compatible with radicals. We check that  
$$
c(Y')=\{\qqq\in X'\ |\ r(\qqq)\in c(Y)\}
$$ 
and that 
$$
\qqq\in c(Y')\implies S^{-1}\qqq\in X',
$$ 
and we see the following facts: 

\emph{The contraction and extension maps are inverse inclusion preserving bijections compatible with radicals between $Y'$ and $c(Y')$.} 

\emph{Moreover, a primary ideal of $A$ is contracted if and only if its radical is disjoint from $S$.}

In particular, if $\ppp$ is a minimal prime ideal, then the kernel of the natural morphism $A\to A_\ppp$ is a minimal \emph{primary} ideal.

% comment removed https://docs.google.com/document/d/1830-SPd2EETXXy-5Sbq7s8ppPc7O1mbrr0CMLll1ZL8/edit

\subsection{Page 54, Theorem 4.10}%

This is the Second Uniqueness Theorem. Here is a corollary (see also Proposition 1.11ii p.~8 of the book):

\begin{cor}\label{410}
Let $\aaa=\qqq_1\cap\cdots\cap\qqq_n$ be a reduced primary decomposition.

\emph{(a)} If $\ppp_i:=r(\qqq_i)$ is isolated, then $\qqq_i$ is the smallest $\ppp_i$-primary ideal containing $\aaa$.

\emph{(b)} If $r(\aaa)=\ppp$ for some prime ideal $\ppp$, then $\ppp$ is the only isolated prime ideal of $\aaa$, and the corresponding primary component is the smallest $\ppp$-primary ideal containing $\aaa$.
\end{cor}

\subsection{Page 55, Exercise 4.2}% 

\textbf{Statement.} If $\aaa=r(\aaa)$, then $\aaa$ has no embedded prime ideals.

\textbf{Solution.} It is implicitly assumed that $\aaa$ is decomposable. In general, if 
$$
\aaa=\qqq_1\cap\cdots\cap\qqq_n
$$ 
is a reduced primary decomposition of $\aaa$ such that the minimal prime ideals of $\aaa$ are $\ppp_1,\dots,\ppp_m$ (with $\ppp_i=r(\qqq_i)$), then 
$$
r(\aaa)=\ppp_1\cap\cdots\cap\ppp_m
$$ 
is the unique reduced primary decomposition of $r(\aaa)$. In particular $r(\aaa)$ has no embedded prime ideals. 

Summary: If $\aaa$ is decomposable, then so is $r(\aaa)$, and $r(\aaa)$ has no embedded prime ideals. 

\subsection{Page 55, Exercise 4.5}%

Let $\aaa$ be an ideal of $A:=K[x,y,z]$. Then $\aaa$ is generated by monomials if and only if it has the following property:

A polynomial $f\in A$ is in $\aaa$ if and only if all the monomials occurring in $f$ are in $\aaa$.

In particular, if two ideals are generated by monomials, so is their intersection.

Here is a variant of the Exercise: Let $A$ be the $K$-algebra ($K$ a field) generated by $x,y,z$ with the relations 
$$
0=x^2=xy=xz=yz,
$$ 
and set $\ppp_1:=(x,y),\ppp_2:=(x,z),\mmm:=(x,y,z)$. Show that $\ppp_1\cap\ppp_2\cap\mmm^2$ is a primary decomposition of $(0)$ in $A$.

We have:
$$
A=K\oplus Kx\oplus yK[y]\oplus zK[z],
$$ 
$$
\ppp_1=Kx\oplus yK[y],\quad\ppp_2=Kx\oplus zK[z],
$$ 
$$
\mmm^2=y^2K[y]\oplus z^2K[z],
$$ 
$$ 
\ppp_1\cap\ppp_2=Kx,\quad\ppp_2\cap\mmm^2=z^2K[z].
$$

\subsection{Page 55, Exercise 4.6}%

Claim: any prime ideal is contained in a \emph{unique} maximal ideal.

Proof: Using Urysohn's Lemma it is easy to see that, given distinct points $x$ and $y$ in $X$ and denoting by $\mmm_x$ and $\mmm_y$ the corresponding maximal ideals, there are $f,g\in C(X)$ such that $fg=0$, $f\in\mmm_x\setminus\mmm_y$, $g\in\mmm_y\setminus\mmm_x$. 

The claim implies that there are infinitely many minimal prime ideals. 

\subsection{Page 55, Exercise 4.7}\label{5547}%

Observe that $A[x]$ is faithfully flat over $A$: see Exercise 3.16 p.~45 of the book and Section~\ref{316} p.~\pageref{316} above.

Note that we have $M[x]\simeq A[x]\otimes_AM$ for any $A$-module $M$. In particular $M\mapsto M[x]$ is exact. (See Exercise 2.6 p.~32 of the book.) 

Part (ii): In fact we have 

\begin{lem}\label{fiberx}
If $f:A\to A[x]$ is the natural embedding, then the fiber $f^{*-1}(\ppp)$ of 
$$
f^*:\Spec(A[x])\to\Spec(A)
$$ 
above a prime ideal $\ppp$ of $A$ is order isomorphic to the spectrum of 
$$
k\otimes_AA[x]\simeq k[x],
$$ 
where $k$ is the residue field at $\ppp$. Moreover, the least element of $f^{*-1}(\ppp)$ is $\ppp[x]$, and $\ppp[x]+(x)$ is a maximal element of $f^{*-1}(\ppp)$.
\end{lem}

See Exercise 3.21iv p.~47 of the book and Section~\ref{321iv} p.~\pageref{321iv} above. Also note that, if $A\to B$ is a ring morphism and $\aaa$ a contracted ideal of $A$, then $\aaa^{\oo e}$ is the least element of the set of ideals of $B$ contracting to $\aaa$.

Part (iii): Use Exercises 1.18 p.~10, 1.2ii p.~11 and 1.2iii p.~11. 

% comment removed https://docs.google.com/document/d/17k969GrD4mEbiSx2cWbae1UARFO3VnJi98nEKwM8Lmg/edit

Part (v): We clearly have 
\begin{equation}\label{asb}
\aaa\subset\bbb\iff\aaa[x]\subset\bbb[x]
\end{equation}
(obvious notation), and Part (v) follows from Lemma~\ref{fiberx}. %\eqref{asb}, Part~(iv) and Proposition 4.6 p.~52 of the book.

\subsection{Page 55, Exercise 4.8}%

Setting 
$$
B:=k[x_1,\dots,x_r],\quad A:=B[y_1,\dots,y_s],
$$ 
$$
\mmm:=(x_1,\dots,x_r)\subset B,\quad\ppp:=(x_1,\dots,x_r)\subset A,
$$ 
we get 
$$
\ppp^n=\mmm^n[y_1,\dots,y_s],
$$ 
and we can use Exercise 4.7iii.

% comment removed https://docs.google.com/document/d/1fOqIMiNtLhAGSNjEWSk4jp_hfhwqHIqFx3DEPyU_zHg/edit

\subsection{Page 55, Exercise 4.9}\label{49}%

\textbf{Statement.} [I found it convenient to make some minor changes to the wording of the book.] In a ring $A$, let $D(A)$ denote the set of prime ideals $\ppp$ which satisfy the following condition: there exists $a\in A$ such that $\ppp$ is minimal in the set of prime ideals containing $(0:a)$. 

(a) Show that $b\in A$ is a zero divisor if and only if $b\in\ppp$ for some $\ppp\in D(A)$.

(b) Let $S$ be a multiplicatively closed subset of $A$, and write $S^{-1}D(A)$ for the set of all prime ideals of the form $S^{-1}\ppp$ with $\ppp\in D(A)$ [in particular such a $\ppp$ is disjoint from $S$]. Show that
$$
D(S^{-1}A)=S^{-1}D(A).
$$
(c) If the zero ideal has a primary decomposition, show that $D(A)$ is the set of associated prime ideals of $(0)$.

\textbf{Hints.} 

(a) Let $a,b\in A$ and $\ppp\in\Spec(A)$ be such that $a\in\ppp$ and $\ppp$ is minimal over $(0:b)$.

\textbf{Claim 1:} $a$ is zero-divisor.

\emph{Proof of Claim 1.} Assume by contradiction that $a$ is not a zero-divisor. Obviously $b\ne0$ and $a\notin(0:b)$. Let $s$ be in $A\setminus\ppp$ and $n$ be in $\mathbb N$. To prove Claim~1, we first prove:

\textbf{Claim 2:} $a^ns\notin(0:b)$.

\emph{Proof of Claim 2.} Assume by contradiction that $a^ns\in(0:b)$. We can suppose that $n$ is minimum for this condition. %In particular $n\ge2$. 
We have $a(a^{n-1}sb)=a^nsb=0$. As $a$ is not a zero-divisor, this implies $a^{n-1}sb=0$, that is $a^{n-1}s\in(0:b)$, in contradiction with the minimality of $n$. $\square$

To complete the proof of Claim~1 set $T:=\{\ a^ns|\ n\in\mathbb N,s\in A\setminus\ppp\}$. This is a multiplicative set. Claim~2 implies that $T$ is disjoint from $(0:b)$. Thus there is a prime ideal $\ppp'$ which contains $(0:b)$ and is disjoint from $T$, and we have $A\setminus\ppp\subset T\subset A\setminus\ppp'$, that is $(0:b)\subset\ppp'\subset\ppp$. By minimality of $\ppp$ over $(0:b)$ this forces $\ppp'=\ppp$, and thus $a\in\ppp\cap T=\ppp'\cap T=\varnothing$, a contradiction. This completes the proof of Claim~1. $\square$ 

% comment removed https://docs.google.com/document/d/1BC9kzpvjeCytRBmyZYoAjIPlupnoTbLJT9d_T6a0iSA/edit

(b) It suffices to prove any of the following two equivalent statements: 

(b1) Let $a$ be an element of $A$ and $\ppp$ a prime ideal of $A$ disjoint from $S$. Then $S^{-1}\ppp$ is minimal over $(0:\frac a1)$ if and only if $\ppp$ is minimal over $(0:a)$.

(b2) If $a$ is an element of $A$ and $\ppp$ a prime ideal of $A$ disjoint from $S$, then 
$$
S^{-1}\ppp\supset\left(0:\frac a1\right)\quad\iff\quad\ppp\supset(0:a).
$$
This proof is left to the reader. [Note the inclusion $S^{-1}(0:a)\subset(0:\frac a1)$.]

(c) Let $(0)=\qqq_1\cap\cdots\cap\qqq_n$ be a reduced decomposition and set $\ppp_i:=r(\qqq_i)$. We claim 
$$
D(A)\subset\{\ppp_1,\dots,\ppp_n\}.
$$ 
\emph{Proof.} Let $\ppp$ be in $D(A)$. Then $\ppp$ is minimal over $(0:a)$ for some $a\in A$. By \eqref{45} p.~\pageref{45} we have 
$$
\bigcap_{\qqq_i\not\ni a}\ \ppp_i=r(0:a)\subset\ppp.
$$ 
In particular there is a $j$ such that $a\notin\qqq_j$ and $\ppp\supset\ppp_j$. As $\ppp_j\supset(0:a)$, we get $\ppp=\ppp_j$ by minimality of $\ppp$. $\square$

\subsection{Page 55, Exercise 4.10}\label{4.10}%

\textbf{Statement.} For any prime ideal $\ppp$ in a ring $A$, let $S_\ppp(0)$ denote the kernel of the homomorphism $A\to A_\ppp$. Prove that

(i) $S_\ppp(0)\subset\ppp$,

(ii) $\ppp$ is minimal if and only if $(r_{A_\ppp}(0))^{\oo c}=\ppp$,

(iii) if $\ppp\supset\ppp'$, then $S_\ppp(0)\subset S_{\ppp'}(0)$,

(iv) $\bigcap_{\ppp\in D(A)}S_\ppp(0)=(0)$, where $D(A)$ is defined in Exercise 9 (see Section~\ref{49} p.~\ref{49}).

\textbf{Solution.} Note that $S_\ppp(0)=(0)^{\oo c}$, where the contraction is taken with respect to $A\to A_\ppp$. We also have 
$$
S_\ppp(0)=\bigcup_{s\in A\setminus\ppp}(0:s)
$$ 
and $r_A((0)^{\oo c})=(r_{A_\ppp}(0))^{\oo c}$ (Exercise 1.18 p.~10 and Proposition 3.11ii p.~41).

(i) We have 
$$
S_\ppp(0)=\bigcup_{s\in A\setminus\ppp}(0:s)\subset\ppp.
$$
(ii) If $\ppp$ is minimal we have $r_{A_\ppp}(0)=\ppp_\ppp$ and thus $(r_{A_\ppp}(0))^{\oo c}=\ppp$. 

If $\ppp$ is \emph{not} minimal, there is a prime ideal $\ppp'$ such that $\ppp'<\ppp$, and we get $r_{A_\ppp}(0)\subset\ppp'_\ppp<\ppp_\ppp$, hence $r_A(0)^{\oo c}\subset\ppp'<\ppp$ and thus $r_{A_\ppp}(0)^{\oo c}\ne\ppp$.

(iii) We have 
$$
S_\ppp(0)=\bigcup_{s\in A\setminus\ppp}(0:s)\subset\bigcup_{s'\in A\setminus\ppp'}(0:s')=S_{\ppp'}(0).
$$
(iv) We must show 
$$
\bigcap_{\ppp\in D(A)}S_\ppp(0)=(0).
$$ 
Let $0\ne a\in A$. There is a prime ideal $\ppp$ which is minimal over $(0:a)$. In particular $\ppp\in D(A)$. Then 
$$
a\in S_\ppp(0)=\bigcup_{s\in A\setminus\ppp}(0:s)
$$ 
would imply $as=0$ for some $s\in A\setminus\ppp$, and thus $s\in(0:a)\subset\ppp$, a contradiction.

\subsection{Page 56, Exercise 4.11}\label{411}%

\textbf{Statement.} 

(a) If $\ppp$ is a minimal prime ideal of a ring $A$, show that $S_\ppp(0)$ (Exercise 10) is the smallest $\ppp$-primary ideal. 

(b) Let $\aaa$ be the intersection of the ideals $S_\ppp(0)$ as  $\ppp$ runs through the minimal prime ideals of $A$. Show that $\aaa$ is contained in the nilradical of $A$.

(c) Suppose that the zero ideal is decomposable. Prove that $\aaa=(0)$ if and only if every prime ideal of $(0)$ is isolated.

\textbf{Solution.}\\ (a) The ideal $\ppp_\ppp$, being the unique prime ideal of $A_\ppp$, coincides with the nilradical: $\ppp_\ppp=r_{A_\ppp}(0)$. Proposition 4.2 p.~51 of the book implies that $(0)$ is $\ppp_\ppp$-primary, and is thus the smallest $\ppp_\ppp$-primary ideal of $A_\ppp$. As $\ppp_\ppp$ contracts to $\ppp$, Section~\ref{prycor} p.~\pageref{prycor} above entails that $S_\ppp(0)=(0)^{\oo c}$ is the smallest $\ppp$-primary ideal of $A$. 

(b) This follows from Exercise 4.10i p. 55, see Section~\ref{4.10} p.~\pageref{4.10} above.

(c) Let 
$$
(0)=\qqq_1\cap\cdots\cap\qqq_n
$$ 
be a reduced decomposition. We can assume that there is an $m$ such that $1\le m\le n$ and $\ppp_i:=r(\qqq_i)$ is isolated if and only if $i\le m$. The Second Uniqueness Theorem (Theorem 4.10 p.~54 of the book) and (a) above imply 
\begin{equation}\label{eq411}
(0)=S_{\ppp_1}(0)\cap\cdots\cap S_{\ppp_m}(0)\cap\qqq_{m+1}\cap\cdots\cap\qqq_n
\end{equation} 
$$
=\aaa\cap\qqq_{m+1}\cap\cdots\cap\qqq_n,
$$ 
and we must show $\aaa=(0)\iff m=n$. Implication $\Longleftarrow$ is clear. Conversely if $\aaa=(0)$, then $m=n$ because \eqref{eq411} is a \emph{reduced} decomposition.

\subsection{Page 56, Exercise 4.12}%

Follows from statements 1.18, 3.11ii, 3.11v and 4.9 in the book.

\subsection{Page 56, Exercise 4.13}%

The Exercise is an easy consequence of Corollary~\ref{410}b p.~\pageref{410} and the following Lemmas:

\begin{lem}\label{413c}
We have $\ppp^n\subset\ppp^{(n)}=\left(\ppp_\ppp^n\right)^{\oo c}=\left(\ppp^n\right)^{\oo{ec}}$ and $\left(\ppp^{(n)}\right)_\ppp=\ppp_\ppp^n$. 
\end{lem}
This is obvious.

\begin{lem}\label{413a}
We have $r\left(\ppp^{(n)}\right)=\ppp$. 
\end{lem}
\begin{proof}
We have 
$$
r\left(\ppp^{(n)}\right)=r\left(\left(\ppp_\ppp^n\right)^{\oo c}\right)=\left(r\left(\ppp_\ppp^n\right)\right)^{\oo c}=(\ppp_\ppp)^{\oo c}=\ppp,
$$ 
the second equality following from Exercise 1.18 p.~10 of the book. 
\end{proof} 

\begin{lem}
We have $r\left(\ppp^{(n_1)}\cdots\ppp^{(n_k)}\right)=\ppp$. 
\end{lem}
\begin{proof}
This follows from Exercise 1.13iii p.~9 of the book and Lemma~\ref{413a} above.
\end{proof}

\begin{lem}\label{413b}
The ideal $\ppp^{(n)}$ is the smallest $\ppp$-primary ideal containing $\ppp^n$. 
\end{lem}
\begin{proof}
We have $(\ppp^{(n)})_\ppp=\ppp_\ppp^{n}\subset\ppp_\ppp$ by Lemma~\ref{413c}. As $\ppp_\ppp$ is maximal, the ideal $\ppp^n_\ppp$ is $\ppp_\ppp$-primary. Using contraction we see that $\ppp^{(n)}$ is $\ppp$-primary. Assuming 
$$
\ppp^n\subset\qqq\subset\ppp
$$ 
with $\qqq$ a $\ppp$-primary ideal, we get $\ppp^n_\ppp\subset\qqq_\ppp\subset\ppp_\ppp$, and thus $\ppp^{(n)}\subset\qqq\subset\ppp$. 
\end{proof}

\begin{lem}
Let $\aaa$ be a decomposable ideal such that $\ppp^n\subset\aaa\subset\ppp^{(n)}$, then $\ppp^{(n)}$ is the $\ppp$-primary component of $\aaa$. 
\end{lem}
\begin{proof}
This follows from Corollary~\ref{410}b p.~\pageref{410} and Lemma~\ref{413b} above.
\end{proof}

Note that there is a typo at the end of the statement of the Exercise in the book: Part (iv) should be: 
$$
\ppp^{(n)}=\ppp^n\iff\ppp^n\text{ is }\ppp\text{-primary.}
$$ 

\subsection{Page 56, Exercise 4.14}%

\textbf{Statement.} Let $\aaa$ be a decomposable ideal in a ring $A$ and let $\ppp$ be a maximal element of the set of ideals $(a:x)$, where $x\in A$ and $x\notin\aaa$. Show that $\ppp$ is a prime ideal belonging to $\aaa$.

\textbf{Solution.} By Corollary~\ref{c45} p.~\pageref{c45} above (which is a corollary to the First Uniqueness Theorem, that is to Theorem 4.5 p.~52 of the book), it suffices to show that $(\aaa:x)$ is prime. If not there would be $y,z\in A$ such that 
$$
y\notin(\aaa:x),\quad z\notin(\aaa:x),\quad yz\in(\aaa:x),
$$ 
that is 
$$
xy\notin\aaa,\quad xz\notin\aaa,\quad xyz\in\aaa.
$$ 
This implies 
$$
y\in(\aaa:xz)\supset(\aaa:x)\not\ni y,
$$ 
contradicting the maximality of $(\aaa:x)$. 

\subsection{Page 56, Exercise 4.15}%

\textbf{Statement.} Let $\aaa$ be a decomposable ideal in a ring $A$, let $\Sigma$ be an isolated set of prime ideals belonging to $\aaa$, and let $\qqq_\Sigma$ be the intersection of the corresponding primary components. Let $f$ be an element of $A$ such that, for each prime ideal $\ppp$ belonging to $\aaa$, we have $f\in\ppp\iff\ppp\notin\Sigma$, and let $S_f$ be the set of all powers of $f$. Show that $\qqq_\Sigma=S_f(\aaa)=(a:f^n)$ for all large $n$.

\textbf{Stolution.} We can assume that $\aaa=\qqq_1\cap\cdots\cap\qqq_n$ is a minimal primary decomposition, and that, setting $\ppp_i:=r(\qqq_i)$, we have $\Sigma=\{\ppp_1,\dots\ppp_m\}$. The equality $\qqq_\Sigma=S_f(\aaa)$ follows from Proposition 4.9 p.~54 of the book. Proposition 3.11ii p.~41 of the book implies $S_f(\aaa)=\bigcup_{k\ge0}(\aaa:f^k)$. We have 
\begin{equation}\label{afk}
(\aaa:f^k)=(\qqq_1:f^k)\cap\cdots\cap(\qqq_n:f^k).
\end{equation} 
Using Lemma 4.4 p.~51 we see that  

$\bu$ if $1\le i\le m$, then $(\qqq_i:f^k)=\qqq_i$,  

$\bu$ if $m+1\le i\le n$ and $k$ is large enough, then $f^k\in\qqq_i$, and thus $(\qqq_i:f^k)$ $=(1)$.

In view of \eqref{afk} this entails $(\aaa:f^k)=\qqq_\Sigma$ for $k$ large enough.

\subsection{Page 56, Exercise 4.16}%

\textbf{Statement.} If $A$ is a ring in which every ideal has a primary decomposition, show that every ring of fractions $S^{-1}A$ has the same property.

\textbf{Solution.} This follows from Proposition 3.11i p.~41 and Proposition 4.9 p.~54.

\subsection{Page 56, Exercise 4.17}%https://math.stackexchange.com/q/2375591/660 - previous version https://docs.google.com/document/d/1jO2WMu4veaXNHTd_D2QJ89QwvbGW_KaqyJPpb02RU4I/edit

\subsubsection{Statement}\label{417}%Here is the statement of the exercise:

Let $A$ be a ring with the following property.

(L1) For every ideal $\mathfrak a\ne(1)$ in $A$ and every prime ideal $\mathfrak p$, there exists $x\notin\mathfrak p$ such that $S_{\mathfrak p}(\mathfrak a)=(\mathfrak a:x)$, where $S_{\mathfrak p}=A\setminus\mathfrak p$.

Then every ideal in $A$ is an intersection of (possibly infinitely many) primary ideals.

\subsubsection{First solution}%

Let $\aaa'$ be the intersection of all the primary ideals containing $\aaa$, and let us assume  
\begin{equation}\label{abs417}
\aaa<\aaa'.
\end{equation} 
It suffices to reach a contradiction.

\begin{df} 
An \emph{admissible quadruple} is a quadruple $(\bbb,\ppp,\qqq,x)$ such that 

$\bu\ \bbb$ is an ideal $\ne(1)$ in $A$, 

$\bu\ \mathfrak p$ is a minimal element of the set of prime ideals containing $\bbb$, 

$\bu\ \mathfrak q=S_{\mathfrak p}(\bbb)$, 

$\bu\ x\in A\setminus\ppp$ satisfies $\mathfrak q=(\bbb:x)$. 
\end{df}

\begin{lem}\label{l417}
 \emph{(a)} For all $\bbb\ne(1)$ there is an admissible quadruple 
 $$
 (\bbb,\ppp,\qqq,x).
 $$

\emph{(b)} If $(\bbb,\ppp,\qqq,x)$ is an admissible quadruple, then 

\emph{(b1)} $\mathfrak q$ is $\mathfrak p$-primary, 

\emph{(b2)} $\bbb=\mathfrak q\cap(\bbb+(x))$.
\end{lem}

\begin{proof} 
Part (a) follows from Assumption (L1). Part (b1) follows from Exercise 4.11 p.~56 of the book (see Section~\ref{411} p.~\pageref{411} above). Let us prove (b2). Set $\bbb':=\mathfrak q\cap(\bbb+(x))$. The inclusion $\bbb\subset\bbb'$ is obvious. To prove the other inclusion, let $\beta+ax\in\qqq$ with $\beta\in\bbb,a\in A$. It suffices to show $ax\in\bbb$. Recall that $\qqq=S_{\ppp}(\bbb)=(\bbb:x)$. As $ax\in\qqq$, we have $ax^2\in\bbb$, hence 
$$
a\in(\bbb:x^2)\subset\bigcup_{s\notin\ppp}\ (\bbb:s)=S_{\ppp}(\bbb)=(\bbb:x)
$$ 
by Proposition 3.11ii p.~41 of the book, and thus $ax\in\bbb$, as desired. 
\end{proof}

Note that we have 
$$
\bbb\subset\qqq\subset\ppp\not\ni x.
$$
Let $\kappa$ be a cardinal larger than the cardinality of $A$, and let $W$ be the set of all ordinals $\le\kappa$. We will define, by induction on $\alpha\in W$, a map 
\begin{equation}\label{e417a}
\alpha\mapsto(\aaa_\alpha,\ppp_\alpha,\qqq_\alpha,x_\alpha)
\end{equation}
from $W$ to the set of admissible quadruples, such that 

(a) $\aaa_0=\aaa$, 

(b) the map 
\begin{equation}\label{e417b}
\alpha\mapsto\aaa_\alpha\text{ is increasing,}
\end{equation} 
(c) each ordinal $\alpha\in W$ satisfies 
\begin{equation}\label{e417c}
\aaa=\aaa_\alpha\cap\bigcap_{\beta<\alpha}\qqq_\beta.
\end{equation}
\begin{df}\label{calpha}
We call \eqref{e417c} Condition $\oo C(\alpha)$. 
\end{df}

Lemma~\ref{l417}b1 will imply that $\qqq_\alpha$ is primary for all $\alpha\in W$. 

The existence of \eqref{e417a} satisfying \eqref{e417b} will give the desired contradiction.

Here is the key point:

\emph{Assume that $(\aaa_\beta,\ppp_\beta,\qqq_\beta,x_\beta)$ has been constructed for $\beta<\alpha$, and that $\aaa_\alpha$ has been defined and satisfies Condition $\oo C(\alpha)$. Then Assumption~\eqref{abs417} and Lemma~\ref{l417}b1 imply $\aaa_\alpha\ne(1)$. In particular there is, by Lemma~\ref{l417}a, an admissible quadruple} $(\aaa_\alpha,\ppp_\alpha,\qqq_\alpha,x_\alpha)$.

We embark on the construction of \eqref{e417a}.

$\bu$ The case of the zero ordinal. The ideal $\aaa_0$ is the ideal $\aaa$ given in the statement of the exercise, and we choose $\ppp_0,\qqq_0,x_0$ in such a way that $(\aaa_0,\ppp_0,\qqq_0,x_0)$ is admissible. Condition~$\oo C(0)$ holds trivially.

$\bu$ From $\alpha$ to $\alpha+1$. Let $\alpha\in W$ be such that $\alpha+1\in W$, and assume that $(\aaa_\beta,\ppp_\beta,\qqq_\beta,x_\beta)$ has already been constructed for $\beta\le\alpha$ and that Condition $\oo C(\alpha)$ holds. 

We claim: 
$$
(\aaa_\alpha+(x_\alpha))\cap\bigcap_{\beta\le\alpha}\qqq_\beta=\aaa.
$$ 
Proof of the claim: It suffices to prove the inclusion $\subset$. In view of Condition $\oo C(\alpha)$, it even suffices to prove 
$$
(\aaa_\alpha+(x_\alpha))\cap\bigcap_{\beta\le\alpha}\qqq_\beta\subset\aaa_\alpha.
$$ 
But we have 
$$
(\aaa_\alpha+(x_\alpha))\cap\bigcap_{\beta\le\alpha}\qqq_\beta\subset(\aaa_\alpha+(x_\alpha))\cap\qqq_\alpha=\aaa_\alpha.
$$ 
by Lemma~\ref{l417}b2. $\square$

By the claim, the ideal $\aaa_{\alpha+1}:=\aaa_\alpha+(x_\alpha)$ satisfies $\oo C(\alpha+1)$. In particular $\aaa_{\alpha+1}\ne(1)$ by Assumption~\eqref{abs417} and Lemma~\ref{l417}b1. We define $\ppp_{\alpha+1},\qqq_{\alpha+1},x_{\alpha+1}$ in such a way that $(\aaa_{\alpha+1},\ppp_{\alpha+1},\qqq_{\alpha+1},x_{\alpha+1})$ is admissible (see Lemma~\ref{l417}a).

% previous version: By the claim, there is an ideal $\aaa_{\alpha+1}$ containing $\aaa_\alpha+(x_\alpha)$ which is maximal subject to the constraint $\oo C(\alpha+1)$. In particular $\aaa_{\alpha+1}\ne(1)$ by Assumption~\eqref{abs417} and Lemma~\ref{l417}b1. We define $\ppp_{\alpha+1},\qqq_{\alpha+1},x_{\alpha+1}$ in such a way that $(\aaa_{\alpha+1},\ppp_{\alpha+1},\qqq_{\alpha+1},x_{\alpha+1})$ is admissible (Lemma~\ref{l417}a).

$\bu$ The case of a limit ordinal. Assume now that $\gamma\in W$ is a limit ordinal, and set 
$$
\aaa_\gamma:=\sum_{\alpha<\gamma}\aaa_\alpha=\bigcup_{\alpha<\gamma}\aaa_\alpha.
$$ 
We claim that Condition $\oo C(\gamma)$ holds.

Proof of the claim: We must show 
$$
\left(\bigcup_{\alpha<\gamma}\aaa_\alpha\right)\cap\left(\bigcap_{\beta<\gamma}\qqq_\beta\right)=\aaa.
$$ 
Inclusion $\supset$ being clear, it suffices to prove $\subset$. Let $x$ be in the left side. There is an $\alpha<\gamma$ such that 
$$
x\in\aaa_\alpha\cap\bigcap_{\beta<\gamma}\qqq_\beta\subset\aaa_\alpha\cap\bigcap_{\beta<\alpha}\qqq_\beta=\aaa.
$$ 
This proves Condition $\oo C(\gamma)$. 

In particular $\aaa_\gamma\ne(1)$. We define $\ppp_\gamma,\qqq_\gamma,x_\gamma$ in such a way that 
$$
(\aaa_\gamma,\ppp_\gamma,\qqq_\gamma,x_\gamma)
$$ 
is admissible (Lemma~\ref{l417}a).

Now the map \eqref{e417a} is defined. The map $\alpha\mapsto\aaa_\alpha$ is clearly increasing. As already indicated, this is a contradiction.

This completes the solution to Exercise 4.17. 

\subsubsection{Second solution}\label{for418}%\subsection{Part 2}% previous version https://docs.google.com/document/d/1DnCzzLfgWzv6XqiA-2PiOudOTof99MIeD9ejViIJwUY/edit

The following variant of the above proof will be used to solve Exercise 4.18. 

We stop assuming \eqref{abs417}. 

Let $Q$ be the set of admissible quadruples. We define a map 
$$
f:W\to Q\cup\{\varnothing\}
$$ 
(note that the union is disjoint) as follows:

$\bu$ We assume $\aaa\ne(1)$ and define $(\aaa_0,\ppp_0,\qqq_0,x_0)$ as before, and we set 
$$
f(0):=(\aaa_0,\ppp_0,\qqq_0,x_0).
$$
$\bu$ In the passage from $\alpha$ to $\alpha+1$, we define $f(\alpha+1)$ as follows (assuming that $f(\alpha)$ has already been defined):

If $f(\alpha)=\varnothing$ we set $f(\alpha+1):=\varnothing$. 

Otherwise there is an ideal $\aaa_{\alpha+1}$ containing $\aaa_\alpha+(x_\alpha)$ which is maximal subject to the constraint $\oo C(\alpha+1)$ (see Definition~\ref{calpha} p.~\pageref{calpha}). 

If $\aaa_{\alpha+1}\ne(1)$ we define $\ppp_{\alpha+1},\qqq_{\alpha+1},x_{\alpha+1}$ in such a way that 
$$
(\aaa_{\alpha+1},\ppp_{\alpha+1},\qqq_{\alpha+1},x_{\alpha+1})
$$ 
is admissible, as before, and we set 
$$
f(\alpha+1):=(\aaa_{\alpha+1},\ppp_{\alpha+1},\qqq_{\alpha+1},x_{\alpha+1}).
$$ 

If $\aaa_{\alpha+1}=(1)$ we set $f(\alpha+1):=\varnothing$.

$\bu$ In the case of a limit ordinal $\gamma$, we define $f(\gamma)$ as follows (assuming that $f(\alpha)$ has already been defined for $\alpha<\gamma$):

If $f(\alpha)=\varnothing$ for some $\alpha<\gamma$ we set $f(\gamma)=\varnothing$.

Otherwise we define $\aaa_\gamma$ as before.

If $\aaa_\gamma\ne(1)$ we define $\ppp_\gamma,\qqq_\gamma,x_\gamma$ in such a way that $(\aaa_\gamma,\ppp_\gamma,\qqq_\gamma,x_\gamma)$ is admissible, as before, and we set 
$$
f(\gamma):=(\aaa_{\gamma},\ppp_{\gamma},\qqq_{\gamma},x_{\gamma}).
$$ 

If $\aaa_\gamma=(1)$ we set $f(\gamma)=\varnothing$.

This ends the definition of $f$.

Then there is a least $\zeta\in W$ such that $f(\zeta)=\varnothing$, and we get 
\begin{equation}\label{abak}
\aaa=\bigcap_{\alpha<\zeta}\qqq_\alpha.
\end{equation} 
\begin{note}\label{amaa}
The map $\alpha\mapsto\aaa_\alpha$ from the set $\{\alpha\in W\ |\ \alpha\le\zeta\}$ to the set of ideals of $A$ is increasing.
\end{note} 
The following lemma will be used to solve Exercise 4.18. 
\begin{lem}\label{lasker}
The map $n\mapsto\qqq_0\cap\cdots\cap\qqq_n$ from the set $\{n\in\mathbb N\ |\ n<\zeta\}$ to the set of ideals of $A$ is decreasing.
\end{lem}
\begin{proof}
Suppose by contradiction that we have 
$$
\qqq_0\cap\cdots\cap\qqq_{n-1}=\qqq_0\cap\cdots\cap\qqq_{n-1}\cap\qqq_n
$$ 
for some $n<\zeta$. Recall that $\aaa_n$ is maximal for 
\begin{equation}\label{an}
\aaa_n\supset\aaa_{n-1}+(x_{n-1})\text{ and }\aaa=\aaa_n\cap\qqq_0\cap\cdots\cap\qqq_{n-1}.
\end{equation} 
Similarly $\aaa_{n+1}$ is maximal for 
$$%\begin{equation}\label{anp}
\aaa_{n+1}\supset\aaa_n+(x_n)\text{ and }\aaa=\aaa_{n+1}\cap\qqq_0\cap\cdots\cap\qqq_{n-1}.
$$%\end{equation} 
As $\aaa_{n+1}$ satisfies \eqref{an} and contains $\aaa_n$, these two ideals coincide, in contradiction with Note~\ref{amaa}. 
\end{proof}

\subsection{Page 57, Exercise 4.18}%%

\subsubsection{Statement}%

Consider the following condition on a ring $A$:

(L2) Given an ideal $\mathfrak a$ and a descending chain 
$$
S_1\supset S_2\supset\cdots\supset S_n\supset\cdots
$$ 
of multiplicatively closed subsets of $A$, there exists an integer $n$ such that $S_n(\mathfrak a)=S_{n+1}(\mathfrak a)=\cdots$. %[Here $X\supset Y$ means that $Y$ is a (not necessarily proper) subset of $X$.]

Prove that the following are equivalent:

(i) Every ideal in $A$ has a primary decomposition;

(ii) $A$ satisfies (L1) and (L2).

[See Section~\ref{417} p.~\pageref{417} for the definition of (L1).]

\subsubsection{Solution}%

(i)$\implies$(L1): Let $\aaa=\qqq_1\cap\cdots\cap\qqq_n$ be a minimal primary decomposition. Set $\ppp_i:=r(\qqq_i)$ and let $\ppp$ be a prime ideal. We can assume that $\ppp_i\subset\ppp$ if and only if $i\le m$. Proposition 4.9 p.~54 of the book entails $S_\ppp(\aaa)=\qqq_1\cap\cdots\cap\qqq_m$. For $m+1\le i\le n$ there is an element $y_i$ which is in $\qqq_i$ but not in $\ppp$. Then $y:=y_{m+1}\cdots y_n$ is in $\qqq_{m+1}\cap\cdots\cap\qqq_n$ but not in $\ppp$, and we get 
$$
(\aaa:y)
$$
$$
\begin{matrix}
=&(\qqq_1:y)\cap\cdots\cap(\qqq_m:y)&\cap&(\qqq_{m+1}:y)\cap\cdots\cap(\qqq_n:y)\\ \\ 
=&\qqq_1\cap\cdots\cap\qqq_m&\cap&(1)\cap\cdots\cap(1)
\end{matrix}
$$
$$
=\qqq_1\cap\cdots\cap\qqq_m=S_\ppp(\aaa),
$$ 
the second equality following from Lemma 4.4 p.~51 of the book.

(i)$\implies$(L2): Follows from Proposition 4.9 p.~54 of the book.

(ii)$\implies$(i): %I haven't been able to prove that. Here is what I've done so far:
Consider the map 
$$
\alpha\mapsto(\aaa_\alpha,\ppp_\alpha,\qqq_\alpha,x_\alpha)
$$
from $W$ to the set of admissible quadruples defined in Section~\ref{for418} above, and let $\zeta$ be defined as in \eqref{abak}. 

It suffices to show that $\zeta$ in finite. 

Assume by contradiction that $\zeta$ is infinite.

Recall that \eqref{e417c} p.~\pageref{e417c} is called Condition $\oo C(\alpha)$, and that $\qqq_\alpha$ is primary for all $\alpha<\zeta$. For the reader's convenience let us rewrite $\oo C(\alpha)$:
$$
\aaa=\aaa_\alpha\cap\bigcap_{\beta<\alpha}\qqq_\beta.
$$ 
This holds for all $\alpha<\zeta$.

Setting $S_n:=S_{\ppp_0}\cap\cdots\cap S_{\ppp_n}$ for $n\in\mathbb N$, we get, in view of $\oo C(n+1)$ and Exercise 4.12i p.~56 of the book, 
$$
S_n(\aaa)=S_n(\aaa_{n+1})\cap S_n(\qqq_0\cap\cdots\cap\qqq_n).
$$ 
We claim $S_n(\aaa_{n+1})=(1)$, and thus $S_n(\aaa)=S_n(\qqq_0\cap\cdots\cap\qqq_n)$.

To prove this it suffices to show $S_n\cap\aaa_{n+1}\ne\varnothing$. Assume by contradiction $S_n\cap\aaa_{n+1}=\varnothing$, that is $\aaa_{n+1}\subset\ppp_0\cup\cdots\cup\ppp_n$. Then Proposition 1.11i p.~8 of the book implies $\aaa_{n+1}\subset\ppp_i$ for some $0\le i\le n$. This yields $x_i\in\aaa_{i+1}\subset\aaa_{n+1}\subset\ppp_i$, a contradiction. This proves the equality $S_n(\aaa_{n+1})=(1)$.

Proposition 4.9 p.~54 of the book implies 
$$
S_n(\qqq_0\cap\cdots\cap\qqq_n)=\bigcap_{S_n\cap\ppp_i=\varnothing}\qqq_i=\qqq_0\cap\cdots\cap\qqq_n,
$$ 
and we get
$$
S_n(\aaa)=\qqq_0\cap\cdots\cap\qqq_n.
$$ 
Now (L2) and Lemma~\ref{lasker} p.~\pageref{lasker} give the desired contradiction.

\subsection{Page 57, Exercise 4.19}%

\textbf{Statement.}

(a) Let $A$ be a ring and $\mathfrak p$ a prime ideal of $A$. Show that every $\mathfrak p$-primary ideal contains $S_{\mathfrak p}(0)$, the kernel of the canonical homomorphism $A\to A_{\mathfrak p}$.

(b) Suppose that $A$ satisfies the following condition: for every prime ideal $\mathfrak p$, the intersection of all $\mathfrak p$-primary ideals of $A$ is equal to $S_{\mathfrak p}(0)$. (Noetherian rings satisfy this condition: see Chapter 10\footnote{See Corollary 10.21 p.~111 of the book.}.) Let $\mathfrak p_1,\dots,\mathfrak p_n$ be distinct prime ideals, none of which is a minimal prime ideal of $A$. Then there exists an ideal $\mathfrak a$ in $A$ whose associated prime ideals are $\mathfrak p_1,\dots,\mathfrak p_n$.

[Proof of (b) by induction on $n$. The case $n=1$ is trivial (take $\mathfrak a=\mathfrak p_1$). Suppose $n>1$ and let $\mathfrak p_n$ be maximal in the set $\{\mathfrak p_1,\dots,\mathfrak p_n\}$. By the inductive hypothesis there exists an ideal $\mathfrak b$ and a minimal primary decomposition $\mathfrak b=\mathfrak q_1\cap\dots\cap\mathfrak q_{n-1}$, where each $\mathfrak q_i$ is $\mathfrak p_i$-primary. If $\mathfrak b\subset S_{\mathfrak p_n}(0)$ let $\mathfrak p$ be a minimal prime ideal of $A$ contained in $\mathfrak p_n$. Then $S_{\mathfrak p_n}(0)\subset S_{\mathfrak p}(0)$, hence $\mathfrak b\subset S_{\mathfrak p}(0)$. Taking radicals and using Exercise 10, we have $\mathfrak p_1\cap\dots\cap\mathfrak p_{n-1}\subset\mathfrak p$, hence some $\mathfrak p_i\subset \mathfrak p$, hence $\mathfrak p_i=\mathfrak p$ since $\mathfrak p$ is minimal. This is a contradiction since no $\mathfrak p_i$ is minimal. Hence $\mathfrak b\not\subset S_{\mathfrak p_n}(0)$ and therefore\footnote{By the condition in the first sentence of (b).} there exists a $\mathfrak p_n$-primary ideal $\mathfrak q_n$ such that $\mathfrak b\not\subset\mathfrak q_n$. Show that $\mathfrak a=\mathfrak q_1\cap\dots\cap\mathfrak q_n$ has the required properties.]

End of the statement.

\textbf{Solution.}

Proof of (a): If $\qqq$ is $\ppp$-primary, then we have $(0)\subset\qqq_\ppp\subset A_\ppp$, and thus $S_\ppp(0)=(0)^{\oo c}\subset(\qqq_\ppp)^{\oo c}=\qqq\subset A$. 

Proof of (b): The following argument was explained to me by user withoutfeather over on Mathematics Stackexchange: 

\href{https://math.stackexchange.com/a/3338211/660}{https://math.stackexchange.com/a/3338211/660}

Assume that $\mathfrak{a}=\mathfrak{q}_1\cap\cdots\cap\mathfrak{q}_n$ is \textbf{not} reduced. %a minimal primary decomposition. 

Since $\mathfrak{q}_n\not\supset\mathfrak{q}_1\cap\cdots\cap\mathfrak{q}_{n-1}$, there is an index $i$ with $1\leq i\leq n-1$ such that $\mathfrak{q}_i$ contains the intersection of the other $\qqq_j$. We can assume that $i=1$, i.e. 
$$
\mathfrak{q}_1\supset\mathfrak{q}_2\cap\cdots\cap\mathfrak{q}_n.
$$ 
By induction hypothesis, $\mathfrak{q}_1\not\supset\mathfrak{q}_2\cap\cdots\cap\mathfrak{q}_{n-1}$, so there exists 
$$
x\in(\mathfrak{q}_2\cap\cdots\cap\mathfrak{q}_{n-1})\setminus\mathfrak{q}_1.
$$ 
On the other hand, we have $\mathfrak{p}_1=r(\mathfrak{q}_1)\not \supset \mathfrak{q}_n$. Indeed, $\mathfrak{p}_1\supset \mathfrak{q}_n$ would imply $\mathfrak{p}_1\supset \mathfrak{p}_n$ and, since $\mathfrak{p}_n$ is maximal in $\{\mathfrak{p}_1,\dots,\mathfrak{p}_n\}$, we would have $\mathfrak{p}_1=\mathfrak{p}_n$, a contradiction. Hence there exists 
$$
y\in\mathfrak{q}_n\setminus\mathfrak{p}_1.
$$ 
Then the product $xy$ is in $\mathfrak{q}_2\cap\cdots\cap\mathfrak{q}_n\subset\mathfrak{q}_1$. But this is impossible since $x$ is not in $\qqq_1$ and $y$ is not in $\ppp_1$. 

\subsection{Page 57, Exercise 4.20}%

Analogue of (ii): $r_A(r_M(N))=r_M(N)$. 

Analogue of (iii): $r_M(N\cap P)=r_M(N)\cap r_M(P)$. 

Analogue of (iv): $r_M(N)=(1)\iff N=M$.

Analogue of (v): $r_A(r_M(N)+r_M(P))\subset r_M(N+P)$. As pointed out by Jeffrey Daniel Kasik Carlson in\medskip 

\centerline{\href{https://goo.gl/WEfMG7}{https://goo.gl/WEfMG7}}

p.~70, the converse is false: set 
$$
A\ne0,\quad M=A\oplus A,\quad N=A\oplus(0),\quad P=(0)\oplus A.
$$ 
This yields $M=N+P$, so $r_M(N+P)=(1)$, but $r_M(N)=r_M(P)=0$. 

\subsection{Page 57, Exercise 4.21}%

Analogue of (4.3): In the statement and the proof of (4.3) one can replace each occurrence of $\qqq$ with $Q$ and each occurrence of $r$ with $r_M$. 

% comment removed https://docs.google.com/document/d/1iHEeT74tVvnD4cKxwB7h1dJYzhqRd9YZpq7cD6BrO90/edit

Analogue of (4.4): For the analogues of (i) and (ii), replace $\qqq$ with $Q$ and $x\in A$ with $x\in M$. I see no analogue of (iii). For the proof of (ii), one can modify the text of the book according to the following table:  
%$$\begin{matrix}y\in(\qqq:x)&xy\in\qqq&x\notin\qqq&\qqq\subset(\qqq:x\subset\ppp&r(\qqq:x)=\ppp\\ \\y\in(Q:x)&yx\in Q&x\notin Q&(Q:M)\subset(Q:x)\subset\ppp&r(Q:x)=\ppp\end{matrix}$$ 
$$
\begin{array}{|c|c|c|c|c|}\hline
y\in(\qqq:x)&xy\in\qqq&x\notin\qqq&\qqq\subset(\qqq:x)\subset\ppp&r(\qqq:x)=\ppp\\ \hline
y\in(Q:x)&yx\in Q&x\notin Q&(Q:M)\subset(Q:x)\subset\ppp&r(Q:x)=\ppp\\ \hline
\end{array}
$$ 
Continuation of the table:
$$
\begin{array}{|c|c|c|c|}\hline
yz\in(\qqq:x)&xyz\in\qqq&xz\in\qqq&z\in(\qqq:x)\\ \hline
yz\in(Q:x)&yzx\in Q&zx\in Q&z\in(Q:x)\\ \hline
\end{array}
$$ 

\subsection{Page 58, Exercise 4.22}%

Analogue of (4.5): 
$$
\begin{array}{|c|c|c|c|c|}\hline
\aaa&\qqq_i&r(\qqq_i)&x\in A&x_i\notin\qqq_i\\ \hline 
N&Q_i&r_M(Q_i)&x\in M&x_i\notin Q_i\\ \hline
\end{array}
$$ 

\subsection{Page 58, Exercise 4.23}%

Analogues of (4.6)-(4.11), assuming $N=0$: 

(4.6):
$$
\begin{array}{|c|c|c|c|}\hline
\aaa\subset A&\ppp\supset\aaa&\ppp\supset\aaa=\bigcap\qqq_i&r(\qqq_i)\\ \hline 
0\subset M&\ppp\supset(0:M)&\ppp\supset(0:M)=\bigcap(Q_i:M)&r(Q_i:M)\\ \hline
\end{array}
$$ 
(4.7): Replace 

``if the zero ideal is decomposable, the set $D$ of zero-divisors of $A$ is the union of the prime ideals belonging to $0$'' 

with 

``if the zero submodule of $M$ is decomposable, the set $D$ of zero-divisors of $A$ in $M$ is the union of the prime ideals belonging to $0\subset M$''

(4.8): (i) If $S\cap\ppp\ne\varnothing$, then $S^{-1}Q=S^{-1}M$: Let $s\in S\cap\ppp$ and $x\in M$. We get $s^n\in(Q:M)$, that is $s^nM\subset Q$, for some $n$, and thus 
$$
\frac x1=\frac{s^nx}{s^n}\in S^{-1}Q.
$$ 
(ii) If $S\cap\ppp=\varnothing$, then $S^{-1}Q$ is $S^{-1}\ppp$-primary and its contraction in $M$ is $Q$. Hence primary ideals correspond to primary ideals in the correspondence between submodules in $S^{-1}M$ and contracted submodules in $M$.

Let us show $r(S^{-1}Q:S^{-1}M)=S^{-1}\ppp$. Let us check $(S^{-1}Q:S^{-1}M)^{\text c}\subset (Q:M)$. Let $a$ be in $(S^{-1}Q:S^{-1}M)^{\text c}$, that is $a/1\in (S^{-1}Q:S^{-1}M)$, and let $x$ be in $M$. It suffices to verify $ax\in Q$. We have  
$$
\frac{ax}1=\frac a1\frac x1\in S^{-1}Q,
$$ 
that is 
$$
\frac{ax}1=\frac ys
$$ 
with $y\in Q$, $s\in S$, and thus $stax=ty\in Q$ for some $t\in S$. As $Q$ is $\ppp$-primary and $st\notin\ppp$, this implies $ax\in Q$, as was to be shown. 

The remaining part of (4.8) is left to the reader.

For (4.9), (4.10) and (4.11) we use the table
$$
\begin{array}{|c|c|c|}\hline
\aaa\subset A&\qqq_i&r(\qqq_i)\\ \hline 
0\subset M&Q_i&r(Q_i:M)\\ \hline
\end{array}
$$ 

\subsection{Primary decomposition of a submodule after Bourbaki}%

% Bourbaki https://docs.google.com/document/d/15j_JjYfsyrM7Et-PvKQLXjNOYUnEAUVqT7gR0HlbLXA/edit

We follow closely Bourbaki's \textbf{Algèbre commutative}, Chapter IV. Unless otherwise stated, $A$ is a commutative ring with one and $M$ is an $A$-module. For any element $a$ of $A$ and any $A$-module $M$ write $a_M$ for the map $x\mapsto ax$, $M\to M$

%\subsubsection{Associated prime ideals}%

\begin{df}
Let $M$ be an $A$-module. We say that a prime ideal $\ppp$ of $A$ is \emph{associated} to $M$ if there is an $x\in M$ such that  $\ppp$ is the annihilator of $x$. We write $\Ass(M)$ for the set of those prime ideals of $A$ which are associated to $M$. 
\end{df}

The annihilator of the zero module being the unit ideal, an element $x\in M$ whose annihilator is prime is nonzero. 

\begin{lem}\label{ail0}
Let $\ppp$ be a prime ideal of $A$. Then $\ppp$ is associated to $M$ if and only if $M$ contains a submodule $N$ isomorphic to $A/\ppp$, in which case we can take $N:=Ax$ for any $x\in M$ whose annihilator is $\ppp$. 
\end{lem}
\begin{proof}
This is clear.
\end{proof}

If $M$ is the union of a family $(M_i)_{i\in I}$ of submodules, we clearly have
\begin{equation}\label{ai1}
\Ass(M)=\bigcup_{i\in I}\Ass(M_i).
\end{equation}

\begin{prop}\label{aip1}
For all prime ideal $\ppp$ of $A$ and all nonzero submodule $M$ of $A/\ppp$ we have $\Ass(M)=\{\ppp\}$. 
\end{prop}
\begin{proof}
As $A/\ppp$ is a domain, the annihilator in $A$ of any of its nonzero element is $\ppp$.
\end{proof}

\begin{prop}\label{aip2}
Let $\aaa$ be an ideal of $A$ which is maximal among all ideals of the form $\Ann(x)$, $x\in M\setminus\{0\}$. Then $\aaa$ is prime, and thus $\aaa\in\Ass(M)$.
%Any maximal element of the set of all ideals $\Ann(x)$, with $x\in M\setminus\{0\}$, is in $\Ass(M)$.
\end{prop}
\begin{proof}
Let $x$ and $\aaa$ % $\aaa=\Ann(x)$ and $x\in M\setminus\{0\}$, 
be as above. %such a maximal element; 
It suffices to check that $\aaa$ is prime. As $x\ne0$, we have $\aaa\ne(1)$. Let $b,c$ be elements of $A$ such that $bc\in\aaa$ and $c\notin\aaa$. We get $cx\ne0$, $b\in\Ann(cx)$ and $\aaa\subset\Ann(cx)$. As $\aaa$ is maximal, this implies $\Ann(cx)=\aaa$, whence $b\in\aaa$. This shows that $\aaa$ is prime.
\end{proof}
\begin{cor}\label{iac1}
If $A$ is a noetherian ring and $M$ an $A$-module, then the conditions $M=0$ and $\Ass(M)=\varnothing$ are equivalent.
\end{cor}
\begin{proof}
If $M=0$, then $\Ass(M)$ is empty (even if $A$ were not noetherian). If $M\ne0$, the set $S$ of all ideals of the form $\Ann(x)$, $x\in M\setminus\{0\}$, is nonempty and $(1)\notin S$; as $A$ is noetherian, this set has a maximal element; and Proposition~\ref{aip2} gives the desired conclusion.
\end{proof}
\begin{cor} Let $A$ be noetherian, let $a$ be in $A$ and let $M$ be an $A$-module. Then $a_M$ is injective if and only if $a$ belongs to no prime ideal associated to $M$.
\end{cor}
\begin{proof}
If $a\in\ppp\in\Ass(M)$, we have $\ppp=\Ann(x)$ for some $x\in M\setminus\{0\}$, and the equality $ax=0$ shows that $a_M$ is not injective. Conversely, if $ax=0$ for some $x\in M\setminus\{0\}$, we get $Ax\ne0$, whence $\Ass(Ax)\ne\varnothing$ (Corollary~\ref{iac1}). Let $\ppp\in\Ass(Ax)$; we obviously have $\ppp\in\Ass(M)$ and $\ppp=\Ann(bx)$ for some $b\in A$; whence $a\in\ppp$ since $abx=0$. 
\end{proof}
\begin{cor}%COROLLAIR3E. - 
The set of all zero-divisors in a noetherian ring $A$ is the union of the ideals $\ppp\in\Ass(A)$.
\end{cor}
\begin{prop}\label{aip3}%PROPOSIT3IO. -N 
If $N$ is a submodule of $M$, we have 
$$
\Ass(N)\subset\Ass(M)\subset\Ass(N)\cup\Ass(M/N).
$$
\end{prop}
\begin{proof}
The inclusion $\Ass(N)\subset\Ass(M)$ is obvious. Let $\ppp\in\Ass(M)$. By Lemma~\ref{ail0} there is a submodule $E$ of $M$ isomorphic to $A/\ppp$. Set $F:=E\cap N$. If $F=0$, then $E$ is isomorphic to a submodule of $M/N$, and (again by Lemma~\ref{ail0}) $\ppp\in\Ass(M/N)$. If $F\ne0$, the annihilator of any nonzero element of $F$ is $\ppp$ (Proposition~\ref{aip1}), hence $\ppp\in\Ass(N)$.
\end{proof}

\begin{lem}\label{aimyl1}
If $A$ is a noetherian ring, and if $(N_i)_{i\in I}$ is a family of submodules of an $A$-module $M$ such that the intersection of the $\Ass(N_i)$ is empty, then the intersection of the $N_i$ is the zero submodule.
\end{lem}
\begin{proof}
This follows from Corollary~\ref{iac1} and Proposition~\ref{aip3}.
\end{proof}

\begin{cor}\label{aic1}%COROLLAIR1E. - 
If $M$ is the direct sum of a family $(M_i)_{i\in I}$ of submodules, then $\Ass(M)$ is the union of the $\Ass(M_i)$.%$$\Ass(M)=\bigcup_{i\in I}\Ass(M_i).$$
\end{cor}
\begin{proof}
By \eqref{ai1} we can assume that $I$ is finite. Arguing by induction, we see that it suffices to handle the case $I=\{1,2\}$. But this case follows from Proposition~\ref{aip3}.
\end{proof}

\begin{cor}\label{aimc11}%COROLLAIR2E. - 
Let $M$ be an $A$-module and $Q_1,\dots,Q_n$ submodules of $M$. If the intersection of the $Q_i$ is $0$, then $\Ass(M)$ is contained in the union of the $\Ass(Q_i)$, and thus $\Ass(M)$ coincides with the union of the $\Ass(Q_i)$
\end{cor}
\begin{proof}
The canonical map $M\to\bigoplus(M/Q_i)$ being injective, it suffices to apply Proposition~\ref{aip3} and Corollary~\ref{aic1}.
\end{proof}

\begin{prop}\label{aip4}%PROPOSITIO4
Given $\Psi\subset\Ass(M)$ there is a submodule $N$ of $M$ such that 
$$
\Ass(N)=\Ass( M )\setminus\Psi\text{ and }\Ass(M/N)=\Psi.
$$ 
\end{prop}
\begin{proof}
Let $\Sigma$ be the set of those submodules $P$ of $M$ such that $\Ass(P)\subset\Ass( M )\setminus\Psi$. By \eqref{ai1} the set $\Sigma$, ordered by inclusion, is inductive; moreover the zero submodule belongs to $\Sigma$, so $\Sigma$ is nonempty. Let $N$ be a maximal element of $\Sigma$. We have $\Ass(N)\subset\Ass( M )\setminus\Psi$. By Proposition~\ref{aip3}, it suffices to prove $\Ass(M/N)\subset\Psi$. %\begin{equation}\label{ai2}\Ass(M/N)\subset\Psi.\end{equation}
Let $\ppp\in\Ass(M/N)$; then, by Lemma~\ref{ail0}, $M/N$ contains a submodule $F/N$ isomorphic to $A/\ppp$. By Propositions \ref{aip1} and \ref{aip3} we have $\Ass(F)\subset\Ass(N)\cup\{\ppp\}$. The maximality of $N$ implies $F\notin\Sigma$, and thus $\ppp\in\Psi$.
\end{proof}

\begin{prop}\label{aimyl2}
If $A$ is a noetherian ring and if $(\Psi_i)_{i\in I}$ is a family of subsets of $\Ass(M)$ whose union is $\Ass(M)$, then there is a family $(N_i)_{i\in I}$ of submodules of $M$ such that $\Ass(M/N_i)=\Psi_i$ for all $i$, and the intersection of the $N_i$ is the zero submodule.
\end{prop}
\begin{proof}
Write $M(\Psi)$ for the submodule denoted by $N$ in the proof of Proposition~\ref{aip4} and apply Lemma~\ref{aimyl1} to the $M(\Psi_i)$.%This follows from Lemma~\ref{aimyl1} and Proposition~\ref{aip4}, setting ...
\end{proof}

\begin{df}
Let $A$ be a noetherian ring. A submodule $N$ of an $A$-module $M$ is \emph{primary} if $\Ass(M/N)=\{\ppp\}$ for some prime ideal $\ppp$ of $A$, in which case one also says that $N$ is $\ppp$\emph{-primary}. 
\end{df}

Note that Bourbaki's definition given above is \textbf{not} equivalent to Atiyah and MacDonald's, as shown by the following example.

Let $K$ be a field, and $x$ and $y$ indeterminates. Set $A:=K[[x]]$, $M:=K[y]$, and define an $A$-module structure on $M$ by 
$$
\left(\sum a_nx^n\right)f:=\sum a_nf^{(n)},
$$ 
where $f^{(n)}$ is the $n$-th derivative of $f$. Then the zero submodule of $M$ is primary in Bourbaki's sense but is \textbf{not} an intersection of primary submodules in the sense of Atiyah and MacDonald.

The following consequence of Proposition~\ref{aimyl2} is stated as Theorem 2.2.1 in Somaya Muiny's thesis \href{https://scholarworks.gsu.edu/math_theses/70/}{https://scholarworks.gsu.edu/math\_theses/70/}

\begin{thm}[Somaya Muiny]\label{somaya}
If $M$ is a module over a noetherian ring $A$, then the intersection of its primary submodules is zero. More generally, if $N$ is submodule of an $A$-module $M$, then $N$ is the intersection of the primary submodules of $M$ which contain $N$. In fact, $N$ is the intersection of a family $(M(\ppp))_{\ppp\in\Ass(M/N)}$ of submodules containing $N$ such that each $M(\ppp)/N$ is $\ppp$-primary.
\end{thm}
\begin{proof}
Assuming $N=0$ without lost of generality, we apply Proposition~\ref{aimyl2} to the family $(\{\ppp\})_{\ppp\in\Ass(M)}$.
\end{proof}

\begin{prop}%\label{aimyl2}
Let $A$ be a noetherian ring and $M$ an $A$-module. Then the zero submodule of $M$ is the intersection of a finite family $(Q_1,\dots,Q_n)$ of primary submodules  of $M$ if and only if $\Ass(M)$ is finite, in which case $\Ass(M)$ is the disjoint union of the $\Ass(Q_i)$. There is a similar statement for an arbitrary submodule of $M$ (instead of the zero submodule).%the zero submodule of $M$ is the intersection of a family $(Q(\ppp))_{\ppp\in\Ass(M)}$ where each $Q(\ppp)$ is $\ppp$-primary. Let $A$ be a noetherian ring and $M$ an $A$-module. Then the zero submodule of $M$ is a finite intersection of primary submodules of $M$ if and only if $\Ass(M)$ is finite, in which case the zero submodule of $M$ is the intersection of a family $(Q(\ppp))_{\ppp\in\Ass(M)}$ where each $Q(\ppp)$ is $\ppp$-primary.
\end{prop}
\begin{proof}
This follows from Corollary~\ref{aimc11} and Theorem~\ref{somaya}.
\end{proof}

\section{About Chapter 5}%%%

\subsection{Page 61, Corollary 5.9}\label{59}%

Here is a slightly stronger statement: 

\emph{Let $A$ be a subring of a ring $B$ such that $B$ is integral over $A$; let $\qqq,\bbb$ be ideals of $B$ such that $\qqq$ is prime, $\qqq\subset\bbb$ and $\qqq^{\oo c}=\bbb^{\oo c}=\ppp$ say. Then $\qqq=\bbb$.}

Proof. Arguing as in the book, we see that $\ppp_\ppp\subset A_\ppp$ and $\qqq_\ppp\subset B_\ppp$ are maximal, and that we have $\qqq_\ppp\subset\bbb_\ppp\subset B_\ppp$. Proposition 3.11ii p.~41 of the book implies $\bbb_\ppp\ne B_\ppp$, and thus $\qqq_\ppp=\bbb_\ppp$. If $b$ is in $\bbb$, we get $b/1=q/s$ for some $q$ in $\qqq$ and some $s$ in $A\setminus\ppp$, then $tb\in\qqq$ for some $t$ in $A\setminus\ppp$, and thus $b\in\qqq$. $\square$

\subsection{Page 62, proof of Corollary 5.9}%

Let $A\subset B$ be rings, let $\qqq$ be a prime ideal of $B$ and set $\ppp:=A\cap\qqq$:
$$
\begin{tikzcd}
A\ar[d,"\alpha"']\ar[r,hook]&B\ar[d,"\beta"]\\ 
A_\ppp\ar[r,hook]&B_\ppp.
\end{tikzcd}
$$
Then Corollary 3.4ii p.~39 of the book implies $A_\ppp\cap\qqq_\ppp=\ppp_\ppp$. 

\subsection{Page 62, Theorem 5.10}\label{510}%

Let $\bbb$ be an ideal of $B$, let $\aaa$ be its contraction in $A$, and assume $\aaa\subset\ppp$. Then it is easy to see that $\qqq$ can be chosen among the prime ideals of $B$ containing $\bbb$. 

Also note that Corollary 5.8 and Theorem 5.10 imply that an ideal of $A$ is maximal if and only if it is the contraction of a maximal ideal of $B$. 

\subsection{Page 62, dim A = dim B}%

\emph{If $A\subset B$ is an integral extension, then we have $\dim A=\dim B$.}

More precisely, we have $\dim A\ge\dim B$ by Corollary 5.9 p.~61 and $\dim A$ $\le$ $\dim B$ by Theorem 5.11 p.~62.

\subsection{Page 62, integrally closed domain}%

Here is an example of a domain which is \emph{not} integrally closed. Let $k$ be a field, let $x$ be an indeterminate and set $A:=k[x^2,x^3]\subset k[x]$. Then $x$ is in the field of fractions of $A$, and is integral over $A$, but is not in $A$.

\subsection{Page 62, Proposition 5.12}\label{512}%

Here is a corollary to Proposition 5.12 p.~62:

Let $A$ be a domain and $S$ a multiplicative subset with $0\notin S$. If $A$ is integrally closed, so is $S^{-1}A$.

\subsection{Page 63}%

If $A\subset D$ are domains, and if $\aaa$ is an ideal of $A$, then we denote the extension of $\aaa$ in $D$ by $D\,\aaa$, and the integral closure of $\aaa$ in $D$ by $D*\aaa$. 

Lemma 5.14 says
\begin{equation}\label{514}
D*\aaa=r\Big((D*A)\,\aaa\Big).
\end{equation}
In particular $D*\aaa$ is an ideal of $D*A$. 

In the proof of Proposition 5.15, we have the inclusions $\aaa\subset A\subset L$. Let 
$$
x^m+a_1x^{m-1}+\cdots+a_m
$$ 
be the minimal polynomial of $x$ over $K$. Each $a_j$ being in the ideal $(x_1,\dots,x_n)$ of $L*A$ generated by the $x_i$, and each $x_i$ being in the set $L*\aaa$, which is an ideal of $L*A$ by \eqref{514}, we get 
$$
a_j\in(L*\aaa)\cap K=K*\aaa=r\Big((K*A)\,\aaa\Big)=r(A\,\aaa)=r(\aaa)
$$ 
for all $j$ (the second equality following from \eqref{514}).

\subsection{Page 64, proof of Theorem 5.16}%

Last line of the first paragraph of the proof: It suffices to show $B_{\qqq_1}\ppp_2\cap A\subset\ppp_2$.

\subsection{Page 65}\label{65}%

I would change the sentence

``The conditions of Zorn's lemma are clearly satisfied and therefore the set $\Sigma$ has at least one maximal element''

to 

``Assuming $(A,f)\in\Sigma$, the conditions of Zorn's lemma are clearly satisfied and therefore $\Sigma$ has at least one maximal element $(B,g)\ge(A,f)$''. %``Assuming the set $\Sigma$ is nonempty, the conditions of Zorn's lemma are clearly satisfied and therefore $\Sigma$ has at least one maximal element''.

\subsection{Page 65, Lemma 5.20}\label{520}%

The proof of Lemma 5.20 shows:

\emph{Let $K$ be a field, let $B$ be a local subring of $K$ with maximal ideal $\mmm$, let $x$ be a non-zero element of $K$, let $B[x]$ be the subring of $K$ generated by $x$ over $B$, and let $\mmm[x]$ be the extension of $\mmm$ in $B[x]$. Then either $\mmm[x]\ne B[x]$ or $\mmm[x^{-1}]\ne B[x]$.}

\subsection{Page 66, Theorem 5.21}%

The statement of the Theorem is:

\begin{thm}[Theorem 5.21 p.~66]
Let $(B,g)$ be a maximal element of $\Sigma$. Then $B$ is a valuation ring of the field $K$.
\end{thm}

Here is a partial converse:

\begin{prop}\label{521}
Let $(B,g)$ be an element of $\Sigma$ such that $B$ is a valuation ring of $K$ and $\Ker g$ is the maximal ideal of $B$. Then $(B,g)$ is maximal.
\end{prop}

The following Lemma will be handy:

\begin{lem}\label{vrok}
Let $A$ be a valuation ring of a field $K$ with maximal ideal $\mmm$, and let $B$ be a ring satisfying $A<B\subset K$. Then $\mmm B=B$.
\end{lem}

\begin{proof}
If $b$ is in $B\setminus A$, then $b^{-1}$, being a non-unit of $A$, is in $\mmm$, and we get $1=b^{-1}b\in\mmm B$.
\end{proof}

\begin{proof}[Proof of Proposition \ref{521}] 
If we had $(B,g)<(C,h)$ for some $(C,h)\in\Sigma$, we would get $C=(\Ker g)C$ by Lemma~\ref{vrok}, and $(\Ker g)C\subset\Ker h$ by assumption. 
\end{proof}

\subsection{Page 66, proof of Theorem 5.21}\label{521p}%

The proof shows:

\emph{In the setting of Section~\ref{520} above, let $x$ be a non-zero element of $K$. If $\mmm[x]\ne B[x]$, then there is a maximal ideal $\mmm'$ of $B[x]$ such that $B\cap\mmm'=\mmm$ and $B[x]/\mmm'$ is algebraic over $B/\mmm$. If $\mmm[x^{-1}]\ne B[x^{-1}]$, then there is a maximal ideal $\mmm'$ of $B[x^{-1}]$ such that $B\cap\mmm'=\mmm$ and $B[x]/\mmm'$ is algebraic over $B/\mmm$.}

\subsection{Page 66, proof of Corollary 5.22}%

Sentences

``Then the restriction to $A$ of the natural homomorphism $A'\to k'$ defines a homomorphism of $A$ into $\Omega$. By (5.21) this can be extended to some valuation ring $B\supseteq A$.''

I would change this to 

``By (5.21) the natural homomorphism $A'\to\Omega$ can be extended to some valuation ring $B\supseteq A'$.'' 

Also, it would be slightly better to change ``let $x\notin\overline A$'' to ``let $x\in K\setminus\overline A$'' on the third line of the proof. 

\subsection{Page 67, Exercise 5.2}\label{67}%

\textbf{Statement.} Let $A$ be a subring of a ring $B$ such that $B$ is integral over $A$, and let $f:A\to\Omega$ be a homomorphism of $A$ into an algebraically closed field $\Omega$. Show that $f$ can be extended to a homomorphism of $B$ into $\Omega$. [Use (5.10).]

\textbf{Solution.} Set $\ppp:=\oo{Ker}f$ and let $\qqq\subset B$ be given by Theorem 5.10 p.~62. Our problem can be summarized as follows: 
$$
\begin{tikzcd}
A/\ppp\ar[r,tail]\ar[d,tail]&B/\qqq\ar[dl,dashrightarrow]\\ 
\Omega.
\end{tikzcd}
$$ 
Writing $K$ and $L$ for the respective fields of fractions of $A/\ppp$ and $B/\qqq$, our problem becomes  
$$
\begin{tikzcd}
K\ar[r,tail]\ar[d,tail]&L\ar[dl,dashrightarrow]\\ 
\Omega.
\end{tikzcd}
$$ 
As $L/K$ is algebraic and $\Omega$ algebraically closed, this problem has a solution.

\subsection{Page 67, Exercise 5.3}%

\subsubsection{Statement}

Let $f:B\to B'$ be a homomorphism of $A$-algebras, and let $C$ be an $A$-algebra. If $f$ is integral, prove that $f\otimes 1:B\otimes_AC\to B'\otimes_AC$ is integral. (This includes (5.6ii) as a special case.)

\subsubsection{Solution}

Set $D:=(f\otimes1)(B\otimes_AC)$ and let $E$ be the integral closure of $D$ in $B'\otimes_AC$. We have $1\otimes c\in D\subset E$ for $c\in C$ and it is easy to see that $b'\otimes1\in E$ for $b'\in B'$. Then $E$ contains $b'\otimes c$ for $b'\in B',c\in C$, hence $E$ contains $B'\otimes_AC$.

\subsubsection{A more general question}%\label{53}

Let $C\leftarrow A\to B\to B'$ be morphisms of rings. In this section tensor products are taken over $A$, and, for any morphism of rings $f:X\to Y$, the notation $\overline{X\ }^Y$ means ``integral closure of $f(X)$ in $Y$''. 

The purpose of this section is to show that the morphism 
$$
\overline{B\ }^{B'}\otimes C\to\overline{B\otimes C\ }^{B'\otimes C}
$$ 
induced by the natural morphism $\overline{B\ }^{B'}\otimes C\to B'\otimes C$ is not always surjective. 

Let $K$ be a field of characteristic $\ne2$ and $x$ an indeterminate, and set 
$$
A:=K[x^2],\qquad B:=K\left[x^2,x\sqrt{x^2-1}\right],
$$
$$
B':=K\left(x^2,x\sqrt{x^2-1}\right),\qquad C:=K[x].
$$ 
We claim 
$$
B'':=\overline{K\left[x^2,x\sqrt{x^2-1}\right]\ }^{K\left(x^2,x\sqrt{x^2-1}\right)}=K\left[x^2,x\sqrt{x^2-1}\right].
$$ 
Note that the two-element set 
$$
\{1,x\sqrt{x^2-1}\}
$$ 
is a $K[x^2]$-basis of $K[x\sqrt{x^2-1}]$, as well as a $K(x^2)$-basis of $K(x\sqrt{x^2-1})$. Using this fact it is easy to see that 
$$
B''\cap K(x^2)=K[x^2].
$$ 
%$$B''=\overline{K\left[x^2\right]\ }^{K\left(x^2,x\sqrt{x^2-1}\right)}.$$
To prove the claim, let $u$ be in $B''$. We can write 
$$
u=f(x^2)+x\sqrt{x^2-1}\ g(x^2)
$$ 
with $f(x^2)$, $g(x^2)\in K(x^2)$. It suffices to check that $f(x^2)$ and $g(x^2)$ are in $K[x^2]$, or equivalently, that they are in $B''$. We have 
$$
v:=f(x^2)-x\sqrt{x^2-1}\ g(x^2)\in B'',
$$ 
and we successively see that the following elements of $K(x^2)$ are in $K[x^2]$: 
$$
\frac{u+v}2=f(x^2),
$$ 
$$
uv=f(x^2)^2-x^2(x^2-1)\ g(x^2)^2,
$$ 
$$
x^2(x^2-1)\ g(x^2)^2.
$$ 
As $x^2(x^2-1)$ is square-free in $K[x^2]$, we conclude that $g(x^2)$ is also in $K[x^2]$. This completes the proof of the claim. 

Using the claim we get firstly
$$
\overline{B\ }^{B'}\otimes C=\overline{K\left[x^2,x\sqrt{x^2-1}\right]\ }^{K\left(x^2,x\sqrt{x^2-1}\right)}\otimes K[x]
$$
$$
=K\left[x^2,x\sqrt{x^2-1}\right]\otimes K[x]\simeq K\left[x,x\sqrt{x^2-1}\right],
$$ 
and secondly 
$$ 
\overline{B\otimes C\ }^{B'\otimes C}=\overline{K\left[x^2,x\sqrt{x^2-1}\right]\otimes K[x]\ }^{K\left(x^2,x\sqrt{x^2-1}\right)\otimes K[x]}
$$
$$
\simeq\overline{K\left[x,x\sqrt{x^2-1}\right]\ }^{K\left(x,\sqrt{x^2-1}\right)}\subset K\left(x,\sqrt{x^2-1}\right).
$$ 
The element 
$$
\sqrt{x^2-1}\in K\left(x,\sqrt{x^2-1}\right)
$$ 
is integral over $K\left[x,x\sqrt{x^2-1}\right]$, but does \emph{not} belong to this ring.

In fact $K\left[x,\sqrt{x^2-1}\right]$ is integrally closed, and thus Dedekind.

% comment removed https://docs.google.com/document/d/1NKkrn0BuWcYpctyKk6r9vilhUgX1kuq2_yuWuMwkFS8/edit

\subsection{Page 67, Exercise 5.4}%

\textbf{Statement.} Let $A$ be a subring of a ring $B$ such that $B$ is integral over $A$. Let $\nnn$ be a maximal ideal of $B$ and let $\mmm=\nnn\cap A$ be the corresponding maximal ideal of $A$. Is $B_\nnn$ necessarily integral over $A_\mmm$?

[Consider the subring $k[x^2-1]$ of $k[x]$, where $k$ is a field, and let $\nnn=(x-1)$. Can the element $1/(x+1)$ be integral?]

\textbf{Solution.} The last sentence of the hint should be "Can the element $1/(x + 1)$ be integral over $k[x^2-1]_{(x^2-1)}$?" 

Note that 
$$
k[x^2-1]_{(x^2-1)}=\left\{\frac{f(x^2-1)}{g(x^2-1)}\ \bigg|\ f,g\in k[t],g(0)\ne0\right\},
$$ 
and, if $1/(x + 1)$ was integral over $k[x^2-1]_{(x^2-1)}$, we would get 
$$
\frac1{(x+1)^n}+\frac{f_1(x^2-1)}{g_1(x^2-1)}\frac1{(x+1)^{n-1}}+\cdots+\frac{f_n(x^2-1)}{g_n(x^2-1)}=0
$$ 
(obvious notation). Multiplying through by $(x+1)^n$ and setting $x=-1$ yields $1=0$. 

\subsection{Page 67, Exercise 5.5}\label{55}%

\textbf{Statement.} Let $A\subset B$ be rings, $B$ integral over $A$.

(i) If $a\in A$ is a unit in $B$ then it is a unit in $A$.

(ii) The Jacobson radical of $A$ is the contraction of the Jacobson radical of $B$. 

\textbf{Solution.} 

(i) Let $a$ be an element of $A$ which has an inverse in $B$. If $a$ was not a unit of $A$, there would be a prime ideal $\ppp$ %maximal ideal $\mmm$ 
of $A$ containing $a$, and, by Theorem 5.10 p.~62 of the book, a prime ideal $\qqq$ of $B$ containing $a$, %the second paragraph of Section~\ref{510} p.~\pageref{510} above would imply the existence of some maximal ideal of $B$ containing $a$, 
contradicting the invertibility of $a$ in $B$. 

(ii) In the lines below $\mmm$ and $\nnn$ run respectively over the maximal ideals of $A$ and $B$. It suffices to show $A\cap(\bigcap\nnn)=\bigcap\mmm$, that is $\bigcap(A\cap\nnn)=\bigcap\mmm$. But this follows immediately from the second paragraph of Section~\ref{510} p.~\pageref{510}. 

\subsection{Page 67, Exercise 5.6}%

\textbf{Statement.} Let $B_1,\ldots,B_n$ be integral $A$-algebras. Show that $\prod B_i$ is an integral $A$-algebra.

\textbf{Solution.} It suffices to show that $(0,\dots,0,b_i,0,\dots,0)$ is integral over $A$, which is easy. 

\subsection{Page 67, Exercise 5.7}% 

\textbf{Statement.} Let $A$ be a subring of a ring $B$, such that the set $B\setminus A$ is closed under multiplication. Show that $A$ is integrally closed in $B$.

\textbf{Solution.} Assume by contradiction that $b\in B\setminus A$ is integral over $A$. We have 
$$
b^n+a_1b^{n-1}+\cdots+a_n=0
$$ 
with $a_i\in A$, $n\ge1$, and we can suppose that $n$ is minimum. Setting 
$$
a':=b^{n-1}+a_1b^{n-2}+\cdots+a_{n-1}
$$
we get $a'b=-a_n\in A$, hence $a'\in A$, and the equality 
$$
b^{n-1}+a_1b^{n-2}+\cdots+a_{n-2}b+(a_{n-1}-a')=0
$$ 
contradicts the minimality of $n$. 

\subsection{Page 68, Exercise 5.9}% 

The display 
$$
(f_1+x^r)^m+g_1\ (f+x^r)^{m-1}+\cdots+g_m=0
$$ 
should be 
$$
(f_1+x^r)^m+g_1\ (f_1+x^r)^{m-1}+\cdots+g_m=0
$$ 
More precisely, the second term should be $$g_1\ (f_1+x^r)^{m-1}$$ instead of $$g_1\ (f+x^r)^{m-1}$$ (with $f_1$ instead of $f$).

\subsection{Page 68, Exercise 5.10}%

It is easy to show that (a) implies (c), and that (b) and (c) are equivalent.

For the phrase ``and therefore contains $\Spec(A_\ppp)$'' at the end of the hint, see Exercise 3.22 p.~47 of the book. 

\subsection{Page 68, Exercise 5.11}

\textbf{Statement.} Let $f:A\to B$ be a flat homomorphism of rings. Then $f$ has the going-down property. [Chapter 3, Exercise 18.]

\textbf{Hint.} The proof of Theorem 5.16 p.~64 of the book shows that the going-down property for $f:A\to B$ is equivalent to the condition that, for all $\qqq\in\Spec(B)$ the natural map $\Spec(B_\qqq)\to\Spec(A_{\qqq^{\oo c}})$ is surjective. 

\subsection{Page 68, Exercise 5.12}\label{5.12}%

\textbf{Statement.} Let $G$ be a finite group of automorphisms of a ring $A$, and let $A^G$ denote the subring of $G$-invariants, that is of all $x\in A$ such that $\sigma(x)=x$ for all $\sigma\in G$. Prove that $A$ is integral over $A^G$. [If $x\in A$, observe that $x$ is a root of the polynomial $\prod_{\sigma\in G}(t-\sigma(x))$.]

Let $S$ be a multiplicatively closed subset of $A$ such that $\sigma(S)\subset S$ for all $\sigma\in G$, and let $S^G=S\cap A^G$. Show that the action of $G$ on $A$ extends to an action on $S^{-1}A$, and that $(S^G)^{-1}A^G\simeq(S^{-1}A)^G$.

\textbf{Hints.} The main point is to show that an invariant fraction is equal to a fraction with invariant numerator and denominator. Let $x=a/s$ be our fraction (obvious notation). 

\textbf{Step 1.} Set 
$$
t:=\prod_{\sigma\ne1}\sigma(s).
$$ 
The product $st$ is invariant, and we have 
$$
x=\frac{a}{s}=\frac{at}{st}\ .
$$ 
In other words we can assume that the denominator $s$ of our fraction $x=a/s$ is invariant.

\textbf{Step 2.} For $\sigma\in G$ we have $\sigma(a)/s=a/s$, that is $\sigma(a)st_\sigma=ast_\sigma$ for some $t_\sigma\in S$. Arguing as in Step~1 we can assume that the $t_\sigma$ are invariant. 

\emph{Details.} Set 
$$
u_\sigma:=\prod_{\tau\ne1}\tau(t_\sigma).
$$ 
Then $t_\sigma u_\sigma$ is invariant, and we get $\sigma(a)st_\sigma u_\sigma=ast_\sigma u_\sigma$, and we can indeed assume that the $t_\sigma$ are invariant.

\textbf{Step 3.} By a similar trick we can assume that the $t_\sigma$ are all equal to some $t\in S^G$, and we get $ast=\sigma(a)st=\sigma(ast)$, and thus 
$$
\frac{a}{s}=\frac{ast}{s^2t}\ .
$$ 
\emph{Details.} Setting 
$$
t:=\prod_\sigma t_\sigma,\quad v_\sigma:=\prod_{\tau\ne\sigma}t_\tau,
$$ 
we get $t=t_\sigma v_\sigma$ and $\sigma(a)st=\sigma(a)st_\sigma v_\sigma=ast_\sigma v_\sigma=ast$.

\subsection{Page 68, Exercise 5.13}%

\textbf{Statement.} In the situation of Exercise 12, let $\ppp$ be a prime ideal of $A^G$, and let $P$ be the set of prime ideals of $A$ whose contraction is $\ppp$. Show that $G$ acts transitively on $P$. In particular, $P$ is finite.

[Let $\ppp_1,\ppp_2\in P$ and let $x\in\ppp_1$. Then $\prod_\sigma\sigma(x)\in\ppp_1\cap A^G=\ppp\subset\ppp_2$, hence $\sigma(x)\in\ppp_2$ for some $\sigma\in G$. Deduce that $\ppp_1$ is contained in $\bigcup_\sigma\sigma(\ppp_2)$, and then apply (1.11) and (5.9).]

\textbf{Solution.} We follow the hint given in the book.

Let $\qqq,\qqq'\in P$ and $a\in\qqq'$. We have  
$$
\prod_\sigma\sigma(a)\in\qqq'\cap A^G=\ppp=\qqq\cap A^G\subset\qqq.
$$ 
Hence there is a $\sigma_a\in G$ such that $\sigma_a(a)\in\qqq$, and thus $a\in\sigma_a^{-1}(\qqq)$. This implies 
$$
\qqq'\subset\bigcup_\sigma\sigma(\qqq),
$$ 
and thus, by Proposition 1.11i p.~8 of the book (see Proposition~\ref{111i} p.~\pageref{111i}), $\qqq'\subset\sigma(\qqq)$ for some $\sigma\in G$. 

It suffices to prove $\qqq'=\sigma(\qqq)$.

As 
$$
\sigma(\qqq)\cap A^G=\sigma\left(\qqq\cap\sigma^{-1}(A^G)\right)=\sigma\left(\qqq\cap A^G\right)=\sigma(\ppp)=\ppp=\qqq'\cap A^G,
$$ 
Corollary 5.9 p.~61 of the book (see Section~\ref{59} p.~\pageref{59}) implies $\qqq'=\sigma(\qqq)$, as was to be shown.

\subsection{Page 69, Exercise 5.15}%

\textbf{Statement.} Let $A$ be an integrally closed domain, $K$ its field of fractions and $L$ any finite extension field of $K$, and let $B$ be the integral closure of $A$ in $L$. Show that, if $\ppp$ is any prime ideal of $A$, then the set of prime ideals $\qqq$ of $B$ which contract to $\ppp$ is finite (in other words, that $\Spec(B)\to\Spec(A)$ has finite fibers).

[Reduce to the two cases (a) $L$ separable over $K$ and (b) $L$ purely inseparable over $K$. In case (a), embed $L$ in a finite normal separable extension of $K$, and use Exercises 13 and 14. In case (b),if $\qqq$ is a prime ideal of $B$ such that $\qqq\cap A =\ppp$, show that $\qqq$ is the set of all $x\in B$ such that $x^{p^m}\in\ppp$ for some $m\ge0$, where $p$ is the characteristic of $K$, and hence that $\Spec(B)\to\Spec(A)$ is bijective in this case.]

\textbf{Hints.} (a) $\Spec(B)\to\Spec(A)$ has finite \emph{nonempty} fibers.

(b) Let $L/K$ be purely inseparable of characteristic $p>0$, and let $\ppp$ be a prime ideal of $A$. By Theorem 5.10 p.~62 of the book, there is a prime ideal $\qqq$ of $B$ lying above $\ppp$. If $b\in B$, $n\in\mathbb N$ and $b^{p^n}\in\ppp$, then $b\in\qqq$. If $x\in\qqq$, then $x^{p^n}\in K$ for some $n\in\mathbb N$, and thus $x^{p^n}\in K\cap\qqq=\ppp$. We conclude that $\qqq$ is the set of those $b\in B$ such that $b^{p^n}\in\ppp$ for some $n\in\mathbb N$ (even if the extension is of infinite degree). In particular the map $\Spec(B)\to\Spec(A)$ is bijective.

\subsection{Page 69, Exercise 5.16, NNT}\label{nnt}%

NNT stands for \textbf{Noether's Normalization Theorem}.

The purpose of this section is to review the following closely related statements: Noether's Normalization Theorem, Zariski's Lemma, %the Weak Nullstellensatz 
and the Nullstellensatz.

%\textbf{Noether's Normalization Theorem}\subsubsection{Noether's Normalization Theorem}%Before proceeding, recall the following fact (see Remark p.~60 of the book): %it might be useful to spell out a fact which is proved but, it seems to me, not stated explicitly in the book:%$(\star)$ 
%\emph{Let $A\subset B$ be rings such that $B$ is finitely generated as an $A$-algebra. Then $B$ is finitely generated as an $A$-module if and only if it is integral over $A$.}

Recall the general notation $A_s:=A[s^{-1}]$.%

\textbf{Noether's Normalization Theorem.} \emph{Let $A\subset B$ be an inclusion of nonzero rings such that $B$ a finitely generated $A$-algebra. Then there exist a nonzero element $s$ in $A$, a nonnegative integer $n$, and elements $x_1,\dots,x_n$ in $B_s$ which are algebraically independent over $A_s$, such that $B_s$ is a finitely generated module over} 
$$
A_s[x_1,\dots,x_n].
$$ 
\begin{proof} 
Let $y_1,\dots,y_m\in B$ generate $B$ as an $A$-algebra: 
$$
B=A[\,y_1,\dots,y_m].
$$ 
We argue by induction on $m$. 

If $m=0$ or if the $y_i$ are algebraically independent over $A$, there is nothing to prove.

Thus we can assume that $m\ge1$; that the statement holds with $m$ replaced by $m-1$; and that there is a non-constant polynomial $f\in A[Y_1,\dots,Y_m]$, where the $Y_i$ are indeterminates, such that $f(\,y_1,\dots,y_m)=0$. %Let $r$ be an integer larger than the degree of $f$. 

We claim

$(\star)$ There exist a nonzero $t$ in $A$ and elements $z_1$, \dots, $z_{m-1}$ in $B$ such that $B_t$ is a finitely generated $A_t[z_1,\dots,z_{m-1}]$-module. 

We start the proof of $(\star)$. 

Let $r$ be an integer larger than the degree of $f$, and, for any monomial $u\in A[Y_1,\dots,Y_m]$ occurring in $f$ (with a nonzero coefficient), write $u'$ for the monomial $u$ \emph{viewed as a polynomial in the ring} 
$$
\bigg(A\left[Y_2-Y_1^r,\dots,Y_m-Y_1^{r^{m-1}}\right]\bigg)[Y_1].
$$ 
If $u=Y_1^{\alpha_1}\cdots Y_m^{\alpha_m}$, then $u'$ is monic of degree 
$$
\alpha_1+\alpha_2r+\cdots+\alpha_mr^{m-1}.
$$ 
This implies that $u'$ is monic, and that we have $\deg(u')\ne\deg(v')$ for any two distinct such monomials $u$ and $v$. %if $u$ and $v$ are two distinct such monomials, then we have $\deg(u')\ne\deg(v')$. 

As a result, there is a nonzero $t$ in $A$, an integer $d\ge1$, and a polynomial 
$$
g\in\bigg(A\left[Y_2-Y_1^r,\dots,Y_m-Y_1^{r^{m-1}}\right]\bigg)[Y_1]
$$ 
of degree less than $d$, such that $f=tY_1^d+g$. 

In particular, $y_1$ is integral over the ring $C:=A_t[z_1,\dots,z_{m-1}]$ 
%$$C:=A_t\left[\,y_2-y_1^r,\dots,y_m-y_1^{r^{m-1}}\right],$$ 
with 
$$
z_i:=y_{i+1}-y_1^{r^i},
$$ 
and $B_t=C[y_1]$ is a finitely generated $C$-module. This proves $(\star)$.

Let us prove the Theorem.

We can assume that $A_t$ is nonzero. By the inductive hypothesis applied to the inclusion 
$$
A_t\subset A_t[z_1,\dots,z_{m-1}],
$$ 
there exist a nonzero element $u$ in $A_t$, a nonnegative integer $n$, and elements $x_1$, \dots, $x_n$ in 
$$
A_t[z_1,\dots,z_{m-1}]_u=(A_t)_u[z_1,\dots,z_{m-1}]
$$ 
which are algebraically independent over $(A_t)_u$, such that 
$$
(A_t)_u[z_1,\dots,z_{m-1}]
$$ 
is a finitely generated $(A_t)_u[x_1,\dots,x_n]$-module. 

Now $u=v/t^i$ for some nonzero $v$ in $A$ and some integer $i\ge0$, and we have $(A_t)_u=A_{tv}$. 

Setting $s:=tv$, we see that $s\ne0$, that the elements 
$$
x_1,\dots,x_n\in A_s[z_1,\dots,z_{m-1}]
$$ 
are algebraically independent over $A_s$, and that $A_s[z_1,\dots,z_{m-1}]$ is a finitely generated $A_s[x_1,\dots,x_n]$-module. 

Recall that $B_t$ is a finitely generated $A_t[z_1,\dots,z_{m-1}]$-module (see $(\star)$). 

In particular $B_s$ is a finitely generated module over the ring $$A_s[z_1,\dots,z_{m-1}],$$ ring which is itself, as we have just seen, a finitely generated module over the ring $A_s[x_1,\dots,x_n]$. 

This implies that $B_s$ is a finitely generated $A_s[x_1,\dots,x_n]$-module, as desired.
\end{proof} 

% https://docs.google.com/document/d/1KsGGeQkmO40nOVK3_LVgBWoxS6DiRJsDygE6UnkFWjc/edit
% https://docs.google.com/document/d/1oTZtahmZAPeNJrbs65b2IzgWHBKkWBjzasbWtsHpWDA/edit old versions
%[Added later: An approach which I find better is expounded in Mel Hochster, Noether's normalization and Hilbert’s Nullstellensatz, \href{http://www.math.lsa.umich.edu/~hochster/615W10/supNoeth.pdf}{http://www.math.lsa.umich.edu/$\sim$hochster/615W10/supNoeth.pdf}\ ]

Here is a statement of \textbf{Zariski's Lemma}:

(ZL)\emph{Let $k$ be a field, $A$ a finitely generated $k$-algebra. Let $\mmm$ be a maximal ideal of $A$. Then the field $A/\mmm$ is a finite algebraic extension of $k$. In particular, if $k$ is algebraically closed then $A/\mmm\simeq k$, that is, the natural morphism $k\to A/\mmm$ is an isomorphism.}

In view of Proposition 5.7 p.~61 of the book, Zariski's Lemma follows immediately from Noether's Normalization Theorem. %In view of Proposition 5.7 p.~61 of the book, Zariski's \- Lemma follows immediately from Noether's Normalization Theorem.

Here is an easy consequence of (ZL):

(ZL2) \emph{Set $A:=k[t_1,\dots,t_n]$ where $k$ is an algebraically closed field and the $t_i$ are indeterminates, let $\mmm$ be a maximal ideal of $A$, let} 
$$
k\xrightarrow\iota A\xrightarrow{\pi}A/\mmm
$$ 
\emph{be the canonical morphisms, and set $x_i:=(\pi\circ\iota)^{-1}(\pi(t_i))$ (recall that $\pi\circ\iota$ is bijective). Then we have} 
$$
\mmm=(t_1-x_1,\dots,t_n-x_n)
$$ 
\emph{and} 
$$
(\pi\circ\iota)^{-1}(\pi(f))=f(x)
$$ 
\emph{(with $x:=(x_1,\dots,x_n)$) for all $f$ in $A$. In particular} 
$$
\mmm=\{f\in A\ |\ f(x)=0\}.
$$

The detailed proof of (ZL2) is left to the reader.

The \textbf{Nullstellensatz} is stated in Exercise 14 of Chapter 7 as follows:

(N) \emph{Let $k$ be an algebraically closed field, let $A$ denote the polynomial ring $k[t_1,\dots,t_n]$ and let $\aaa$ be an ideal in $A$. Let V be the variety in $k^n$ defined by the ideal $\aaa$, so that $V$ is the set of all $x=(x_1,\dots,x_n)\in k^n$ such that $f(x)=0$ for all $f\in\aaa$. Let $I(V)$ be the ideal of $V$, i.e. the ideal of all polynomials $g\in A$ such that $g(x)=0$ for all $x\in V$. Then $I(V)=r(\aaa)$.}

\begin{proof} 
The inclusion $r(\aaa)\subset I(V)$ is clear. Let us prove $I(V)\subset r(\aaa)$. 

(ZL2) implies that $I(V)$ is the intersection of all the maximal ideals of $A$ containing $\aaa$. As $r(\aaa)$ is the intersection of all the prime ideals of $A$ containing $\aaa$, we can assume that $\aaa$ is a prime ideal $\ppp$. Then the statement follows immediately from Exercises 5.23 and 5.24 p.~71 of the book. Here is a slightly different argument:

Let $f$ be in $A\setminus\ppp$ and set $A_f:=A[1/f]$.

It suffices to prove the claim below.

Claim: There is a maximal ideal of $A$ which doesn't contain $f$. 

We give two proofs of the claim.

Proof 1. The extension $\ppp^{\oo e}$ of $\ppp$ in $A_f$ being clearly a proper ideal, there is a maximal ideal $\mmm\subset A_f$ containing $\ppp^{\oo e}$. 

Note successively that $f\notin\mmm$; that $\qqq:=\mmm\cap A$ is a prime ideal of $A$ which doesn't contain $f$; that $A_f/\mmm$ is isomorphic to $k$ by (ZL); and that the monomorphism of $k$-algebras $0\ne A/\qqq\mono A_f/\mmm\simeq k$ implies that $\qqq$ is a maximal ideal of $A$.

Proof 2. By Noether's Normalization Theorem applied to the $k$-algebra $A_f$, there are elements $u_1,\dots,u_m$ of $A_f$ which are algebraically independent over $k$, such that $A_f$ is integral over $k[u_1,\dots,u_m]$. By Exercise 5.2 p.~67 of the book (see Section~\ref{67} p.~\pageref{67} above) the $k$-algebra morphism $\varphi:k[u_1,\dots,u_m]\to k$ which maps $u_i$ to $0$ extends to a $k$-algebra morphism $\Phi:A_f\to k$. As $\Phi(f)\ne0$, we see that $A\cap\oo{Ker}\Phi$ is a maximal ideal of $A$ which doesn't contain $f$.
\end{proof}
%https://docs.google.com/document/d/1YYUDEGhoImy-b_Lx9foGoetelzzXbN1IiNbpo7pXh98/edit {comment} 180522
%The assumption that $B$ is a domain (instead of an arbitrary ring) is not used. For another approach, see the following reference (already given in Section~\ref{nnt} p.~\pageref{nnt}): Mel Hochster, Noether's normalization and Hilbert’s Nullstellensatz, \href{http://www.math.lsa.umich.edu/~hochster/615W10/supNoeth.pdf}{http://www.math.lsa.umich.edu/$\sim$hochster/615W10/supNoeth.pdf}

\subsection{Page 69, Exercise 5.17}%

The Weak Nullstellensatz is the statement
$$
\aaa\ne(1)\implies V(\aaa)\ne\varnothing.
$$ 
It is \emph{not} the trivial statement 
$$
I(X)\ne(1)\implies X\ne\varnothing.
$$ 

\subsection{Page 70, Exercise 5.21}\label{5.21}%

Here is the statement of the Exercise:

Let $A$ be a subring of an integral domain $B$ such that $B$ is finitely generated over $A$. Show that there exists $s\ne0$ in $A$ such that, if $\Omega$ is an algebraically closed field and $f:A\to\Omega$ is a homomorphism for which $f(s)\ne0$, then $f$ can be extended to a homomorphism $B\to\Omega$.

And here is a corollary:

In the setting of the Exercise, if $i:A\to B$ denotes the inclusion, then we have $X_s\subset i^*(\Spec(B))$. In particular the interior of $i^*(\Spec(B))$ is nonempty. [Proof: given $\ppp\in X_s$ pick an algebraically closed field $\Omega$ containing $A/\ppp$.]

\subsection{Page 70, Exercise 5.22}% 

We have $k\subset g(B)\subset\Omega$. By Proposition 5.7 p.~61 of the book, $g(B)$ is a field.

\subsection{Page 71, Exercise 5.23}% 

In the hint ``ii)'' should be ``i)''.

\subsection{Page 71, Exercise 5.24}%
 
Part (i). Let us prove 

\emph{If $A\subset B$ is an integral extension of rings and if $A$ is Jacobson, then $B$ is Jacobson.}

Proof. We can assume that $B$ is a domain. Let $\bbb\subset B$ be the Jacobson radical of $B$. It suffices to prove $\bbb=(0)$. We have $\bbb^{\oo c}=(0)$ by Exercise 5.5ii p.~67 of the book (see Section~\ref{55} p.~\pageref{55} above), and the version of Corollary 5.9 p.~61 of the book proved in Section~\ref{59} p.~\pageref{59}, the implies $\bbb=(0)$. $\square$

Part (ii) follows from Exercise 5.22 p.~70 of the book.

\subsection{Page 71, Exercise 5.26}%

The first two sentences are

``Let $X$ be a topological space. A subset of $X$ is \textbf{locally closed} if it is the intersection of an open set and a closed set, or equivalently if it is open in its closure.'' 

Let us prove this equivalence.

Let $U$ be open and $C$ closed. It suffices to show $(\star)\ U\cap C=U\cap\overline{U\cap C}$. 

Proof of $(\star)$. We have:

$\bullet\ U\cap C\subset U\cap\overline{U\cap C}$ because $U\cap C\subset U$ and $U\cap C\subset\overline{U\cap C}$,

$\bullet\ U\cap\overline{U\cap C}\subset U\cap C$ because $\overline{U\cap C}\subset\overline C=C$. $\square$ 

\subsubsection{Part 1}

\textbf{Statement.} Show that the three conditions below on a subset $X_0$ of a topological space $X$ are equivalent:

(1) Every non-empty locally closed subset of $X$ meets $X_0$;

(2) For every closed set $C$ in $X$ we have $\overline{X_0\cap C}=C$;

(3) The mapping $U\mapsto X_0\cap U$ of the collection of open sets of $X$ onto the collection of open sets of $X_0$ is bijective.

A subset $X_0$ satisfying these conditions is said to be \textbf{very dense} in $X$. 

\textbf{Solution.} Condition (3) is clearly equivalent to 

(3') The map $C\mapsto X_0\cap C$ from the set of closed subsets of $X$ to the set of closed subsets of $X_0$ is bijective.

This is also equivalent to 

(3'') The map $C\mapsto X_0\cap C$ from the set of closed subsets of $X$ to the set of closed subsets of $X_0$ is injective.

(1)$\implies$(2): If there is a closed subset $C$ of $X$ such that $\overline{X_0\cap C}\ne C$, then 
$$
L:=C\setminus\overline{X_0\cap C}
$$ 
is  a nonempty locally closed subset satisfying $X_0\cap L=\varnothing$. 

(2)$\implies$(3''): (2) means that $C'\mapsto\overline{C'}$ is a left inverse to the map in (3''). 

(3)$\implies$(1): for $U,V$ open and $V\subset U$ the equality $X_0\cap(U\setminus V)=\varnothing$ implies $X_0\cap U=X_0\cap V$. 

\subsubsection{Part 2} 

\textbf{Statement.} If $A$ is a ring, show that the following are equivalent:

(i) $A$ is a Jacobson ring;

(ii) The set of maximal ideals of $A$ is very dense in $\Spec(A)$;

(iii) Every locally closed subset of $\Spec(A)$ consisting of a single point is closed.

\textbf{Solution.} 

$\bu$ Proof of (i) $\iff$ (ii). 

Hint: Let $M\subset\Spec(A)$ be the set of maximal ideals. In view of Condition~(2) above, it suffices to show that (a) and (b) below are equivalent.

(a) For all ideal $\aaa$ of $A$ we have $\mf R(A/\aaa)\subset\mf N(A/\aaa)$.

(b) For all ideal $\aaa$ of $A$ we have $V(\aaa)\subset\overline{V(\aaa)\cap M}$.

Let $\bbb(\aaa)$ be the intersection of the maximal ideals containing $\aaa$. In fact we have\medskip 

\centerline{(a) $\iff$ $[\bbb(\aaa)\subset r(\aaa)]\ \forall\ \aaa$}\bigskip

\centerline{$\iff$ $[\ppp\supset\aaa\implies\ppp\supset\bbb(\aaa)]\ \forall\ \aaa\ \forall\ \ppp$ $\iff$ (b),}\medskip 

where ``$\forall\ \aaa$'' means ``for all ideal $\aaa$ of $A$'' and ``$\forall\ \ppp$'' means ``for all prime ideal $\ppp$ of $A$''.\medskip 

$\bu$ Proof of (i) $\iff$ (iii). 

It suffices to show that (c) and (d) below are equivalent.

(c) Every non-maximal prime ideal $\ppp$ is the intersection of the strictly larger prime ideals.

(d) If $\ppp$ is a prime ideal and if the singleton $\{\ppp\}$ is locally closed, then $\ppp$ is maximal.

(c) $\implies$ (d): Assume by contradiction that the singleton $\{\ppp\}$ is locally closed and $\ppp$ is not maximal, and let $Q$ be the set of all those prime ideals of $A$ which are strictly larger than $\ppp$. We have 
\begin{equation}\label{pppqqq}
\ppp=\bigcap_{\qqq\in Q}\qqq
\end{equation} 
and  
\begin{equation}\label{pppvaaa}
\{\ppp\}=V(\aaa)\setminus V(\bbb)
\end{equation} 
for some ideals $\aaa$ and $\bbb$. Let $\qqq$ be in $Q$. Clearly $\qqq$ contains $\aaa$. Equality~\eqref{pppvaaa} implies that $\qqq$ contains $\bbb$. As $\qqq$ is an arbitrary element of $Q$, \eqref{pppqqq} entails that $\ppp$ contains $\bbb$, contradicting \eqref{pppvaaa}.

(d) $\implies$ (c): Let $\ppp$ be a non-maximal prime ideal, and let $\bbb$ be the intersection of those prime ideals which are strictly larger than $\ppp$, and assume by contradiction that $\bbb$ is strictly larger than $\ppp$. Let $L$ be the locally closed subset $V(\ppp)\setminus V(\bbb)$ of $\Spec(A)$. Then $\ppp$ is in $L$, that is $\{\ppp\}\subset L$. As $\{\ppp\}$ is not locally closed, we have $\{\ppp\}\ne L$, that is $\{\ppp\}<L$. Let $\qqq$ be in $L\setminus\{\ppp\}$, that is $\qqq>\ppp$ and $\qqq\not\supset\bbb$. But we then have $\qqq\supset\bbb$ by definition of $\bbb$. 

\subsection{Page 72, Exercise 5.27}% previous version https://docs.google.com/document/d/1pa9JTIG_IbvdERz34Me3c0nSgSFz-lnjuJCYOo1yYrQ/edit

\textbf{Statement.} Let $A,B$ be two local rings. $B$ is said to dominate $A$ if $A$ is a subring of $B$ and the maximal ideal $\mmm$ of $A$ is contained in the maximal ideal $\nnn$ of $B$ (or, equivalently, if $\mmm=\nnn\cap A$). Let $K$ be a field and let $\Sigma$ be the set of all local subrings of $K$. If $\Sigma$ is ordered by the relation of domination, show that $\Sigma$ has maximal elements and that $A\in\Sigma$ is maximal if and only if $A$ is a valuation ring of $K$. [Use (5.21).]

\textbf{Solution.} For any algebraically closed field $\Omega$ we write $\Phi(K,\Omega)$ for the set denoted by $\Sigma$ on page 65 of the book (see Section~\ref{65} p.~\pageref{65}). [More precisely, $\Phi(K,\Omega)$ is the set of of all pairs $(A,f)$, where $A$ is a subring of $K$ and $f$ is a homomorphism of $A$ into $\Omega$.] %We also assumed that $\Phi(K,\Omega)$ is nonempty. 
Let $\Sigma(K)$ be the set of all local subrings of $K$. We equip $\Phi(K,\Omega)$ and $\Sigma(K)$ with their obvious partial order.

Let $(A,\mmm)$ be in $\Sigma(K)$. We must show that $(A,\mmm)$ is maximal in $\Sigma(K)$ if and only if $A$ is a valuation ring of $K$.

Assume that $A$ is a valuation ring of $K$ and that $(B,\nnn)$ is a maximal element of $\Sigma(K)$ with $(A,\mmm)\le(B,\nnn)$. Then we have $\mmm B\subset\nnn$, and Lemma~\ref{vrok} p.~\pageref{vrok} implies $B=A$. %If we had %, and that we have 
%$(A,\mmm)<(B,\nnn)$ in $\Sigma(K)$, Lemma~\ref{vrok} p.~\pageref{vrok}. To derive a contradiction, note that if $b$ is in $B\setminus A$, then $b^{-1}$ is a non-unit of $A$, hence $b^{-1}\in\mmm$, hence $b^{-1}\in\nnn$, which is impossible.

Assume now that $(A,\mmm)$ is maximal in $\Sigma(K)$. Let $\Omega$ be an algebraic closure of $A/\mmm$, let $f:A\to\Omega$ the obvious morphism, and let $(B,g)$ be a maximal element of $\Phi(K,\Omega)$ such that $(A,f)\le(B,g)$. As $B$ is a valuation ring of $K$ by Theorem 5.21 p.~66 of the book, it suffices to show $B=A$. Lemma~5.19 p.~65 of the book implies that $B$ is local and that $\Ker g$ is its maximal ideal. As $\mmm=\Ker f\subset\Ker g$, we see that $B$ dominates $A$, and thus that $B=A$, as desired.

\subsection{Page 72, Exercise 5.28}\label{528}%

\textbf{Statement.} Let $A$ be an integral domain, $K$ its field of fractions. Show that the following are equivalent:

(1) $A$ is a valuation ring of $K$.

(2) If $\aaa, \bbb$ are any two ideals of $A$, then either $\aaa\subset\bbb$ or $\bbb\subset\aaa$.

Deduce that if $A$ is a valuation ring and $\ppp$ is a prime ideal of $A$, then $A_\ppp$  and $A/\ppp$ are valuation rings of their fields of fractions.

\textbf{Hint.} It suffices to show that the following statements are equivalent:

(a) $A$ is \emph{not} a valuation ring of $K$,

(b) there are incomparable principal ideals of $A$,

(c) there are incomparable ideals of $A$.

Clearly (b) implies (c). There are $a,b\in A\setminus\{0\}$ such that $\frac ab$ and $\frac ba$ are not in $A$ if and only if the principal ideals $(a)$ and $(b)$ are incomparable. This implies that (a) and (b) are equivalent, and it only remains to show that (c) implies (b). If $\aaa$ and $\bbb$ are incomparable ideals, if $a$ is in $\aaa\setminus\bbb$ and if $b$ is in $\bbb\setminus\aaa$, then the principal ideals $(a)$ and $(b)$ are incomparable.

\subsection{Page 72, Exercise 5.29}%

\textbf{Statement.} Let $A$ be a valuation ring of a field $K$. Show that every subring of $K$ which contains $A$ is a local ring of $A$ (i.e. is of the form $A_\ppp$ for some prime ideal $\ppp\subset A$).

\textbf{Hint.} Let $B$ be the unnamed ring in the statement. By Proposition 5.18 (i) and (ii) p.~65 of the book, $B$ is local. Let $\nnn\subset B$ be the maximal ideal and set $\ppp:=A\cap\nnn$. Then we have $A_\ppp=B$. Indeed, the inclusion $A_\ppp\subset B$ is clear. Let $b\in B\setminus A$. It suffices to show $b\in A_\ppp$. We have $b^{-1}\in A\subset B$. As $b^{-1}$ is a unit of $B$, it is not in $\nnn$, and thus not in $\ppp$, hence $b=1/b^{-1}\in A_\ppp$.

\subsection{Page 72, Exercise 5.30}%

Let us show that $v(x+y)\ge\min(v(x),v(y))$ for $x,y\in K^*$ such that $x+y\in K^*$. We can assume $v(x)\ge v(y)$, that is $xy^{-1}\in A$. We get 
$$
A\ni xy^{-1}+1=(x+y)y^{-1},
$$ 
and thus $v(x+y)\ge v(y)=\min(v(x),v(y))$.

\subsection{Page 72, About Exercise 5.31}%

Let $J$ be a set; for each $j\in J$ let $A_j$ and $B_j$ be two valuation domains with same value group $G_j$; let $G_{j,\infty}$ be to the totally ordered commutative monoid obtained by adjoining to $G_j$ a largest element, denoted $\infty$, such that $\infty+x=\infty$ for all $x\in G_{j,\infty}$; let $v_j:A_j\to G_{j,\infty}$ and $w_j:B_j\to G_{j,\infty}$ be the respective valuations; let $\aaa_j\subset A_j$ and $\bbb_j\subset B_j$ be ideals such that $v_j(\aaa_j)=w_j(\bbb_j)$ for all $j$, let $A$ and $B$ be the respective products of the $A_j/\aaa_j$ and the $B_j/\bbb_j$.

\begin{prop}
In the above setting, the spectra of $A$ and $B$ are homeomorphic.
\end{prop}

\begin{proof}
The proof will actually give a description of the spectra. 

Let $j$ be in $J$. Let $G_{j,\infty,\ge0}$ be the totally ordered commutative submonoid of nonnegative elements in $G_{j,\infty}$; let $M_j$ be the totally ordered commutative monoid $G_{j,\infty,\ge0}/\!\sim$, where $\sim$ is the congruence defined by $x\sim y$ if and only if $x,y\in v_j(\aaa_j)$; let $M$ be the product of the $M_j$; and let $v:A\to M$ be the map induced by the $v_j$. 

Let $\mathcal I$ be the set of those subsets $I\subset M$ which are upward closed and satisfy $x\land y\in I$ whenever $x,y\in I$. Then $\mathcal I$ has an obvious structure of lattice for which we have $I\land I'=I\cap I'$ and $I\le I'\iff I\subset I'$ for all $I,I'\in\mathcal I$. Let $\mathcal P$ be the sub-poset of $\mathcal I$ formed by the sets $P\in\mathcal I$ such that $x,y\in M\setminus P$ implies $x+y\notin P$.

We leave it to the reader to check that $v$ induces a lattice isomorphism from the lattice of ideals of $A$ to $\mathcal I$, and that $v(\aaa)\in\mathcal P$ if and only if $\aaa$ is prime. This implies the proposition. 
\end{proof}

\subsection{Page 72, Exercise 5.32}%

Here are some hints.

For any domain $A$, let $A^*,A^0$, and $Q(A)$ denote respectively the group of units of $A$, the monoid of nonzero elements of $A$, and the field of fractions of $A$. For any totally ordered multiplicative abelian group $G$, let $G^+$ denote the monoid of elements $\ge1$. 

Let $A$ be a valuation domain. Recall that $\Gamma(A):=Q(A)^*/A^*$ is the group of values of $A$, that it is totally ordered, and that we have $\Gamma(A)^+=A^0/A^*$. 

Let $\ppp$ be a prime ideal of $A$, set $S:=A\setminus\ppp$ and let $\Delta$ be the subgroup of $\Gamma:=\Gamma(A)$ generated by $S/A^*$. If $\langle S\rangle$ is the subgroup of $Q(A)^*$ generated by $S$, then we have $\Delta\simeq\langle S\rangle/A^*$.

We claim 
\begin{equation}\label{loc}
\Gamma(A_\ppp)\simeq\frac{\Gamma}{\Delta}
\end{equation}
and 
\begin{equation}\label{quo}
\Gamma(A/\ppp)\simeq\Delta%\text{ (isomorphism of totally ordered abelian groups).}
\end{equation}
(isomorphisms of totally ordered abelian groups).

Proof of \eqref{loc}:
$$
\Gamma(A_\ppp)=Q(A)^*/(A_\ppp)^*=Q(A)^*/\langle S\rangle\simeq\frac{Q(A)^*/A^*}{\langle S\rangle/A^*}=\frac{\Gamma}{\Delta}\ .
$$ 
Proof of \eqref{quo}: Set $\overline A:=A/\ppp$ and, for any $a\in A$, write $\overline a$ for the image of $a$ in $\overline A$. %We claim $\Gamma(\overline A)\simeq\Delta$ (isomorphism of totally ordered abelian groups). 
As $\Gamma(\overline A)$ and $\Delta$ are totally ordered abelian groups, it suffices to show 
\begin{equation}\label{mon}
\Gamma(\overline A)^+\simeq\Delta^+\text{ (isomorphism of totally ordered monoids).}
\end{equation}
Proof of \eqref{mon}: We have $\Gamma(\overline A)^+=(\overline A)^0/(\overline A)^*$ and $\Delta^+=S/A^*$. Define the monoid morphism $f:S\to(\overline A)^0$ by $f(s):=\overline s$, and consider the diagram 
$$
\begin{tikzcd}
S\ar[r,"f"]\ar[d,"p"']&(\overline A)^0\ar[d,"q"]\\ 
S/A^*\ar[r,dashrightarrow,"\overline f"']&(\overline A)^0/(\overline A)^*,
\end{tikzcd}
$$ 
where $p$ and $q$ are the canonical projections. We claim that there is an induced morphism $\overline f:S/A^*\to(\overline A)^0/(\overline A)^*$, and that $\overline f$ is bijective. The existence of $\overline f$ and its surjectivity are easy to prove. The injectivity of $\overline f$ follows from the fact that, $A$ being local, any unit of $\overline A$ is the image of a unit of $A$. This proves \eqref{mon}, and thus \eqref{quo}.

\subsection{Page 73, Exercise 5.34}%

In the hint of the book we must check that $C_\nnn$ dominates $A$, that is $\mmm\subset A\cap\nnn_\nnn$. But we have $\mmm\subset A\cap\nnn\subset A\cap\nnn_\nnn$. 

\subsection{Page 73, Exercise 5.35}%

Replacing the commutative diagram 
$$
\begin{tikzcd}
A\ar[dr,hook,"i"']\ar[rr,"f"]&&B\ar[dl,"g"]\\ 
&K
\end{tikzcd}
$$ 
of Exercise 5.34 with 
$$
\begin{tikzcd}
A'\ar[dr,hook,"f"']\ar[rr]&&B\otimes_AA'\ar[dl]\\ 
&K,
\end{tikzcd}
$$ 
we get $BA'=A'$ (as subrings of $K$), and thus $B\subset A'$.

In the second part of this exercise we can use the fact that the natural morphism 
$$
B/\mf N\to\prod_iB/\ppp_i
$$ 
is injective.

\section{About Chapter 6}%%

\subsection{Jordan-Hölder Theorem}% previous version https://docs.google.com/document/d/169ZLmbrpH7KkKqpxGDO2tkWgE_lWuJEHqSHujOJNo44/edit

The following proof is taken from Jeffrey Daniel Kasik Carlson's text cited at the beginning of the present text. 

Consider an $A$-module $M$ of finite length. Proposition 6.7, stated and proved on p.~77 of the book, says that all composition series of $M$ have the same length, and the book claims (p. 77) that the multiset of isomorphism classes of quotients of successive terms is the same for any choice of composition series. This claim is not proved, but the authors write that the proof is the same as for finite groups. We recall it here. 

Let $A$ be a ring. In this section ``module'' means ``$A$-module''. For any submodule $N$ of any module $M$, we write $\begin{tikzcd}M\ar[r,dash,"a"]&N\end{tikzcd}$ to indicate that $a$ is the isomorphism class of $M/N$. Moreover, if $\alpha$ is the composition series 
$$%\begin{equation}\label{jhm}
\begin{tikzcd}
M=M_0\ar[r,dash,"a_1"]&M_1\ar[r,dash,"a_2"]&\cdots\ar[r,dash,"a_n"]&M_n=0,
\end{tikzcd}
$$%\end{equation}
we denote by $\chi(\alpha)$ the element $a_1+\cdots+a_n$ of the free abelian group over the set $\{a_1,\dots,a_n\}$. 

Here is what we want to show: 

If 
$$%\begin{equation}\label{jhm}
\begin{tikzcd}
M=N_0\ar[r,dash,"b_1"]&N_1\ar[r,dash,"b_2"]&\cdots\ar[r,dash,"b_n"]&N_n=0
\end{tikzcd}
$$%\end{equation} 
is another composition series, denoted $\beta$, for the same module $M$, then we have $\chi(\alpha)=\chi(\beta)$. 

The proof proceeds by induction on the length $\ell(M)$ of $M$. If $\ell(M)=0$ or $1$, we are done. Assume inductively that the result holds for all modules of length less than $n$, and let $\ell(M)=n$. As indicated above, we suppose that $M$ has the two composition series: % of length $n$: 
$$
\begin{tikzcd}
&M\ar[dl,dash,"a_1"']\ar[dr,dash,"b_1"]\\ 
M_1\ar[d,dash,"a_2"']&&N_1\ar[d,dash,"b_2"]\\ 
M_2\ar[d,dash,"a_3"']&&N_2\ar[d,dash,"b_3"]\\ 
%M_3\ar[d,dash,"a_4"']&&N_2\ar[d,dash,"b_4"]\\ 
\vdots\ar[d,dash,"a_n"']&&\vdots\ar[d,dash,"b_n"]\\ 
M_n&&N_n.
\end{tikzcd}
$$ 
Case 1: $M_1=N_1$. We get $a_1=b_1$ and 
$$
\begin{tikzcd}
&M\ar[d,dash,"a_1"']\\ 
&M_1\ar[dl,dash,"a_2"']\ar[dr,dash,"b_2"]\\ 
M_2\ar[d,dash,"a_3"']&&N_2\ar[d,dash,"b_3"]\\ 
%M_3\ar[d,dash]&&N_2\ar[d,dash]\\ 
\vdots\ar[d,dash,"a_n"']&&\vdots\ar[d,dash,"b_n"]\\ 
M_n&&N_n,
\end{tikzcd}
$$ 
and we are done because the inductive hypotheses yields $a_2+\cdots+a_n=b_2+\cdots+b_n$.

Case 2: $M_1\ne N_1$. Setting $P_2:=M_1\cap N_1$, we get 
$$
\begin{tikzcd}
&M\ar[dl,dash,"a_1"']\ar[dr,dash,"b_1"]\\ 
M_1\ar[d,dash,"a_2"']\ar[dr,dash,"b_1"]&&N_1\ar[d,dash,"b_2"]\ar[dl,dash,"a_1"']\\ 
M_2\ar[d,dash,"a_3"']&P_2\ar[d,dash,"c_3"]&N_2\ar[d,dash,"b_3"]\\ 
M_3\ar[d,dash,"a_4"']&P_3\ar[d,dash,"c_4"]&N_2\ar[d,dash,"b_4"]\\ 
\vdots\ar[d,dash,"a_n"']&\vdots\ar[d,dash,"c_n"]&\vdots\ar[d,dash,"c_n"]\\ 
M_n&P_k&N_n.
\end{tikzcd}
$$ 
The inductive hypotheses implying 
$$
a_2+\cdots+a_n=b_1+c_3+\cdots+c_n
$$ 
and 
$$
a_1+c_3+\cdots+c_n=b_2+\cdots+b_n,%=a_1+c_3+\cdots+c_n
$$ 
we get 
$$
a_1+a_2+\cdots+a_n=a_1+b_1+c_3+\cdots+c_n
$$ 
$$
=b_1+a_1+c_3+\cdots+c_n=b_1+b_2+\cdots+b_n.
$$ 
This completes the proof.

\subsection{Page 78, Exercise 6.3}%

\textbf{Statement.} Let $M$ be an $A$-module and let $N_1,N_2$ be submodules of $M$. If $M/N_1$ and $M/N_2$ are Noetherian, so is $M/(N_1\cap N_2)$. Similarly with Artinian in place of Noetherian.

\textbf{Hint.} Consider the exact sequences 
$$
0\to\frac{N_1}{N_1\cap N_2}\to\frac M{N_1\cap N_2}\to\frac M{N_1}\to0
$$ 
and 
$$
0\to\frac{N_1+N_2}{N_2}\to\frac M{N_2}\to\frac M{N_1+N_2}\to0.
$$ 
\textbf{Mild generalization:} If $N_1,\dots,N_k$ are submodules of $M$ such that $M/N_i$ is noetherian for all $i$, then $M/(N_1\cap\cdots\cap N_k)$ is noetherian. 

\subsection{Page 78, Exercise 6.4}\label{64}

\textbf{Statement.} (a) Let $M$ be a Noetherian $A$-module and let $\aaa$ be the annihilator of $M$ in $A$. Prove that $A/\aaa$ is a Noetherian ring.

(b) If we replace ``Noetherian'' by ``Artinian'' in this result, is it still true?

\textbf{Hints.}

(a) Use the above generalization and Proposition 6.2 p.~75 of the book.

(b) See Example 3 p.~74 of the book.

\subsection{Page 79, Exercise 6.6}%

\textbf{Statement.} Prove that the following are equivalent: 

(i) $X$ is Noetherian.

(ii) Every open subspace of $X$ is quasi-compact. 

(iii) Every subspace of $X$ is quasi-compact.


\textbf{Hint.} To show that (ii) implies (i), note that the chain $U_1\subset U_2\subset\cdots$ of open subsets covers the open subset $U_1\cup U_2\cup\cdots$

\subsection{Page 79, Exercise 6.7}\label{6.7}%

\textbf{Statement.} A Noetherian space is a finite union of irreducible closed subspaces. [Consider the set $\Sigma$ of closed subsets of $X$ which are not finite unions of irreducible closed subspaces.] Hence the set of irreducible components of a Noetherian space is finite.

See Exercises 1.19 and 1.20 p.~13 of the book. 

\textbf{Solution.} This is a copy-and-paste of Jeffrey Daniel Kasik Carlson's solution in\medskip 

\centerline{\href{https://goo.gl/WEfMG7}{https://goo.gl/WEfMG7}}

Suppose, for a contradiction, that the result is false. Then there is a noetherian space $X$ such that $X$ is an element of the set $\Sigma$ of closed subsets of $X$ that are not unions of finitely many irreducible closed subspaces. Since $\Sigma$ is nonempty and $X$ is noetherian, $\Sigma$ has a minimal element $M$. Since $M$ is not a finite union of irreducible sets, it is not itself an irreducible set. Thus it is reducible, and so a union of two proper closed subspaces $C$ and $D$. But $C$ and $D$ are both finite unions of irreducible closed sets, so $M$ is as well, a contradiction.

Recall from Exercise 1.20iii p.~13 of the book that the irreducible components of a space $X$ are the maximal irreducible subsets of $X$, and that they are closed and cover $X$. Since a noetherian space $X$ is a union of finitely many irreducible closed subspaces, it is a fortiori a union of finitely many maximal such, so it is a union of finitely many irreducible components. Let $n$ be the least possible number needed to cover $X$, and let $C_1,\ldots,C_n$ be irreducible components covering $X$. If $C$ is any other irreducible closed set, then 
$$
C=\bigcup_{j=1}^n\ (C\cap C_j)
$$ 
expresses $C$ as a union of closed subsets; as $C$ is irreducible, $C\subset C_j$ for some $j$. Thus $C_1,\ldots,C_n$ are the only irreducible components of $X$. 

\subsection{Page 79, Exercise 6.8}\label{68}%

\textbf{Statement.} If $A$ is a Noetherian ring then $\Spec(A)$ is a Noetherian topological space. Is the converse true?

\textbf{Hint.} If $V(\aaa_1)\supset V(\aaa_2)\supset\cdots$, with $r(\aaa_i)=\aaa_i$, is a weakly decreasing chain of closed subsets of $X$, then $\aaa_1\subset\aaa_2\subset\cdots$ is a weakly increasing chain of ideals of $A$. 

\subsection{Page 79, Exercise 6.9}%

\textbf{Statement.} Deduce from Exercise 6.8 that the set of minimal prime ideals in a Noetherian ring is finite.

\textbf{Hint.} See Exercises 1.20iv p.~13 and 6.7 p.~79 (see Section~\ref{6.7} p.~\pageref{6.7}) of the book.

\subsection{Page 79, Exercise 6.10}%

\textbf{Statement.} If $M$ is a Noetherian module (over an arbitrary ring $A$) then $\oo{Supp}(M)$ is a closed Noetherian subspace of $\Spec(A)$.

\textbf{Solution.} By Exercise 3.19v p.~46 of the book we have $\oo{Supp}(M)=V(\aaa)$ with $\aaa:=\oo{Ann}(M)$. We also have $V(\aaa)\simeq\Spec(A/\aaa)$, and $A/\aaa$ is noetherian by Exercise 6.4 p.~78 (see Section~\ref{64} p.~\pageref{64}), and $\Spec(A/\aaa)$ is noetherian by Exercise 6.8 p.~79 (Section~\ref{68} p.~\pageref{68}).

\subsection{Page 79, Exercise 6.11}%

\textbf{Statement.} Let $f:A\to B$ be a ring homomorphism and suppose that $\Spec(B)$ is a Noetherian space (Exercise 5). Prove that $f^*:\Spec(B)\to\Spec(A)$ is a closed mapping if and only if $f$ has the going-up property (Chapter 5, Exercise 10). 

\textbf{Solution.} As it is stated in Exercise 5.10i p.~68 of the book that $f$ has the going-up property if $f^*$ is closed, it suffices to prove the converse. So, assuming that $f$ has the going-up property, let us show that $f^*$ is closed. 

Let $\bbb$ be a radical ideal of $B$, and let $\aaa$ be its contraction in $A$. It suffices to prove 
$$
f^*(V(\bbb))=V(\aaa).
$$ 
By Exercises 6.5, 6.7 (see Section~\ref{6.7} p.~\pageref{6.7}) and 1.20iv there are 
$$
\qqq_1,\dots,\qqq_n\in V(\bbb)
$$ 
such that the set of minimal elements of $V(\bbb)$ is $\{\qqq_1,\dots,\qqq_n\}$ and 
$$
V(\bbb)=\bigcup_{i=1}^n\ V(\qqq_i).
$$ 
Let $\ppp_i$ be the contraction of $\qqq_i$ in $A$. It suffices to prove: 
\begin{equation}\label{611a}
V(\aaa)=\bigcup_{i=1}^n\ V(\ppp_i)
\end{equation} 
and 
\begin{equation}\label{611b}
f^*(V(\qqq_i))=V(\ppp_i)\text{ for all }i.
\end{equation} 
Condition \eqref{611b} follows from the going-up property. To prove \eqref{611a}, let $\ppp$ be in $V(\aaa)$. It is enough to check that $\ppp$ is in $V(\ppp_i)$ for some $i$. We have 
$$
\ppp\supset\aaa=\bbb^{\oo c}=\left(\bigcap\ \qqq_i\right)^{\oo c}=\bigcap\ \ppp_i,
$$ 
and Proposition 1.11ii p.~8 of the book implies $\ppp\supset\ppp_i$ for some $i$, as was to be shown. 

\subsection{Page 79, Exercise 6.12}%

\textbf{Statement.} Let $A$ be a ring such that $\Spec(A)$ is a Noetherian space. Show that the set of prime ideals of $A$ satisfies the ascending chain condition. Is the converse true?

\textbf{Solution.} To show that the converse is not true, let $K$ be a field and $A:=K^{\mathbb N}$ the ring of $K$-valued functions on $\mathbb N$. As $A$ is absolutely flat, its prime ideals are maximal. Hence it suffices to show that there is an ascending chain $\aaa_1<\aaa_2<\cdots$ of radical ideals of $A$. We can set 
$$
\aaa_n:=\{f\in A\ |\ f(k)=0\text{ for all }k>n\}.
$$

\section{About Chapter 7}%%

\subsection{Page 80, a remark}%

Here is an example of a descending chain $A_0\supset A_1\supset\cdots$ such that each $A_n$ is noetherian but the intersection is not.

Consider the submonoid $M_n$ of $\mathbb N^2$ defined by 
$$
M_n:=\{a\in\mathbb N^2\ |\ a_2\ge1\ \lor\ a_1\ge n\}\supset M_{n+1},
$$ 
note that we have $M_n\supset M_{n+1}$, and that 
$$
M:=\bigcap_n\ M_n=\{a\in\mathbb N^2\ |\ a_2\ge1\}
$$ 
is \emph{not} finitely generated. Observe that the finite set 
$$
G_n:=\{(n,0),(n+1,0),\dots,(2n-1,0),(0,1),(1,1),(2,1),\dots,(n-1,1)\}
$$ 
$$
\subset M_n
$$ 
generates $M_n$. 

Here is a picture for $n=3$: The black dots are the points of $G_3$, the white dots are the points on $M_3\setminus G_3$, the crosses are the points in $\mathbb N^2\setminus M_3$.
$$
\begin{matrix}
2&\circ&\circ&\circ&\circ&\circ&\circ&\circ\\ 
1&\bullet&\bullet&\bullet&\circ&\circ&\circ&\circ\\ 
0&\times&\times&\times&\bullet&\bullet&\bullet&\circ\\ 
&0&1&2&3&4&5&6.
\end{matrix}
$$
Let $K$ be a field and $x$ and $y$ indeterminates, and set  
$$
A_n:=K\left[(x^iy^j)_{(i,j)\in G_n}\right],
$$ 
that is, $A_n$ is the sub-$K$-algebra of $K[x,y]$ generated by 
$$
\{x^iy^j\ |\ (i,j)\in G_n\}.
$$ 
Then the $A_n$ satisfy the conditions stated at the beginning of this section.

\subsection{Page 81, Hilbert Basis Theorem}%

\begin{thm}\label{hbt}
If $M$ is a noetherian $A$-module and $t$ is an indeterminate, then $M[t]$ is a noetherian $A[t]$-module. In particular, if $A$ is a noetherian ring, then so is $A[t]$.
\end{thm}

\begin{proof}
Assume by contradiction some sub-$A[t]$-module of $A[t]$ is \textbf{not} finite\-ly generated, and let $f_1,f_2,\dots$ be a sequence in $M[t]$ such that the sequence $N_i:=A[t]f_1+\cdots+A[t]f_i$ of sub-$A[t]$-modules of $A[t]$ increases, and $\deg f_i$ is minimum for this condition. Let $x_i\in M$ be the leading coefficient of $f_i$; let $n$ be such that $Ax_1+\cdots+Ax_n$ is the sub-$A$-module of $M$ generated by the $x_i$; let $a_1,\dots,a_n\in A$ satisfy 
$$
x_{n+1}=a_1\,x_1+\cdots+a_n\,x_n;
$$ 
set $d(i):=\deg f_{n+1}-\deg f_i$, 
$$
g:=\sum_{i=1}^n\,a_i\,t^{d(i)}f_i\in N_n\subset A[t];
$$ 
and observe that $\deg(f_{n+1}-g)$ is less than $\deg f_{n+1}$, which is impossible.
\end{proof}

\subsection{Page 83, Lemma 7.12}%

In the proof, the equalities $xy=0$ and $\oo{Ann}(x^n)=\oo{Ann}(x^{n+1})$ imply $(x^n)\cap(\,y)=(0)$. Indeed, if $a$ is in $(x^n)\cap(\,y)$ we have $a=bx^n=cy$ for some $b$ and $c$ in $A$, and thus $bx^{n+1}=cyx=0$. Now $bx^{n+1}=0$ implies $bx^n=0$, that is $a=0$. 

Note that primary ideals in noetherian rings can be reducible: the ideal $(x^2,xy,y^2)$ of $K[x,y]$ (where $K$ is a field, $x$ and $y$ are indeterminates) is $(x,y)$-primary but reducible because $(x,y^2)\cap(y,x^2)=(x^2,xy,y^2)$. 

%https://docs.google.com/document/d/1YYUDEGhoImy-b_Lx9foGoetelzzXbN1IiNbpo7pXh98/edit {comment} 180522

Here is a related result:

\emph{The following conditions on a ring $A$ are equivalent:}

(a) \emph{the Krull dimension of $A$ is at most zero,}

(b) \emph{$A/\nnn$ is absolutely flat, where $\nnn$ is the nilradical of $A$,}

(c) \emph{for each $a$ in $A$ the descending chain $(a)\supset(a^2)\supset\cdots$ stabilizes.}

\emph{Proof.} (a)$\implies$(b): We can assume $\nnn=(0)$. Let $a$ be in $A$. It suffices to show $(a)=(a^2)$. Let $\ppp$ be a prime ideal of $A$. Then the nilradical of $A_\ppp$ is $(0)$ and $\ppp_\ppp$ is the only prime ideal of $A_\ppp$. This implies that $A_\ppp$ is a field, and we get successively the equalities 
$$
(a)_\ppp=(a^2)_\ppp,\quad(a)_\ppp/(a^2)_\ppp=(0),\quad((a)/(a^2))_\ppp=(0).
$$ 
As $\ppp$ is an arbitrary prime ideal of $A$, this forces $(a)=(a^2)$.

(b)$\implies$(c): With obvious notation we have $\overline a=\overline a^2\overline b$ for some $b$ in $A$, that is $(a-a^2b)^n=0$ for some $n\ge1$. This is easily seen to imply $a^{n+1}\in(a^n)$ and thus $(a^{n+1})=(a^n)$. 

(c)$\implies$(a): Let $\ppp$ be a prime ideal of $A$ and let $a$ be in $A\setminus\ppp$. We have $a^n(1-ab)=0$ for some $b$ in $A$ and some $n$ in $\mathbb N$. In particular $a^n(1-ab)\in\ppp$, and thus $1-ab\in\ppp$. This implies that $A/\ppp$ is a field, and therefore that $\ppp$ is maximal. $\square$

\subsection{Page 83, Theorem 7.13}%

Recall the statement:

\emph{In a Noetherian ring $A$ every ideal has a primary decomposition.}

Let $E$ be a subset of a ring $A$. Recall that we have, by Section~\ref{vp2} p.~\pageref{vp2}, if $E$ is a subset of a noetherian ring $A$ 
$$
V(E)=\bigcup_{\ppp\in M}V(\ppp),
$$ 
where $M$ is the set of minimal elements of $V(E)$. 

Assume now that $A$ is \emph{noetherian}. 

Then the set $M$ is finite. As a result, we have %(for $A$ noetherian)

\emph{The topology of $\Spec(A)$ depends only on its poset structure.}

More precisely:

\emph{A subset of $\Spec(A)$ is closed if and only if it is a finite union of subsets of the form $V(\ppp)$ with $\ppp\in\Spec(A)$.}

Equivalently:

\emph{The closed subsets of $\Spec(A)$ are the closures of the finite subsets.}

\subsection{Page 84, Exercise 7.1}%

\textbf{Statement.} Let $A$ be a non-Noetherian ring and let $\Sigma$ be the set of ideals in $A$ which are not finitely generated. Show that $\Sigma$ has maximal elements and that the maximal elements of $\Sigma$ are prime ideals.

%[Let $\aaa$ be a maximal element of $\Sigma$, and suppose that there exist $x,y\in A$ such that $x\notin\aaa$ and $y\notin\aaa$ and $xy\in\aaa$. Show that there exists a finitely generated ideal $\aaa_0\subset\aaa$ such that $\aaa_0+(x)=\aaa+(x)$, and that $\aaa=\aaa_0+x\cdot(\aaa:x)$. Since $(\aaa:x)$ strictly contains $\aaa$, it is finitely generated and therefore so is $\aaa$.]

Hence a ring in which every prime ideal is finitely generated is Noetherian (I. S. Cohen).

\textbf{Solution.} Following the hint in the book, let $\aaa$ be a maximal element of $\Sigma$. Suppose by contradiction that there exist $x,y\in A$ such that $x\notin\aaa$, $y\notin\aaa$, $xy\in\aaa$. 

There are $s_i\in A$ such that $\aaa+(x)=(s_1,\dots,s_n)$. We have $s_i=b_i+t_ix$ with $b_i\in\aaa$, $t_i\in A$. Putting $\bbb=(b_1,\dots,b_n)\subset\aaa$, we get $\aaa+(x)=\bbb+(x)$. 

We claim $\aaa=\bbb+x\,(\aaa:x)$. 

The inclusion $\bbb+x\,(\aaa:x)\subset\aaa$ is clear. To prove the other inclusion, let $a$ be in $\aaa$ and let us show $a\in\bbb+x\,(\aaa:x)$. We have 
$$
a=\sum u_i\,(b_i+t_ix)=b+vx
$$ 
with $u_i\in A$, $b\in\bbb$, $v\in A$. This yields $vx=a-b\in\aaa$, and thus $v\in(\aaa:x)$, proving the claim.

Note that $y$ is in $(\aaa:x)$ but not in $\aaa$. This implies that $(\aaa:x)$ is finitely generated, and thus, in view of the claim, that $\aaa$ is finitely generated, contradiction.

\subsection{Page 84, Exercise 7.3}%

\textbf{Statement.} Let $\aaa$ be an irreducible ideal in a ring $A$. Then the following are equivalent: 

(i) $\aaa$ is primary,

(ii) for every multiplicatively closed subset $S$ of $A$ we have $(S^{-1}\aaa)^{\oo c}=(\aaa:s)$ for some $s\in S$,

(iii) for every $x\in A$ the sequence $(\aaa:x^n)$ is stationary.

\textbf{Hints:} 

(i) $\implies$ (ii): Use Proposition 4.8 p.~53. (This implication holds even if $\aaa$ is reducible.)

(ii) $\implies$ (iii): Use Proposition 3.11ii p.~41. (This implication also holds even if $\aaa$ is reducible.)

(iii) $\implies$ (i): Use the proof of Lemma 7.12 p.~83.

\subsection{Page 84, Exercise 7.5}%

\textbf{Statement.} Let $A$ be a Noetherian ring, $B$ a finitely generated $A$-algebra, $G$ a finite group of $A$-automorphisms of $B$, and $B^G$ the set of all elements of $B$ which are left fixed by every element of $G$. Show that $B^G$ is a finitely generated $A$-algebra.

\textbf{Hint.} Use Exercise 5.12 p.~68 (see Section~\ref{5.12} p.~\pageref{5.12}) and Proposition 7.8 p.~81.

\subsection{Page 84, Exercise 7.6}%

\textbf{Statement.} If a finitely generated ring is a field $K$, it is a finite field.

\textbf{Hint.} Let $A$ be the prime subring of $K$. Then $A=\mathbb Z$ or $A=\mathbb F_p$. Noether Normalization Theorem, as stated in Section~\ref{nnt} p.~\pageref{nnt}, and Proposition 5.7 p.~61 of the book imply that the first case is impossible and that, in the second case, $K$ is a finite degree extension of $\mathbb F_p$. 

\subsection{Page 85, Exercise 7.9}%

\textbf{Hints.} The inclusion 
$$
\aaa_{\mmm_1}\subset\left(\frac{x_0}1,\cdots,\frac{x_t}1\right)
$$ 
holds by the choice of $x_{s+1},\ldots,x_t$. 

The inclusion 
$$
\aaa_{\mmm_{r+1}}\subset\left(\frac{x_0}1,\cdots,\frac{x_t}1\right)
$$ 
holds by the choice of $x_1$ (indeed, $x_1/1$ is a unit of $A_{\mmm_{r+1}}$). 

If $\mmm$ is a maximal ideal distinct from all the $\mmm_i$, then the inclusion 
$$
\aaa_\mmm\subset\left(\frac{x_0}1,\cdots,\frac{x_t}1\right)
$$ 
holds by the choice of $\mmm_1,\ldots,\mmm_{r+s}$ (indeed, $x_0/1$ is a unit of $A_\mmm$).

\subsection{Page 85, Exercise 7.10}%

See Theorem~\ref{hbt} p.~\pageref{hbt} above.

\subsection{Page 85, Exercise 7.11}%

\textbf{Statement.} Let $A$ be a ring such that each local ring $A_\ppp$ is Noetherian. Is $A$ necessarily Noetherian?

\textbf{Hints.} See Exercises 2.28 and 3.10ii (see Section~\ref{310} p.~\pageref{310}) pages 35 and 44 of the book. 

\subsection{Page 85, Exercise 7.13}%

\textbf{Statement.} Let $f:A\to B$ be a ring homomorphism of finite type and let $f^*: \Spec(B)\to\Spec(A)$ be the mapping associated with $f$. Show that the fibers of $f^*$ are Noetherian subspaces of $B$. [Typo: it should be ``of $\Spec(B)$''.]

\textbf{Hint.} Let $\ppp$ be in $\Spec(A)$ and set $k:=A_\ppp/\ppp_\ppp$. By Section~\ref{321iv} p.~\pageref{321iv} and Exercise 6.8 p.~79 of the book (Section~\ref{68} p.~\pageref{68} above), it suffices to show that $k\otimes_AB$ is noetherian. To do this, note that there are indeterminates $x_1,\dots,x_n$ such that $B$ is a quotient of $A[x_1,\dots,x_n]$, and conclude that $k\otimes_AB$ is a quotient of $k[x_1,\dots,x_n]$. 

\subsection{Page 86, Exercise 7.17}%

Let $M$ be a noetherian $A$-module whose zero submodule $0\subset M$ is irreducible. Let us show that $0$ is primary in $M$. 

Let $a$ be an element of $A$ which is a zero divisor in $M$. It suffices to show that $a$ is nilpotent in $M$. 

The chain of submodules $(0:a)\subset(0:a^2)\subset\cdots$ stabilizes. Say $(0:a^n)=(0:a^{n+1})$. It suffices to show $a^nM=0$. 

Let $x\in M$ satisfy $x\ne0$ and $ax=0$. It is enough to prove $a^nM\cap Ax=0$. 

Let $y$ be in $a^nM\cap Ax=0$. We only need to show $y=0$. 

We have $y=a^nz=bx$ for some $z\in M$ and some $b\in A$, and we get 
$$
ay=a^{n+1}z=abx=bax=0,
$$ 
and thus $0=a^nz=y$. This completes the proof. 

\subsection{Page 86, Exercise 7.18}%

Proposition 7.17 p.~83 can be generalized to modules according to the following table: 
$$
\begin{array}{|c|c|c|c|c|c|c|}\hline
\aaa\ne(1)&x\in A&\qqq_i&\ppp_i=r(\qqq_i)&\aaa_i&\ppp_i^m\subset\qqq_i&\aaa_i\cap\ppp_i^m\\ \hline
N<M&x\in M&Q_i&\ppp_i=r(Q_i:M)&N_i&\ppp_i^mM\subset Q_i&N_i\cap\ppp_i^mM\\ \hline
\end{array}
$$ 

\subsection{Page 86, Exercise 7.19}% https://mathoverflow.net/q/12322/461
% version of 200528: https://docs.google.com/document/d/1T-TwxPnyJQv5Y1jqLIEEGUmE__PS3zMhLF3kQFoqZIU/edit
% previous version https://docs.google.com/document/d/1a-63-De-I8iBErGM5vuEuVpkBAJ1fOm2j0ECZIMzeT4/edit?folder=0ADbJLwZkWgt8Uk9PVA

\textbf{Statement.} Let $\aaa$ be an ideal in a Noetherian ring $A$. Let 
$$
\mathfrak{a}=\bigcap_{i=1}^r\mathfrak{b}_i=\bigcap_{j=1}^s\mathfrak{c}_j
$$ 
be two minimal decompositions of $\aaa$ as intersections of irreducible ideals. Prove that $r=s$ and that (possible after re-indexing the $\ccc_i$) $r(\bbb_i)=r(\ccc_i)$ for all $i$. State and prove an analogous result for modules.

\textbf{Solution.} Our goal is to prove:

\begin{prop}\label{719P1}
(a) Let $A$ be a ring, $M$ an $A$-module and $W$ a submodule. Let 
$$
W=\bigcap_{i=1}^nU_i=\bigcap_{j=1}^mV_j
$$ 
be two minimal decompositions of $W$ as intersections of irreducible submodules. Then $n=m$.

(b) If $M$ is noetherian, we have (possible after re-indexing the $V_j$) $r(U_i:M)=r(V_i:M)$ for all $i$.
\end{prop}

\subsubsection{Proof of Part (a) of Proposition~\ref{719P1}}%

\begin{lem}\label{719L2}
Let $A$ be a ring, $M$ an $A$-module and let $U_1$, $U_2$, $V_1$,\dots, $V_m$, $W$ be submodules of $M$ such that $U_1$ is irreducible and 
$$
W=U_1\cap U_2=V_1\cap\cdots\cap V_m.
$$ 
Then we have $W=V_i\cap U_2$ for some $i$. 
\end{lem} 

We summarize Lemma~\ref{719L2} by saying that ``we have replaced $U_1$ with $V_i$ in the equality $W=U_1\cap U_2$''. %We shall give two proofs of Lemma~\ref{719L2}, but before we show that it implies Part (a) of Proposition~\ref{719P1}.

Before proving Lemma~\ref{719L2}, we show that it implies Part (a) of Proposition~\ref{719P1}. 

It suffices to derive a contradiction from the assumption $n<m$. Using Lemma~\ref{719L2} repeatedly we get 
$$
V_{i_1}\cap\cdots\cap V_{i_n}=V_1\cap\cdots\cap V_m,
$$ 
in contradiction with the minimality of the right side.

\paragraph{Proof of Lemma~\ref{719L2}}${}$\medskip%

We follow Matthew Emerton: \href{https://mathoverflow.net/q/12322/461}{https://mathoverflow.net/q/12322/461}

We can assume $W=0$. Let 
$$
\phi_i:M\to M/U_i,\quad\phi:M\mono M/U_1\times M/U_2
$$ 
($i=1,2$) be the natural morphisms, note that $\phi$ is injective, and set $X_j:=V_j\cap U_2$ for $1\le j\le m$. 

It suffices to show $X_j=0$ for some $j$.

We have 
$$
\bigcap X_j\subset\bigcap V_j=0,\quad\phi(X_j)=\phi_1(X_j)\times0.
$$ 
By injectivity of $\phi$ we also have 
$$
\bigcap\phi(X_j)=\phi\left(\bigcap X_j\right)=0,
$$ 
and thus $\bigcap\phi_1(X_j)=0$. The zero submodule of $M/U_1$ being ir\-re\-ducible, this implies $\phi_1(X_j)=0$, hence $X_j=0$, for some $j$. This proves Lemma~\ref{719L2}.

Part (a) of Proposition~\ref{719P1} has been proved, and it only remains to prove Part~(b).

\subsubsection{Proof of Part (b) of Proposition~\ref{719P1}}%

Recall the setting: $A$ is a ring, $M$ is a noetherian $A$-module, $W$ is a submodule, 
$$
W=\bigcap_{i=1}^nU_i=\bigcap_{j=1}^nV_j
$$ 
are two minimal decompositions of $W$ as intersections of irreducible submodules. We must show that we have (possible after re-indexing the $V_j$) $r(U_i:M)=r(V_i:M)$ for all $i$.

Irreducible submodules being primary, the sets 
$$
\{r(U_1:M),\dots,r(U_n:M)\}\text{ and }\{r(V_1:M),\dots,r(V_n:M)\}
$$ 
are equal. Denote this set by $P$, write $[n]$ for the set $\{1,\dots,n\}$ and define the maps $f$ and $g$ from $[n]$ to $P$ by 
$$
f(i):=r(U_i:M),\quad g(i):=r(V_i:M).
$$ 
It suffices to show that, for all $\ppp\in P$, the fibers $f^{-1}(\ppp)$ and $g^{-1}(\ppp)$ are equipotent. 

Let $I$ be an isolated subset of $P$. The Second Uniqueness Theorem for modules implies 
$$
\bigcap_{i\in f^{-1}(I)}U_i=\bigcap_{i\in g^{-1}(I)}V_i.
$$ 
Then Part (a) of Proposition~\ref{719P1} entails that $f^{-1}(I)$ and $g^{-1}(I)$ are equipotent. In particular, if $\ppp\in P$ is minimal, $f^{-1}(\ppp)$ and $g^{-1}(\ppp)$ have same cardinality, and an obvious induction completes the proof. 

\subsection{Page 87, Exercise 7.20}\label{720}%

\textbf{Statement.} Let $X$ be a topological space and let $\mathcal F$ be the smallest collection of subsets of $X$ which contains all open subsets of $X$ and is closed with respect to the formation of finite intersections and complements.

(i) Show that a subset $E$ of $X$ belongs to $\mathcal F$ if and only if $E$ is a finite union of sets of the form $U\cap C$, where $U$ is open and $C$ is closed.

(ii) Suppose that $X$ is irreducible (see Section~\ref{irr} p.~\pageref{irr} above) and let $E\in\mathcal F$. Show that $E$ is dense in $X$ (i.e., that $\overline E=X$) if and only if $E$ contains a non-empty open set in $X$. 

\textbf{Solution.}

(i) Let $\mathcal F'$ be the set of those subsets $E$ of $X$ such that $E$ is a finite union of sets of the form $U\cap C$, where $U$ is open and $C$ is closed. It suffices to check that, if two sets are in $\mathcal F'$, then so are their respective complements and their intersection. This is straightforward. 

(ii) If $E$ contains a non-empty open set $U$, then $X=\overline E\cup U^*$, where $U^*$ is the complement of $U$, and the irreducibility of $X$ implies $X=\overline E$. Conversely, if 
$$
E=(U_1\cap C_1)\cup\cdots\cup(U_n\cap C_n)
$$ 
(obvious notation) is dense in $X$, then one of the $U_i\cap C_i$ is already dense in $X$. This implies $C_i=X$ and thus $U_i\subset E$.

\subsection{Page 87, Exercise 7.21}%

\textbf{Statement.} Let $X$ be a Noetherian topological space (Chapter 6, Exercise 5 --- see Section~\ref{720} p.~\pageref{720} above) and let $E\subset X$. Show that $E\in\mathcal F$ if and only if Condition~$(\star)$ below holds: 

$(\star)$ for each irreducible closed set $X_0\subset X$, either $\overline{E\cap X_0}\ne X_0$ or else $E\cap X_0$ contains a non-empty open subset of $X_0$. 

\textbf{Solution.} Let us denote by $\mathcal F(X)$ the set designated by $\mathcal F$ in Exercise 7.20 (see Section~\ref{720} p.~\pageref{720} above). 

To prove that $E\in\mathcal F(X)$ implies $(\star)$, note that $E\cap X_0\in\mathcal F(X_0)$ if $E\in\mathcal F(X)$ and use Exercise 7.20.

% previous version of the end of the section: https://docs.google.com/document/d/1032l7e5aaxVmdV--H-S8kD2aTal5DmKZaZMrcmIkI8M/edit

To prove that $(\star)$ implies $E\in\mathcal F(X)$, we follow the hint, that is, we assume by contradiction that $(\star)$ holds but that $E$ is not in $\mathcal F:=\mathcal F(X)$.

Let $\Sigma$ be the set of all closed subsets $X'$ of $X$ such that $E\cap X'\notin\mathcal F$. 

Then $\Sigma$ is nonempty because $X\in\Sigma$. Let $X_0$ be a minimal element of $\Sigma$. In particular 
\begin{equation}\label{721}
E\cap X_0\notin\mathcal F.
\end{equation}  
The subset $X_0$ is irreducible, for if we had $X_0=C\cup D$ with $C,D$ closed and $<X_0$, we would have $C,D\notin\Sigma$ by minimality of $X_0$, and thus $E\cap C$ and $E\cap D$ would be in $\mathcal F$, which would imply 
$$
\mathcal F\ni(E\cap C)\cup(E\cap D)=E\cap(C\cup D)=E\cap X_0\notin\mathcal F.
$$ 
We claim 
\begin{equation}\label{oex0}
\overline{E\cap X_0}=X_0
\end{equation}
To prove \eqref{oex0}, assume by contradiction that we have $\overline{E\cap X_0}<X_0$. The minimality of $X_0$ implies 
\begin{equation}\label{eco}
E\cap\overline{E\cap X_0}\in\mathcal F.
\end{equation}
We have 
$$
E\cap X_0\subset E\cap\overline{E\cap X_0}
$$ 
because $E\cap X_0\subset E$ and $E\cap X_0\subset\overline{E\cap X_0}$. This implies 
$$
E\cap X_0=E\cap\overline{E\cap X_0}.
$$ 
In view of \eqref{721} and \eqref{eco}, this gives the contradiction needed to prove \eqref{oex0}.

Now $(\star)$ implies that there is a nonempty open subset $U$ of $X_0$ such that $U\subset E$. 

We have $U<X_0$ because $U=X_0$ would imply 
$$
\mathcal F\ni X_0=E\cap X_0\notin\mathcal F
$$ 
by \eqref{721}. 

The set $C:=X_0\setminus U$ is closed in $X$, and we have $X_0=U\sqcup C$ (disjoint union), $U\ne\varnothing\ne C$, and thus
$$
E\cap X_0=(E\cap U)\sqcup(E\cap C)=U\sqcup(E\cap C).
$$ 
As $U\ne\varnothing$, we get $E\cap C<E\cap X_0$, and thus $E\cap C\in\mathcal F$ by minimality of $X_0$. Then the above display implies $E\cap X_0\in\mathcal F$, contradicting again \eqref{721}.

\subsection{Page 87, Exercise 7.22}%

\textbf{Statement.} Let $X$ be a Noetherian topological space and let $E$ be a subset of $X$. Show that $E$ is open in $X$ if and only if, for each irreducible closed subset $X_0$ in $X$, either $E\cap X_0=\varnothing$ or else $E\cap X_0$ contains a non-empty open subset of $X_0$.

\textbf{Solution.} If $E$ is open in $X$, then the indicated condition holds because $E\cap X_0\ne\varnothing$ implies that $E\cap X_0$ is a non-empty open subset of $X_0$ contained in $E\cap X_0$. 

Assume that $E$ is not open in $X$. Set $F:=X\setminus E$. Then $F$ is not closed. Put 
$$
\Sigma:=\{\ X'\subset X|\ X'\text{ closed, }F\cap X'\text{ not closed}\}.
$$ 
In particular $X$ belongs to $\Sigma$. Let $X_0$ be a minimal element of $\Sigma$.

It suffices to show:

\qquad(a) $X_0$ is irreducible,

\qquad(b) $E\cap X_0\ne\varnothing$,

\qquad(c) $E\cap X_0$ contains no non-empty open subset of $X_0$.

Proof of (a): The conditions $X_0=Y_1\cup Y_2$ with $Y_i<X_0$ and $Y_i$ closed would imply $F\cap X_0=(F\cap Y_1)\cup(F\cap Y_2)$ with $F\cap Y_i$ closed and $F\cap X_0$ not closed, which is impossible.

Proof of (b): The equality $E\cap X_0=\varnothing$ would imply $F\cap X_0=X_0$ with $F\cap X_0$ not closed and $X_0$ closed, a contradiction.

Proof of (c): Assume $E\cap X_0\supset U\ne\varnothing$ with $U$ open in $X_0$. It suffices to derive a contradiction. Set $X_1:=X_0\setminus U$. We clearly have $X_1<X_0$. 

We claim: $F\cap X_1=F\cap X_0$. 

It is enough to show $F\cap X_0\subset F\cap X_1$. Let $a$ be in $F\cap X_0$. As $a$ cannot be in $U$ (because this would imply $a\in E\cap F=\varnothing$), the point $a$ is in $X_0\setminus U=X_1$, and the claim is proved.

The claim implies $X_1\in\Sigma$, contradicting the minimality of $X_0$. This completes the proof of (c).

\subsection{Page 87, Exercise 7.23}%

The fact that ``$E$ is quasi-compact'' in the hint follows from Exercise 6.6 p.~79 of the book. The phrase ``where $X_0=\Spec(A/\ppp)$'' follows from Section~\ref{irr} p.~\pageref{irr} above. 

Here are some details about various steps:

$\bu$ Restriction to the case when $A$ is a domain and $f$ is injective: We have $X_0=V(\ppp)\simeq\Spec(A/\ppp)$ for some $\ppp\in X$. If $\overline f$ is the natural monomorphism $A/\ppp\to B/\ppp^{\oo e}$, then the diagram below, where the vertical arrows are the obvious homeomorphisms, commutes: 
$$
\begin{tikzcd}
\Spec(B/\ppp^{\oo e})\ar[r,"\overline f^*"]\ar[d,leftrightarrow]&\Spec(A/\ppp)\ar[d,leftrightarrow]\\ 
f^{*-1}(X_0)\ar[r,"f^*"']&X_0.
\end{tikzcd}
$$ 
$\bu$ Restriction to the case when $A$ and $B$ are domains and $f$ is injective: As $X$ is irreducible, at least one of the $f^*(Y_i)$ is dense. We have $Y_i\simeq\Spec(B/\qqq)$ for some $\qqq\in Y$. We can replace $B$ with $B/\qqq$, i.e. we can assume that $B$ is a domain and $f^*(Y)$ is dense, and Exercise 1.21v p.~13 of the book (see Section~\ref{121v} p.~\pageref{121v} above) implies that $f$ is injective. 

$\bu$ Last step: See Section~\ref{5.21} p.~\pageref{5.21} above.

\subsection{Page 87, Exercise 7.24}% 

Let us spell out the last two sentences of the hint.

Let $\ppp_0$ be in $X$, and set $X_0:=V(\ppp_0)$. Assuming that $f$ has the going-down property, we want to show that $E:=f^*(Y)$ is open in $X$. Suppose $E\cap X_0\ne\varnothing$, and thus 
\begin{equation}\label{p0e}
\ppp_0\in E
\end{equation} 
(by the going-down property). As $E$ is constructible by Exercise 7.23, it suffices, in view of Exercise 7.22, to show that $E\cap X_0$ contains a nonempty open subset of $X_0$, and Exercise 7.20ii (see Section~\ref{720} p.~\pageref{720} above) tells us that it is even enough to check the inclusion 
\begin{equation}\label{724}
X_0\subset\overline{E\cap X_0}.
\end{equation} 
Setting 
$$
\aaa:=\bigcap_{\ppp\in E\cap X_0}\ppp,
$$ 
we get $\aaa\subset\ppp_0$ because $\ppp_0\in E\cap X_0$ by \eqref{p0e}, that is 
$$
X_0=V(\ppp_0)\subset V(\aaa)=\overline{E\cap X_0},
$$ 
proving \eqref{724}.

\section{About Chapter 8}%%

\subsection{Theorem 8.5 p. 90}\label{8.5}%

Theorem 8.5 implies that an Artin ring $A$ is a finite length $A$-module. In particular Propositions 6.7 and 6.8 p.~77 of the book apply to chains of ideals of $A$.

\subsection{Proposition 8.6 p. 90}\label{8.6}%

I suggest the following restatement of Proposition 8.6:

\emph{Let $A$ be a noetherian local ring, $\mmm$ its maximal ideal. Then exactly one of the following two statements is true:}

(i) $\mmm^n\ne\mmm^{n+1}$ \emph{for all $n$ and $A$ is \emph{not} Artin},

(ii) $\mmm^n=0$ \emph{for some $n$, in which case $A$ is an Artin local ring.}

In particular 
\begin{equation}\label{86}
A\text{ is Artin $\iff\mmm$ is nilpotent.}
\end{equation} 

By Proposition 8.6 and Proposition 4.2 p.~51, we have:

\emph{Every proper ideal of an Artin local ring is $\mmm$-primary (where $\mmm$ is the maximal ideal).} 

This fact is implicitly used in the proof of Theorem 8.7.

\subsection{Theorem 8.7 p. 90}

It seems to me that the second part of the proof of Theorem 8.7 can be simplified. We must check the essential uniqueness of the decomposition of an Artin ring $A$ as a finite product of Artin local rings $A_i$. But, looking at minimal idempotents, one sees that, if a ring can be decomposed as a product of finitely many local rings, such a decomposition is essentially unique. More precisely, the kernels of the morphisms from the ring to the various factors are exactly those ideals which are maximal among the proper ideals generated by an idempotent. %To do this it suffices to observe that the kernels of the canonical projections $A\to A_i$ are precisely the minimal primary ideals of $A$.%%, for each minimal primary ideal $\mathfrak q$ of $A$, there is a unique $i$ such that $\mathfrak q$ is the kernel of the canonical projection onto $A_i$.

\subsection{Page 91, Proposition 8.8}\label{88}%

Let $A$ be an Artin local ring with maximal ideal $\mmm$ and consider the condition

$(*)$ there is an $x$ in $\mmm$ such that every ideal of $A$ is of the form $(x^r)$. 

The proof of Proposition 8.8 shows that $(*)$ is equivalent to any of the conditions (i), (ii) or (iii). 

\subsection{Page 92, Exercise 8.4}%

To prove (i)$\implies$(iii) on can use Section~\ref{res} p.~\pageref{res}, Claim~1 above and the following Lemma:

\begin{lem}
Let $A\to B$ be an integral ring morphism, let $S\subset A$ be a multiplicative subset, and let $\ppp$ be a prime ideal of $A$ disjoint from $S$. Then the induced morphism $S^{-1}A/S^{-1}\ppp\to S^{-1}B/(S^{-1}\ppp)^{\oo e}$ is integral.
\end{lem} 
 
\begin{proof}
By Proposition 5.6ii p.~61 of the book, $S^{-1}A\to S^{-1}B$ is integral. By Proposition 3.11iv p.~41 of the book, $S^{-1}\ppp$ is prime. By Theorem 5.10 p.~62 of the book, $S^{-1}\ppp$ is contracted. Now the Lemma follows from Proposition 5.6i p.~61 of the book.
\end{proof}

Hint for the last question, which is ``If $f$ is integral and the fibres of $f^*$ are finite, is $f$ necessarily finite?'': Consider the case when $A$ and $B$ are fields. 

Note that $\mathbb Z\to\mathbb Z[\frac12]$ satisfies (ii) but not (i).

\subsection{Page 92, Exercise 8.6}% £

\textbf{Statement.} Let $A$ be a Noetherian ring and $\qqq$ a $\ppp$-primary ideal in $A$. Consider chains of primary ideals from $\qqq$ to $\ppp$. Show that all such chains are of finite bounded length, and that all maximal chains have the same length.

\textbf{Hints.} See Section~\ref{8.5} p.~\pageref{8.5} above. 

Note that 

\qquad the poset of $\ppp$-primary ideals of $A$ between $\qqq$ and $\ppp$ 

is canonically isomorphic to 

\qquad the poset of $\ppp_\ppp$-primary ideals of $A_\ppp$ containing $\qqq_\ppp$, 

and that the above poset is equal to 

\qquad the poset of proper ideals of $A_\ppp$ containing $\qqq_\ppp$. 

In particular all proper ideals of $A_\ppp$ containing $\qqq_\ppp$ are $\ppp_\ppp$-primary. (This is because all proper ideals of an Artin local ring $(A,\mmm)$ are $\mmm$-primary.)

\section{About Chapter 9}%%

\subsection{Page 94, Proposition 9.2}\label{92}%

In the setting of Proposition 9.2, the condition

(v') every non-zero ideal can be written in a unique way as a power of $\mmm$

is equivalent to any of the conditions (i) to (vi). The same holds for

(vi') there exists $x\in A$ such that every non-zero ideal can be written in a unique way as $(x^n)$.

This follows from Statement (B) in the proof of Proposition 9.2.

\subsection{Page 95}%

$\bu$ Proof of the implication (iv) $\implies$ (v) in Proposition 9.2 p.~94. It is written: ``from (8.8) (applied to $A/\mmm^n$) it follows that $\aaa$ is a power of $\mmm$''. The fact that $A/\mmm^n$ is Artin follows from Proposition 8.6 p.~90 of the book (see Section~\ref{8.6} p.~\pageref{8.6} above). %Actually it is better to use the version of (8.8) given in Section~\ref{88} above.

$\bu$ The proof of the equivalence (ii) $\iff$ (iii) in Theorem 9.3 uses Statement (B) in the proof of Proposition 9.2 p.~94.

$\bu$ Corollary 9.4. See Section~\ref{92} above.

$\bu$ The domain $\mathbb Z[-5]$ is Dedekind but doesn't have unique factorization. %The fact that $\mathbb Z[-5]$ is Dedekind follows from Theorem 5.15 p.~63 and Theorem 9.5 p.~96.???
The fact that $\mathbb Z[-5]$ doesn't have unique factorization follows from the fact that $2\cdot3$ and $$\left(1+\sqrt5\right)\left(1-\sqrt5\right)$$ are irreducible factorizations of $6$.%Indeed, it is easy to check that $2\cdot3$ and $$\left(1+\sqrt5\right)\left(1-\sqrt5\right)$$ are irreducible factorizations of $6$.

\subsection{Page 97, proof of Theorem 9.8}%

The last sentence of the proof of Theorem 9.8 is ``Then $\aaa$ is invertible, hence $\bbb=\aaa_\ppp$ is invertible by (9.7)''. I think the authors meant (9.6). Here are more details: We have $\bbb=\aaa_\ppp$ by Proposition 3.11i p.~41 and Proposition 1.17.iii p.~10 (see the proof of Proposition 7. p.~80). Moreover $\aaa_\ppp$ is invertible by Proposition 9.6 ((i) $\implies$ (ii)). 

\subsection{Page 99, Exercise 9.1}%

See Section~\ref{512} p.~\pageref{512} above.

\subsection{Page 99, Exercise 9.2}%

See Exercise 1.1iv p.~11 of the book. 

It suffices to show $c(f)_\mmm c(g)_\mmm\subset c(fg)_\mmm$ for all maximal ideal $\mmm$. 

\subsection{Page 99, Exercise 9.3}%

\textbf{Statement.} A valuation ring (other than a field) is Noetherian if and only if it is a discrete valuation ring.

\textbf{Solution.} It is proved on p.~94 of the book that discrete valuation ring are noetherian. Exercise 5.28 p.~72 of the book (see Section~\ref{528} p.~\pageref{528} above) says that the ideals of a valuation ring are totally ordered. In particular finitely generated ideals are principal. Thus any noetherian valuation ring $A$ is a principal ideal domain. Hence, if $A$ is not a field, then it is of dimension one, and is therefore a discrete valuation ring by Proposition 9.2 p.~94 of the book.

\subsection{Page 99, Exercise 9.4}%

\textbf{Statement.} Let $A$ be a local domain which is not a field and in which the maximal ideal $\mmm$ is principal and $\bigcap_{n\ge1}\mmm^n=(0)$. Prove that $A$ is a discrete valuation ring.

\textbf{Hint.} Let $p$ be a generator of $\mmm$. 

There is a unique map $w:A\setminus\{0\}\epi\mathbb N$ such that $a\in\mmm^{w(a)}\setminus\mmm^{w(a)+1}$ for all $a\in A\setminus\{0\}$. We have $w(ab)=w(a)+w(b)$ for all $a,b\in A\setminus\{0\}$, and $a\in A\setminus\{0\}$ is a unit if and only if $w(a)=0$. Moreover, if $a\in A\setminus\{0\}$, then $a=p^{w(a)}u$ with  $u$ a unit.

If $\aaa$ is a nonzero ideal of $A$, and if $n$ is the least nonnegative integer such that $p^n\in\aaa$, %there is an $a\in\aaa\setminus\{0\}$ with $w(a)=n$, 
then $\aaa=(p^n)$. 

This implies that $A$ is a principal ideal domain, and thus (Proposition 9.2 p.~94 of the book) a Dedekind domain.

\subsection{Page 99, Exercise 9.6}% previous version https://docs.google.com/document/d/1-fJd9kFo9QxKoJMaVo409NohFlWdnzTlFu3ZGrDlxZU/edit?folder=0ADbJLwZkWgt8Uk9PVA

\textbf{Statement.} Let $M$ be a finitely-generated torsion module ($T(M)=M$) over a Dedekind domain $A$. Prove that $M$ is uniquely representable as a finite direct sum of modules $A/\ppp_i^{n_i}$, where the $\ppp_i$ are non-zero prime ideals of $A$.

\textbf{Solution.} Let $M$ be a finitely-generated torsion module over de Dedekind domain $A$. Then $M$ has a nonzero annihilator $\aaa$. Let $\aaa=\ppp_1^{n_1}\cdots\ppp_r^{n_r}$ be the prime factorization of $\aaa$, and note that $M$ is a module over the ring 
$$
A/\aaa\simeq A/\ppp_1^{n_1}\times\cdots\times A/\ppp_r^{n_r}. 
$$ 
This yields an obvious decomposition $M=M_1\oplus\cdots\oplus M_r$ of $M$, where each $M_i$ is an $A/\ppp_i^{n_i}$-module. 

Thus we can assume $\aaa=\ppp^n$ with $\ppp$ maximal, and it suffices to show that 

$(\star)$ there is a unique $k$-tuple $(m_1,\dots,m_k)$ of integers such that 
$$
1\le m_1\le\cdots\le m_k\le n
$$ 
and 
$$
M\simeq A/\ppp^{m_1}\oplus\cdots\oplus A/\ppp^{m_k}
$$ 
(isomorphism of $A$-modules).

We leave it to the reader to check that there is a unique pair $(\phi,\psi)$ of $A$-algebra morphisms 
$$
\begin{tikzcd}
A/\ppp^n\ar[r,yshift=0.9ex,"\phi"]&A_\ppp/\ppp_\ppp^n\ar[l,yshift=-0.9ex,"\psi"]
\end{tikzcd}
$$ 
such that 
$$
\phi(a+\ppp^n)=\frac a1+\ppp_\ppp^n\text{ and }\psi\left(\frac as+\ppp_\ppp^n\right)=s'a+\ppp^n
$$ 
for all $a\in A$ and all $s,s'\in A\setminus\ppp$ satisfying $ss'-1\in\ppp^n$, and that $\phi$ and $\psi$ are inverse isomorphisms. 

For any $A/\ppp^n$-module $N$ write $N'$ for the the $A$-module $N$ viewed as an $A_\ppp/\ppp_\ppp^n$-module via the formula $ax:=\psi(a)x$ for all $a\in A_\ppp/\ppp_\ppp^n$ and all $x\in N$. Note that $N$ is finitely generated if and only if $N'$ is.  

Going back to our module $M$, note that, $A_\ppp$ being a principal ideal domain and $\ppp_\ppp$ being maximal, there is a unique $k$-tuple $(m_1,\dots,m_k)$ of integers such that 
$$
1\le m_1\le\cdots\le m_k\le n
$$ 
and 
$$
M'\simeq A_\ppp/\ppp_\ppp^{m_1}\oplus\cdots\oplus A_\ppp/\ppp_\ppp^{m_k}
$$ 
(isomorphism of $A_\ppp$-modules). As $(A/\ppp^{m_i})'\simeq A_\ppp/\ppp_\ppp^{m_i}$, this implies $(\star)$. 

\subsection{Page 99, Exercise 9.7}%

\textbf{Statement.} Let $A$ be a Dedekind domain and $\aaa\ne0$ an ideal in $A$. Show that every ideal in $A/\aaa$ is principal.

Deduce that every ideal in $A$ can be generated by at most two elements. 

\textbf{Hint.} See the previous exercise. More precisely, show that any nontrivial quotient of $A$ is a principal ideal ring, and that this implies that, given any nonzero element $x\in\aaa$ there is a $y\in\aaa$ such that $\aaa=(x,y)$. 

\section{About Chapter 10}%%

\subsection{Page 102, Completions 1}%

In the first paragraph after the proof of Lemma 10.1, it is written ``Two Cauchy sequences are equivalent if $x_\nu-y_\nu\to0$ in $G$''. Note that a sequence may have several limits. 

In the penultimate paragraph of p.~102 it is claimed that $\widehat f:\widehat G\to\widehat H$ is continuous, but no topologies have been defined on $\widehat G$ and $\widehat H$. It is simpler to fix this problem in the setting considered in the last paragraph of p.~102. We shall use Corollary 10.4 p.~105. Note that, in this corollary, $\widehat G_n$ really means $(G_n)^\wedge$, which can, and will, be viewed as a subgroup of $\widehat G$. 

Then these subgroups do define a topology on $\widehat G$, and the canonical morphism $c:G\to\widehat G$ is continuous and its image is dense. 

Moreover $\widehat f:\widehat G\to\widehat H$ is continuous if $f:G\to H$ is. (Here we assume that the topology of $G$ and $H$ are such that $0$ has a countable fundamental system of neighborhoods.)

\subsection{Page 103, Completions 2}%

The penultimate display is 
$$
\widehat G\simeq\varprojlim G/G_n.
$$ 
More precisely, let $\pi_i:G\to G/G_i$ be the canonical projection; let $C\subset G^{\mathbb N}$ be the group of Cauchy sequences (this is indeed easily seen to be a subgroup of $G^{\mathbb N}$); and note that $x\in G^{\mathbb N}$ is Cauchy if and only if for each $i$ the sequence $j\mapsto\pi_i(x_j)$ is eventually constant, in which case we write $\pi_i(x_\infty)$ for its eventual value. Then there is a unique group morphism 
$$
\varphi:C\to\varprojlim G/G_i
$$ 
such that $\varphi(x)_i=\pi_i(x_\infty)$ for all $x$ in $C$ and all $i$ in $\mathbb N$, this morphism is an epimorphism, and it induces an isomorphism 
$$
\widehat G\xrightarrow\sim\varprojlim G/G_i.
$$ 

\subsection{Page 105}%

Even if it is very easy, we give additional details about the proofs of Corollary 10.4 and Proposition 10.5. 

Setting $G':=G_{n_0}$ in Corollary 10.3 yields the exact sequence
$$
0\to\widehat{G_{n_0}}\to\widehat G\to(G/G_{n_0})\ \widehat{}\to0.
$$ 
Recall that $p:G\to G/G_{n_0}$ is the natural morphism. For $n\ge n_0$ we have $pG_n=0$. This implies $(G/G_{n_0})\ \widehat{}\simeq G/G_{n_0}$ (canonical isomorphism), and thus 
$$
\widehat G/\widehat{G_{n_0}}\simeq G/G_{n_0},
$$ 
that is, $\widehat G/\widehat{G_n}\simeq G/G_n$ for all $n$. This entails $\widehat{\widehat G\,}\simeq\widehat G$.

\subsection{Page 109, Proposition 10.15}%

Proposition 10.15 (iii) says 
\begin{equation}\label{1015a}
\aaa^n/\aaa^{n+1}\simeq\hat\aaa^n/\hat\aaa^{n+1}.
\end{equation}
Moreover \eqref{1015a} is derived from 
\begin{equation}\label{1015b}
A/\aaa^n\simeq\hat A^n/\hat\aaa^n,
\end{equation} 
but in the sequel \eqref{1015b} is needed at various places, and it is justified by stating that it follows from \eqref{1015a}. For instance in the proof of Proposition 10.16 it is written

``By (10.15) iii) we have $\hat A/\hat\mmm\simeq A/\mmm$''.

In fact, I think it's better to prove $\hat\aaa^n/\hat\aaa^{n+k}\simeq\aaa^n/\aaa^{n+k}$ directly by noting that we have 
$$
\hat\aaa^n/\hat\aaa^{n+k}\simeq(\aaa^n)^\wedge/(\aaa^{n+k})^\wedge\simeq(\aaa^n/\aaa^{n+k})^\wedge\simeq\aaa^n/\aaa^{n+k},
$$ 
the first isomorphism following from Proposition 10.15 (ii), the second from Corollary 10.3 p.~104, and the third being obvious.

Note that (i), (ii) and the proof of (ii) imply  
$$
(\aaa^n)^\wedge=\hat A\,\aaa^n=(\hat A\,\aaa)^n=\hat\aaa^n\simeq\hat A\otimes_A\aaa^n.
$$ 
In particular, the equality $(\aaa^n)^\wedge=\hat A\,\aaa^n$ shows that 
$$
\boxed{\text{the $\aaa$-topology and the $\hat\aaa$-topology of $\hat A$ coincide.}} 
$$
The $\aaa$-topology is finer than the $\hat\aaa$-topology even if $A$ is not noetherian. 

Note also 
\begin{prop}\label{1015}
Let $A$ be a noetherian ring, $\aaa$ an ideal of $A$ and $M$ a finitely generated $A$-module, and regard $(\aaa M)^\wedge$ as a sub-$A$-module of $\widehat M$. Then the sub-$A$-modules $(\aaa M)^\wedge,\widehat\aaa M$ and $\aaa\widehat M$ of $\widehat M$ coincide and are in fact sub-$\widehat A$-modules of $\widehat M$. Moreover they are isomorphic to $\widehat A\otimes_A\aaa M$. %$\widehat A\otimes_A\aaa\otimes_AM$. %then we have $$(\aaa M)^\wedge=\widehat\aaa M=\aaa\widehat M\simeq\widehat A\otimes_A\aaa\otimes_AM.$$ (Here $(\aaa M)^\wedge,\widehat\aaa M$ and $\aaa\widehat M$ are viewed as sub-$A$-modules of $\widehat M$.)
\end{prop} 
The proof is the same as that of Proposition 10.15i in the book. 

\subsection{Page 110, Corollary 10.19}\label{1019}% 

Statement in the book:

Let $A$ be a Noetherian ring, $\aaa$ an ideal of $A$ contained in the Jacobson radical and let $M$ be a finitely-generated $A$-module. Then the $\aaa$-topology of $M$ is Hausdorff, i.e. $\bigcap\aaa^nM=0$. 

Here is a slightly stronger statement: 

\emph{Let $A$ be a Noetherian ring and $\aaa$ an ideal of $A$. % and let $M$ be a finitely-generated $A$-module. 
Then the $\aaa$-topology of $M$ is Hausdorff for all finitely-generated $A$-module $M$, i.e. $\bigcap\aaa^nM=0$, if and only if $\aaa$ is contained in the Jacobson radical.} 

Let us prove that the $\aaa$-topology is not necessarily Hausdorff if $\aaa$ is not contained in the Jacobson radical. Indeed, if $\mmm$ is a maximal ideal not containing $\aaa$, then the $\aaa$-topology of $A/\mmm$ is the coarse topology. 

\subsection{Page 111, Corollaries 10.20 and 10.21}%

About the proof of Corollary 10.20: The fact that ``an $\mmm$-primary ideal of $A$ is just any ideal contained between $\mmm$ and some power $\mmm^n$'' has already been stated as Corollary 7.16 p.~83.

About Corollary 10.21: Let $a$ be in $A$. We must show: 

$a\in\qqq$ for all $\ppp$-primary ideal $\qqq$ $\iff$ there is an $s$ in $A\setminus\ppp$ such that $as=0$. 

\begin{proof} 
If $s$ in $A\setminus\ppp$ satisfies $as=0$, and if $\qqq$ is a $\ppp$-primary ideal, then $a$ is in $\qqq$.

If $as\neq0$ for all $s\in A\setminus\ppp$, then $\frac a1\neq0$, and Corollary 10.20 implies that there is a $\ppp$-primary ideal $\qqq$ such that $\frac a1\notin\qqq_\ppp$, and thus $a\notin\qqq$. 
\end{proof}

\subsection{Page 113, Exercise 10.1}% 

Hint: For any abelian group $G$ write $\widehat G$ for the $p$-adic completion of $G$. 

We claim that 
\begin{equation}\label{nn}
G\mapsto\widehat G\text{ is neither left exact not right exact.}
\end{equation}
Set $C_j:=\mathbb Z/(p^j)$ for $j\ge0$ and 
$$
A:=\bigoplus_{j\ge1}C_1,\quad B:=\bigoplus_{j\ge1}C_j.
$$ 
The exact sequences 
$$
0\to C_1\xr{\alpha_j}C_j\xr{\pi_j}C_{j-1}\to0,
$$ 
where $\pi_j$ is the multiplication by $p$ (we use the isomorphism $pC_j\simeq C_{j-1}$ for $j\ge1$), induce an exact sequence 
\begin{equation}\label{abb}
0\to A\xr{\alpha}B\xr{\pi}B\to0.
\end{equation} 
We claim 
\begin{equation}\label{ne}
\widehat A\xr{\widehat\alpha}\widehat B\xr{\widehat\pi}\widehat B\ \text{ is not exact.}
\end{equation} 
This will imply \eqref{nn}. As $\widehat A$ is isomorphic to $A$ (details left to the reader), we can rewrite \eqref{ne} as  
\begin{equation}\label{ne2}
A\xr{\widehat\alpha}\widehat B\xr{\widehat\pi}\widehat B\ \text{ is not exact.}
\end{equation} 
Write $\overline A$ for the completion of $A$ with respect to the filtration induced by the $p$-adic filtration of $B$. We leave it to the reader to check that applying Corollary 10.3 p.~104 of the book to \eqref{abb} yields the exact sequence 
$$
0\to\overline A\xr{\alpha'}\widehat B\xr{\widehat\pi}\widehat B\to0.
$$ 
We have 
$$
\overline A\simeq\prod_{j\le1}C_1
$$ 
(details again left to the reader), and thus $A<\overline A$. Let 
$$
a\in\overline A\setminus A.
$$ 
Then we have $\alpha'(a)\in\oo{Ker}\widehat\pi\setminus\oo{Im}\widehat\alpha$. This proves \eqref{ne2}, \eqref{ne} and \eqref{nn}.

\subsection{Page 114, Exercise 10.3}%

\textbf{Statement.} (a) Let $A$ be a Noetherian ring, $\aaa$ an ideal and $M$ a finitely-generated $A$-module. Using Krull's Theorem and Exercise~14 of Chapter~3, prove that 
$$
\bigcap_{n>0}\aaa^nM=\bigcap_{\mmm\supset\aaa}\Ker(M\to M_\mmm),
$$ 
where $\mmm$ runs over all maximal ideals containing $\aaa$.

(b) Deduce that
$$
\widehat M=0\iff\oo{Supp}(M)\cap V(\aaa)=\varnothing\quad(\text{in }\Spec(A)).
$$
\textbf{Solution.} (a) By Krull's Theorem (Theorem 10.17 p.~110 of the book), we have 
$$
E:=\Ker(M\to\widehat M)=\bigcap\aaa^nM=\bigcup_{a\in\aaa}\oo{Ann}_M(1+a). 
$$ 
Set 
$$
F:=\bigcap_{\mmm\supset\aaa}\Ker(M\to M_\mmm). 
$$ 
We must show $E=F$. The inclusion $E\subset F$ is easy (indeed we have $\oo{Ann}_M(1-a)\subset\aaa^nM$ for $a\in\aaa$ and $n\in\mathbb N$). To prove $F\subset E$, first note that we have $F_\mmm=0$ if $\mmm\supset\aaa$. By Exercise 3.14 p.~45 of the book (Section~\ref{314} p.~\pageref{314}), this implies $F=\aaa F$, hence $F=\aaa^nF\subset\aaa^nM$ for all $n$, hence $F\subset E$. 

(b) Set $\bbb:=\oo{Ann}(M)$. We have 
$$
\widehat M=0\iff M=\aaa M\iff(\exists\ a\in\aaa)\ 1-a\in\bbb
$$ 
$$
\iff\aaa+\bbb=(1)\iff\oo{Supp}(M)\cap V(\aaa)=\varnothing,
$$ 
the successive equivalences being justified as follows:

$\bu$ first equivalence: obvious, 

$\bu$ second equivalence: Corollary~2.5 p.~21 of the book,

$\bu$ third equivalence: obvious,

$\bu$ fourth equivalence: Exercise 3.19v p.~46 of the book. 

Details about the fourth equivalence: By Exercise 3.19v p.~46 of the book we have $\oo{Supp}(M)=V(\bbb)$, hence $\oo{Supp}(M)\cap V(\aaa)=V(\aaa+\bbb)$, hence 
$$
\oo{Supp}(M)\cap V(\aaa)=\varnothing\iff\aaa+\bbb=(1).
$$ 

\subsection{Page 114, Exercise 10.4}%

\textbf{Statement.} Let $A$ be a Noetherian ring, $\aaa$ an ideal in $A$, and $\widehat A$ the $\aaa$-adic completion. For any $x\in A$, let $\widehat x$ be the image of $x$ in $\widehat A$. 

(a) Show that\smallskip 

\centerline{$x$ not a zero-divisor in $A\implies\widehat x\ $ not a zero-divisor in $\widehat A$.} 

(b) Does this imply that\smallskip 

\centerline{$A$ is an integral domain $\implies\widehat A\ $ is an integral domain?}

\textbf{Answer to (b):} No. Take $\aaa:=(1)$. 

\subsection{Page 114, Exercise 10.5}%

\textbf{Statement.} Let $A$ be a Noetherian ring and let $\aaa,\bbb$ be ideals in $A$. If $M$ is any $A$-module, let $M^\aaa,M^\bbb$ denote its $\aaa$-adic and $\bbb$-adic completions respectively. If $M$ is finitely generated, prove that $(M^\aaa)^\bbb\simeq M^{\aaa+\bbb}$.

\textbf{Hint.} In view of the isomorphism $\widehat A\otimes_AM\simeq\widehat M$, it suffices to show 
\begin{equation}\label{aba+b}
(A^\aaa)^\bbb\simeq A^{\aaa+\bbb}. 
\end{equation} 
Using Proposition~10.2. p.~104 and Proposition~\ref{1015} p.~\pageref{1015}, and writing $L_i$ for 
$$
\lim_i,
$$ 
we have 
$$
(A^\aaa)^\bbb\simeq 
L_j\left(\frac{L_i\frac{A}{\aaa^i}}{\bbb^jL_i\frac{A}{\aaa^i}}\right)\simeq 
L_j\left(\frac{L_i\frac{A}{\aaa^i}}{L_i\bbb^j\frac{A}{\aaa^i}}\right)\simeq 
L_jL_i\left(\frac{\frac{A}{\aaa^i}}{\bbb^j\frac{A}{\aaa^i}}\right)
$$ 
$$
\simeq L_jL_i\left(\frac{A}{\aaa^i+\bbb^j}\right)
\simeq L_n\left(\frac{A}{(\aaa+\bbb)^n}\right)
\simeq A^{\aaa+\bbb}.
$$ 

\subsection{Page 114, Exercise 10.6}%

\textbf{Statement.} Let $A$ be a Noetherian ring and $\aaa$ an ideal in $A$. Prove that $\aaa$ is contained in the Jacobson radical of $A$ if and only if every maximal ideal of $A$ is closed for the $\aaa$-topology.

\textbf{Hint.} Let $A$ be a ring, $\aaa$ an ideal, and equip $A$ with the $\aaa$-adic topology. 

Then any ideal containing $\aaa$ is open and closed (because such an ideal is a union of $\aaa$-cosets). 

Moreover any maximal ideal $\mmm$ not containing $\aaa$ is dense.

To prove this, let us show that any nonempty open subset $U\subset A$ meets $\mmm$. Set $K:=A/\mmm$ and let $\pi:A\to K$ be the canonical projection. It suffices to check that $0\in\pi(U)$. But the $\aaa$-adic topology of $K$ being the coarse topology, $\pi(U)$ is the unique nonempty subset of $K$, that is $K$ itself. 

\subsection{Page 114, Exercise 10.7}%

\textbf{Statement.} Let $A$ be a Noetherian ring, $\aaa$ an ideal of $A$, and $\widehat A$ the $\aaa$-adic completion. Prove that $\widehat A$ is faithfully flat over $A$ (Chapter 3, Exercise 16) if and only if $A$ is a Zariski ring (for the $\aaa$-topology). 

[Recall that a Noetherian topological ring in which the topology is defined by an ideal contained in the Jacobson radical is called a \textbf{Zariski ring}. Examples are local rings and (by Proposition 10.15iv p.~109 of the book) $\aaa$-adic completions.]

\textbf{Hint.} Let $\mmm$ be a maximal ideal of $A$. Proposition 10.15i p.~109 of the book implies that the extension $\mmm^{\oo e}$ of $\mmm$ in $\widehat A$ is $\widehat\mmm$, and we get 
$$
\aaa\subset\mmm\implies0\ne(A/\mmm)^{\land}\simeq\widehat A/\widehat\mmm\implies\mmm^{\oo e}\ne(1), 
$$ 
$$
\aaa\not\subset\mmm\implies0=(A/\mmm)^{\land}\simeq\widehat A/\widehat\mmm\implies\mmm^{\oo e}=(1). 
$$ 

\subsection{Page 115, Exercise 10.9, Hensel's Lemma}% previous version: https://docs.google.com/document/d/1526_roVmeZpQMrYu0CK8TmS2WNr2HGhfnkqHGozrvLE/edit

We follow Jeffrey Daniel Kasik Carlson. 

\begin{lem}\label{L106b}
Let $\aaa\subset\mf R(A)$ be an ideal of $A$, let $g$ and $h$ be in $A[x]$ with $g$ monic and $(\bar g,\bar h)=(1)$ in $(A/\aaa)[x]$. Then we have $(g,h)=(1)$ in $A[x]$. 
\end{lem} 
\begin{proof} 
If $M=A[x]/(g)$, and $N=hM$, then since 
$$
\aaa[x]+(g, h)=A[x],
$$ 
we have $\aaa M+N=M$. Since $M$ is finitely generated by $\bar 1$, $\bar x, $\dots, $\bar x^{(\deg g)-1}$, Corollary~2.7 to Nakayama’s Lemma, p.~22 of the book applies to show $hM=M$, so that $(g,h)=(1)$ in $A[x]$. 
\end{proof}

\begin{lem}\label{L106a}
Let $B$ be a ring, let $p,q$ be coprime monic polynomials in $B[x]$ with $\deg p=r$, and let $c$ be in $B[x]$. Then there are unique $a,b\in B[x]$ with $c=ap+bq$ and $\deg b<r$. 
\end{lem} 
\begin{proof}
The element $\bar q\in B[x]/(p)$ being a unit since $(p,q)=(1)$ in $B[x]$, there is a $b\in B[x]$ of least degree such that $\bar b\bar q=\bar c$ in $B[x]/(p)$. Since $p$ is monic of degree $r$, the elements $\bar 1,\bar x,\dots,\bar x^{r-1}$ freely generate $B[x]/(p)$ as a $B$-module, so $b$ is unique and of degree less than $r$. The polynomial $p$, being monic, is not a zero-divisor, so there is a unique $a\in B[x]$ such that $ap=c-bq$.
\end{proof}

Now we solve Exercise 10.9. We need only assume that $A$ is complete with respect to some ideal $\mmm$; we do not necessarily need $\mmm$ maximal or $A$ local. To emphasize the fact that $\mmm$ is not necessarily maximal, we denote this ideal by $\aaa$. We shall prove:

\begin{thm}[Hensel's Lemma]\label{hl}
Let $A$ be a ring and $\aaa$ an ideal of $A$ such that $A$ is $\aaa$-complete. For any polynomial $f(x)\in A[x]$, let $\overline f(x)\in(A/\aaa)[x]$ denote its reduction modulo $\aaa$. Assume that $f(x)\in A[x]$ is monic of degree $n$ and that there exist coprime monic polynomials $\overline g(x),\overline h(x)\in(A/\aaa)[x]$ of degrees $r,n-r$ with $1\le r\le n-1$ and $\overline f(x)=\overline g(x)\overline h(x)$. Then we can lift $\overline g(x),\overline h(x)$ back to monic polynomials of the same degrees $g(x),h(x)\in A[x]$ such that $f(x)=g(x)h(x)$.
\end{thm}

\begin{proof}
Let $g_1,h_1$ be monic lifts of $\bar g,\bar h$ to $A[x]$ with $\deg g_1=r$ and $\deg h_1=n-r$, and note that we have 
$$
f-g_1h_1\equiv0\bmod\aaa.
$$ 
We shall inductively construct $g_2,h_2,g_3,h_3,\ldots\in A[x]$ with 
$$
g_j\text{ monic of degree }r,\quad\deg h_j\le n-r,%\quad\overline{h_j}=\overline h,%\text{ for all }j\ge2,  
$$ 
$$
f-g_jh_j\equiv0\bmod\aaa^j
$$ 
and 
$$
g_j\equiv g_{j-1},\quad h_j\equiv h_{j-1}\bmod\aaa^{j-1}
$$ 
for all $j\ge2$. 

Coefficient by coefficient, the $g_j$ and the $h_j$ will form Cauchy sequences with respect to the $\aaa$-topology, and so converge to unique limits $g,h\in A[x]$ with 
$$
g\equiv g_j,\quad h\equiv h_j\bmod\aaa^j
$$ 
for all $j\ge1$. We will then have 
$$
g\text{ is monic of degree }r,\quad\deg h\le n-r,
$$ 
$$
f-gh=(f-g_jh_j)+(g_jh_j-gh)\equiv0\bmod\aaa^j
$$ 
for all $j\ge1$. Since $A$ is $\aaa$-adically complete, $\bigcap\aaa^j=0$, so $f=gh$. As $f$ and $g$ are monic of degrees $n$ and $r$, the polynomial $h$ is monic of degree $n-r$. 

It only remains to construct the $g_j$ and $h_j$. 

Let $k$ be $\ge2$ and suppose inductively we have found polynomials $g_2,$ $h_2,$ $g_3,$ $h_3,$ $\dots,$ $g_k,$ $h_k$ such that 
$$
g_j\text{ is monic of degree }r,\quad\deg h_j\le n-r,%\quad\overline{h_j}=\overline h,
$$ 
$$
f-g_jh_j=:c_j\equiv0\bmod\aaa^j
$$ 
for $1\le j\le k$, and 
$$
g_j\equiv g_{j-1},\quad h_j\equiv h_{j-1}\bmod\aaa^{j-1}
$$ 
for $2\le j\le k$. Note that this implies $\deg c_j\le n$. 

Since by Proposition 10.15.iv p.~109 of the book, $\aaa\subset\mf R(A)$, it follows from Lemma~\ref{L106b} that $(g_k,h_k)=(1)$ in $A[x]$. By Lemma~\ref{L106a} with 
$$
B:=A,\quad p:=g_k,\quad q:=h_k,
$$ 
there are unique $a,b\in A[x]$ with 
$$
\deg b<r\text{ and }ag_k+bh_k=c_k.
$$ 
We have in particular 
\begin{equation}\label{dega}
\deg a\le n-r.
\end{equation}
Taking $B:=A/\aaa^k$ in Lemma~\ref{L106a} and using uniqueness, we see that since $c_k\in\aaa^k[x]$ we also have $a,b\in\aaa^k[x]$. Setting  
$$
g_{k+1}=g_k+b\in g_k+\aaa^k[x]
$$ 
and 
$$
h_{k+1}=h_k+a\in h_k+\aaa^k[x],
$$ 
we get 
\[
\begin{split}
f-g_{k+1}h_{k+1}&=(f-g_kh_k)-(ag_k+bh_k)-ab\\
&=c_k-c_k-ab=-ab\in\aaa^{2k}[x]\subset\aaa^{k+1}[x].\\
\end{split} 
\] 
As $\deg b<r$, the polynomial $g_{k+1}$ is monic of degree $r$. The inequality $\deg a\le n-r$ (see \eqref{dega}) implies $\deg h_{k+1}\le n-r$. 
\end{proof}

\subsection{Page 115, Exercise 10.10iii}%

Part (iii) is a particular case of Part (i):
$$
\begin{array}{|c|c|c|c|c|c|c|c|}\hline
A&\mmm&\overline f(x)&\alpha&f(x)&a&\overline f(\alpha)=0&f(a)=0\\ \hline
k[[x]]&(x)&f(0,y)&a_0&f(x,y)&y(x)&f(0,a_0)=0&f(x,y(x))=0\\ \hline
\end{array}
$$ 
(The condition that the roots $\alpha,a,a_0$ and $y(x)$ are simple is implicit.) 

\subsection{Page 115, Exercise 10.11}%

\textbf{Statment:} Show that the converse of (10.26) is false, even if we assume that $A$ is local and that $\widehat A$ is a finitely-generated $A$-module.

Recall (10.26): If $A$ is a Noetherian ring, $\aaa$ an ideal of $A$, then the $\aaa$-completion $\widehat A$ of $A$ is Noetherian.

\textbf{Hint.} Let $A$ be the ring of germs at $0$ of $C^\infty$ functions from $\mathbb R$ to $\mathbb R$, and $\mmm$ the ideal of those germs which vanish at $0$. Then $\widehat A\simeq\mathbb R[[x]]$ and $A\to\widehat A$ is surjective. Note that $A$ is not noetherian by Corollary 10.18 p.~110 of the book. 

\subsection{Page 115, Exercise 10.12}%

\textbf{Statement:} If $A$ is Noetherian, then $B:=A[[x_1,\ldots,x_n]]$ is a faithfully flat $A$-algebra. 

\textbf{Solution.} Using Proposition 10.14 p.~109 of the book it is easy to see that $B$ is $A$-flat. Let $\phi:A\to B$ be the inclusion, $\psi:B\to A$ the evaluation at $0$, and $\mmm$ a maximal ideal of $A$. It suffices to show that the extension of $\mmm$ along $\phi$ is a proper ideal of $B$ (see Exercise 3.16iii p.~45 of the book). If this extension was the unit ideal of $B$, then the extension of $\mmm$ along $\psi\circ\phi$ would be the unit ideal of $A$. But this latter extension is $\mmm$ because $\psi\circ\phi$ is the identity of $A$. 

\section{About Chapter 11}%%

\subsection{Page 117, definition of d(M)}%

I think it would be more prudent to assume that $M\ne0$, that $A_0$ is Artin, and that $\lambda(M)$ is the length of $M$. 

\subsection{Page 118, Proposition 11.3}%

It seems better to assume $xM\ne M$. 

\subsection{Page 118, Example following Proposition 11.3}%

We have $P(A,t)=\ell\,(1-t)^s$ where $\ell$ is the length of $A_0$. 

\subsection{Page 118, proof of Proposition 11.4}%

$\bu$ The ring $A/\qqq$ is Artin by \eqref{86} p.~\pageref{86}.

$\bu$ The fact below is used on line 5 of the proof of Proposition 11.4:

\emph{A noetherian module over an Artin ring has finite length.}

This follows from Propositions 6.2 p.~75 and 6.8 p.~77.

\subsection{Page 119, old d new d}\label{odnd}%

On p. 119 it is claimed that the new $d$ evaluated on $A$ coincides with the old $d$ evaluated on $G_\mmm(A)$, the asserted equality being written $d(A)=d(G_\mmm(A))$. 

We denote the old $d$ by $d_o$ and the new $d$ by $d_\nu$, so that the equality to check becomes 
\begin{equation}\label{dd}
d_o(A)=d_\nu(G_\mmm(A)).
\end{equation}

Note that $d_o(A)$ is defined when $A$ is a noetherian graded ring, and $d_\nu(A)$ is defined when $A$ is a noetherian local ring. By Proposition 10.22 (i) p.~111, $G_\aaa(A)$ is a noetherian graded ring if $A$ is a noetherian ring and $\aaa$ is an ideal of $A$.

As in (1) p. 118 of the book we set $\ell_n:=\ell(A/\mmm^n)$. 

Corollary 11.5 p.~119 says that, for large $n$, the function $n\mapsto\ell_n$ is a polynomial whose degree is $d_\nu(A)$ by definition. 

Corollary 11.2 p.~117 says that, for large $n$, the function $n\mapsto\ell(\mmm^n/\mmm^{n+1})$ is a polynomial whose degree is $d_o(G_\mmm(A))-1$.

Now \eqref{dd} above follows from (1) p. 117 of the book. 

\subsection{Page 120, Proposition 11.9}%

We must assume that $x$ is not a unit. 

\subsection{Page 120, proof of Proposition 11.10}%

The claim ``$A$ is an Artin ring'' is justified by \eqref{86} p.~\pageref{86}.

% removed \subsection{Page 121, Proposition 11.13} 200609 https://docs.google.com/document/d/1wmk9iSjs5zn1SCQmjCYw1zpCInFQqlZjtwyaI7T5-xQ/edit

\subsection{Page 121, Dimension Theorem}% 

Here is an application of the Dimension Theorem: 

Let $K$ be a field, let $x_1,x_2,\dots$ be indeterminates, and form the $K$-algebra  $A:=K[[x_1,x_2,\dots]]$. 

Recall that $A$ can be defined as the set of expressions of the form $\sum_ua_uu$, where $u$ runs over the set monomials in $x_1,x_2,\dots$, and each $a_u$ is in $K$, the addition and multiplication being the obvious ones. 

Then $A$ is a local domain, its maximal ideal $\mathfrak m$ is defined by the condition $a_1=0$, and we claim 
\begin{equation}\label{u1a}
\boxed{A\text{ is not }\mathfrak m\text{-adically complete.}}
\end{equation}
This result is due to Uriya First and to the MathOverflow user dhy. See \\ %\smallskip

\centerline{\href{https://mathoverflow.net/a/308266/461}{https://mathoverflow.net/a/308266/461}}

We equip $A$ with the $\mmm$-adic topology.

Let $v:\mathbb Z_{>0}\to\mathbb Z_{>1}$ be strictly increasing, assume that, for all $n\in\mathbb Z_{>0}$, the characteristic of $K$ does not divide $v(n)$, and consider the sequence $(s_n)_{n\in\mathbb Z_{>0}}$ defined by $s_n=\sum_{i=1}^nx_i^{v(i)}$. This sequence being clearly Cauchy, it suffices to show that it diverges. To prove this we argue by contradiction and assume that $(s_n)$ has a limit in $A$. It is easy to see that this limit is $\sum_{n>0}x_n^{v(n)}$, and that this element of $A$ is in $\mmm^2$. Thus \eqref{u1a} will follow from 
\begin{equation}\label{u1b}
\sum_{n>0}\ x_n^{v(n)}\notin\mmm^2.
\end{equation} 
Our proof of \eqref{u1b} starts with the following claim.

%\textbf{Claim.}
$(\star)$ {\em Let $k$ and $r$ be positive integers; let $\mathfrak n$ be the maximal ideal of} 
$$
B:=K[[x_1,\dots,x_k]];
$$ 

{\em let $a_1,\dots,a_r,b_1,\dots,b_r$ be in $\mathfrak n$; set $f=\sum_{i=1}^ra_ib_i$ and $D_j:=\frac{\partial}{\partial x_j}$ for $1\le j\le k$; and assume that the ideal $(D_1f,\dots,D_kf)\subset B$ is $\mathfrak n$-primary. Then $k\le2r$.}

Proof of $(\star)$. We have 
$$
D_jf=\sum_{i=1}^r\Big((D_ja_i)\ b_i+a_i\ (D_jb_i)\Big). 
$$ 
This implies that 
$$
(D_1f,\dots,D_kf)\subset(a_1,\dots,a_r,b_1,\dots,b_r),
$$ 
and thus that $(a_1,\dots,a_r,b_1,\dots,b_r)$ is $\mathfrak n$-primary (see Corollary 7.16 p.~83 of the book). By the Examples pages 118 and 121, and by Corollary 11.19 p.~122 of the book, we have $\dim B=k$. Now the Dimension Theorem entails $k\le2r$, as desired. $\square$

Proof of \eqref{u1b}. Assume by contradiction that we have 
$$
\sum_{n>0}\ x_n^{v(n)}=\sum_{i=1}^r\ c_i\,d_i
$$ 
with $c_i,d_i\in\mmm$. Let $k$ be an integer $>2r$. Mapping $x_j$ to $0$ for $j>k$ we get 
$$
f:=\sum_{n=1}^k\ x_n^{v(n)}=\sum_{i=1}^r\ a_i\,b_i\in K[[x_1,\dots,x_k]]
$$ 
for some $a_i,b_i\in(x_1,\dots,x_k)\subset K[[x_1,\dots,x_k]]$. As $(D_1f,\dots,D_kf)$ is $(x_1,\dots,x_k)$-primary by Corollary 7.16 p.~83 of the book, this contradicts $(\star)$. $\square$

The case when $K$ is \emph{finite} is a Bourbaki exercise: Exercice 22c p. 288 in Exercices du \S2 chap. III, \textbf{Algèbre commutative}, Bourbaki, Masson, Paris 1985.

\subsection{Page 121, Corollary 11.16}\label{1116}%

The Dimension Theorem (Theorem 11.14) and Corollary 11.16 imply the following:

If $\ppp$ is a prime ideal of a noetherian ring, then the height of $\ppp$ is equal to 
$$
\min\ \{n\in\mathbb N\ |\ (\exists\ x_1,\ldots,x_n\in\ppp)\ \ppp\text{ is minimal over }(x_1,\ldots,x_n)\}.
$$

\subsection{Page 122}%

$\bu$ Proof of Corollary 11.16. The fact that $(x_1,\dots,x_r)_\ppp$ is $\ppp_\ppp$-primary follows easily from Propositions 4.8 (ii) p~53 and 4.9 p~54.

$\bu$ Proof of Proposition 11.20. The $d(?)$ are $d_o(?)$ in the notation of Section~\ref{odnd}.

\subsection{Page 123, proof of Theorem 11.22}%

I think ``by (11.20)'' should be ``by (11.21)''.

\subsection{Page 125, proof of (11.25)}%

For the last sentence of the proof, see the Examples on p.~121.

\subsection{Page 125, Exercise 11.1}%

I think the assumption that $f$ is irreducible is unnecessary, and that it suffices to suppose that $f$ is nonzero.

We can assume $P=0$. We will use the following notation: $X_1,\ldots,X_n$ are indeterminates, $A$ is defined by $A:=k[X_1,\ldots,X_n]/(f)=k[x_1,\ldots,x_n]$ where $x_i$ is the image of $X_i$, we set 
$$
\mmm:=(X_1,\ldots,X_n),\quad\overline\mmm:=(x_1,\ldots,x_n)\simeq\mmm/(f).
$$ 
We have 
\begin{equation}\label{dimam}
\dim A_{\overline\mmm}=n-1
\end{equation}
by Corollary 11.18 p.~122 of the book. We also have 
\begin{equation}\label{fom}
\frac{\overline\mmm}{\overline\mmm^2}=\frac{\mmm/(f)}{(\mmm^2+(f))/(f)}\simeq\frac{\mmm}{\mmm^2+(f)}\ .
\end{equation}
If $f\in\mmm^2$ we get 
$$
\frac{\overline\mmm}{\overline\mmm^2}\simeq\frac{\mmm}{\mmm^2}\simeq k^n
$$ 
by \eqref{fom}, and $A_{\overline\mmm}$ is singular by \eqref{dimam}. 

If $f\not\in\mmm^2$ we have 
$$
n-1=\dim A_{\overline\mmm}\le\dim_k\overline\mmm/\overline\mmm^2\le n-1
$$ 
by \eqref{dimam}, Corollary 11.15 p.~121 of the book and \eqref{fom}, so that $A_{\overline\mmm}$ is regular in this case. 

%if $f\in\mmm^2$, and $\dim_k(\overline\mmm/\overline\mmm^2)\le n-1$ if $f\not\in\mmm^2$, in which case Corollary 11.15 p.~121 of the book says $\dim A_{\overline\mmm}\le\dim_k(\overline\mmm/\overline\mmm^2)$. 

%As we know that $\dim A_{\overline\mmm}=n-1$, we see that $\dim_k(\overline\mmm/\overline\mmm^2)=n-1$ in this case. 

We conclude that %$\dim A_{\overline\mmm}=\dim_k(\overline\mmm/\overline\mmm^2)$ if and only if $f\not\in\mmm^2$, that is 
$A_{\overline\mmm}$ is regular if and only if $f\not\in\mmm^2$. 

It remains to check that $0$ is non-singular if and only if $f\not\in\mmm^2$, or, in other words, that $\frac{\partial f}{\partial X_i}(0)\ne0$ for some $i$ if and only if $f\not\in\mmm^2$. 

But this follows from that fact that $\frac{\partial f}{\partial X_i}(0)$ is the coefficient of $X_i$ in $f$. 

\subsection{Page 125, Exercise 11.2}%

\textbf{Statement.} In (11.21) assume that $A$ is complete. Prove that the homomorphism $k[[t_1,\ldots,t_d]]\to A$ given by $t_i\mapsto x_i$ ($i=1,\ldots,d$) is injective and that $A$ is a finitely-generated module over $k[[t_1,\ldots,t_d]]$.

Recall (11.21): If $k\subset A$ is a field mapping isomorphically onto $A/\mmm$ and if $x_1,\ldots,x_d$ is a system of parameters, then $x_1,\ldots,x_d$ are algebraically independent over $k$.

\textbf{Solution.} Let $\qqq$ be the $\mmm$-primary ideal $(x_1,\ldots,x_d)$, set 
$$
B:=k[[t_1,\ldots,t_d]],
$$ 
and let 
$$
b:=\sum c_\alpha t_1^{\alpha_1}\cdots t_d^{\alpha_d}
$$ 
be in $B$. Since $\qqq$ defines the same topology on $A$ as $\mmm$ (see proof of Proposition 11.6 p.~119), 
$$
\sum c_\alpha x_1^{\alpha_1}\cdots x_d^{\alpha_d}
$$ 
is a Cauchy series in $A$. Let $a$ be its sum, and define $\phi:B\to A$ by $\phi(b):=a$. 

Let us show that $\phi$ is injective. In the above setting, assume that $b\ne0$ and $a=0$. Write $b=b_n+b_{n+1}+\cdots$ with $b_i$ homogeneous of degree $i$ and $b_n\ne0$. Set $a_i:=\phi(b_i)$. We get $a_n\in\qqq^{n+1}$, and Proposition 11.20 p.~122 of the book implies $b_n=0$, contradiction. 

Let us show that $A$ is a finitely generated $B$-module. By Proposition 10.24 p.~112 of the book, it suffices to show that $G_\qqq(A)$ is a finitely generated $G_\nnn(B)$-module, where $\nnn$ is the maximal ideal of $B$. Consider the exact sequence 
$$
0\to G_\qqq(\qqq)\to G_\qqq(A)\to A/\qqq\to0
$$ 
of $G_\nnn(B)$-modules. Then $G_\qqq(\qqq)$ is a finitely generated $G_\nnn(B)$-module because it is isomorphic to $G_\nnn(\nnn)$, and we have $\dim_kA/\qqq<\infty$ because $A/\qqq$ is an artinian $k$-algebra. 

\subsection{Page 126, Exercise 11.3}\label{113}%

\textbf{Statement.} Extend (11.25) to non-algebraically-closed fields.

Recall (11.25): For any irreducible variety $V$ over $k$ the local dimension of $V$ at any point is equal to $\dim V$.

\textbf{Solution.} Let $K$ be a field and $A$ a finitely generated $K$-algebra. By Noether's Normalization Theorem (see Section~\ref{nnt} p.~\pageref{nnt}), the Krull dimension $n$ of $A$ is finite, and there are $n$ elements of $A$ which are algebraically independent over $K$. 

Claim: Any $n+1$ elements of $A$ are algebraically dependent over $K$.

Proof. If $A$ is a domain, we are done because Noether's Normalization Theorem implies that $n$ is the transcendence degree of the field of fractions of $A$ over $K$. If $A$ is not a domain, we can argue as follows. 

Assume by contradiction that the elements $x_1,\ldots,x_{n+1}$ of $A$ are algebraically independent over $K$. Set $B:=K[x_1,\ldots,x_{n+1}]\subset A$ and $S:=B\setminus\{0\}$. This is a multiplicative subset of $A$ which does not contain $0$. Thus there is a prime ideal $\ppp$ of $A$ which is disjoint from $S$, and $B$ imbeds into the domain $A/\ppp$, whose Krull dimension is at most $n$. This contradicts the first part of the argument.

\subsection{Integrality Basis}%

Here is a complement to Section~\ref{113}. 

Let $K$ be a field and $A$ a $K$-algebra. Say that a subset $X$ of $A$ is an \textbf{integrability basis} if $X$ is algebraically independent over $K$ and if $A$ is integral over the sub-$K$-algebra $K[X]\subset A$ generated by $X$. 
\begin{prop}
Let $K$ be a field, $A$ a $K$-algebra, $X\subset A$ an integrability basis and $Y$ an algebraically independent subset of $A$. Then the cardinality of $Y$ does not exceed that of $X$. 
\end{prop}
\begin{proof}
If $X$ is finite of cardinality $n$, then $n$ is the Krull dimension of $A$, and the result follows in this case from Section~\ref{113}.

Assuming that $X$ is infinite, let $F$ be the set of finite subsets of $X$. For each $y\in Y$ there is an element $X_y\in F$ such that $y$ is integral over $K[X_y]$. Note that each fiber of the map $Y\to F$ is finite by the previous case. The conclusion follows. 
\end{proof}

\subsection{Page 126, Exercise 11.4}%

An example of a Noetherian domain of infinite dimension (Nagata).

We sketch a solution. 

Let 
$$
\mathbb N=\bigsqcup_{i\in\mathbb N}N_i
$$ 
be a partition of $\mathbb N$ such that each $N_i$ is finite and nonempty, let $K$ be a field, let $A$ be the $K$-algebra $K[x_0,x_1,\dots]$, where the $x_i$ are indeterminates, for each $i\in\mathbb N$ let $\ppp_i$ be the ideal of $A$ generated by the $x_j$ with $j\in N_i$, let $S\subset A$ be the complement of the union of the $\ppp_i$, and set $B:=S^{-1}A$. 

Our main goal is to prove 
$$
\text{(a) $B$ is noetherian.} 
$$ 
\subsubsection{Reduction to Statements (d) and (e)}

By Exercise 7.9 p.~85 of the book, it suffices to show 

(b) For each maximal ideal $\mmm$ of $B$, the local ring $B_\mmm$ is noetherian.

(c) For each $b\ne0$ in $B$, the set of maximal ideals of $B$ which contain $b$ is
finite.

We claim 

(d) If $\aaa$ is an ideal of $A$ contained in the union of the $\ppp_i$, then $\aaa$ is contained in some $\ppp_i$. % old Claim 1

Statement (d) will imply that the maximal ideals of $B$ are the $S^{-1}\ppp_i$, and thus, (d) will imply (c). Statement (d) will also reduce (b) to 

(e) For each $i$ the local ring $B_{S^{-1}\ppp_i}$ is noetherian.

To summarize, it suffices to prove (d) and (e). 

\subsubsection{Proof of (d)}

Recall Statement (d):

(d) If $\aaa$ is an ideal of $A$ contained in the union of the $\ppp_i$, then $\aaa$ is contained in some $\ppp_i$.

To prove (d) we shall implicitly use the following easy fact: 

\begin{note}\label{monid}
Let $\aaa$ be an ideal of $A$. Then $\aaa$ is generated by monomials if and only if it has the following property:

A polynomial $f\in A$ is in $\aaa$ if and only if all the monomials occurring in $f$ are in $\aaa$.
\end{note}

Proof of (d). Assume by contradiction that $\aaa$ is contained in the union of the $\ppp_i$, but is contained in no $\ppp_i$. Let $0\ne f\in\aaa$. 

There is an $n\in\mathbb N$ such that no monomial occurring in $f$ is in $\ppp_{n+1}\cup\ppp_{n+2}\cup\cdots$. In particular 

\qquad(A) $f\notin\ppp_{n+1}\cup\ppp_{n+2}\cup\cdots$. 

We claim that there is a $g\in\aaa$ such that 

\qquad(B) $g\notin\ppp_0\cup\cdots\cup\ppp_n$, 

\qquad(C) $g$ has no monomial in common with $f$.

In view of (A) the claim will imply that $f+g$ is in $\aaa$ but not in any of the $\ppp_i$, contradiction.
 
By Proposition 1.11i p.~8 of the book (see Proposition~\ref{111i} p.~\pageref{111i}), there is an $h\in\aaa$ such that $h\notin\ppp_0\cup\cdots\cup\ppp_n$. If $j$ is in $N_{n+1}$, then $g:=x_jh$ will satisfy (B) and (C). This completes the proof of (d).

% two comments removed 200604 https://docs.google.com/document/d/16c7gN3h-T8ln0GyEAGtBOUHPk3HX2yPGAh08XTJ2aY0/edit

\subsubsection{Proof of (e)}

It only remains to prove Statement (e), which we recall:

(e) For each $i$ the local ring $B_{S^{-1}\ppp_i}$ is noetherian.

We change the setting as follows (letting again $K$ be a field). Let $x_1,\ldots,x_n$ and $y_1,y_2,\ldots$ be indeterminates, denote by $x$ the sequence $(x_1,\ldots,x_n)$ of indeterminates, and by $y$ the sequence $(y_1,y_2,\ldots)$ of indeterminates. Let $K[x,y]$ be the polynomial $K$-algebra over all the above indeterminates. We claim 

(g) The equality 
$$
K[x,y]_{(x_1,\ldots,x_n)}=\Big(\big(K(y)\big)[x]\Big)_{(x_1,\ldots,x_n)}
$$ 
holds as an equality between subrings of $K(x,y)$. In particular this ring is noetherian. 

We leave the proof of (g) to the reader. Clearly (g) implies (e). 

\subsection{Page 126, Exercise 11.6}\label{116}% previous version https://docs.google.com/document/d/1pXphjmJVG5y2JSIiE6W0ZBNaBsdVPPTXytsjLOLYc7g/edit

\textbf{Statement.} Let $A$ be a ring (not necessarily Noetherian). Prove that 
$$
1+\dim A\le\dim A[x]\le1+2\dim A.
$$

\textbf{Solution.} We denote the Krull dimension of any ring $A$ by $\dim A$ and the height of any prime ideal $\ppp$ by $h(\ppp)$. If we have a ring morphism $A\to B$ and a prime ideal $\qqq_i$ of $B$, we write $\ppp_i^{\oo c}$ for $(\ppp_i)^{\oo c}$.  

\emph{Proof of the inequality} $\dim A[x]\ge1+\dim A$: If 
$
\ppp_0<\dots<\ppp_n
$ 
is a chain of prime ideals in $A$, then 
$$
\ppp_0[x]<\dots<\ppp_n[x]<\ppp_n+(x)
$$ 
is chain of prime ideals in $A[x]$ (see Exercise 4.7 p.~55 of the book --- see Section~\ref{5547} p.~\pageref{5547} --- and Lemma~\ref{fiberx} p.~\pageref{fiberx}). $\square$ 

\emph{Proof of the inequality} $\dim A[x]\le1+2\dim A$: This inequality follows immediately from Lemma~\ref{fiberx} p.~\pageref{fiberx} above.

\subsection{Page 126, Exercise 11.7}% previous version https://docs.google.com/document/d/1oRILzwsOL6hxY74xil7pEj_bwa9k4-yieyVTCva3ev8/edit

\textbf{Statement.} Let $A$ be a Noetherian ring. Then
\begin{equation}\label{dax}
\dim A[x]=1+\dim A,
\end{equation}
and hence, by induction on $n$,
$$
\dim A[x_1,\ldots,x_n]=n+\dim A.
$$ 
\textbf{Hint.} (This is the hint given in the book.) Let $\ppp$ be a prime ideal of height $m$ in $A$. Then there exist $a_1,\ldots,a_m\in\ppp$ such that $\ppp$ is a minimal prime ideal belonging to the ideal $\aaa=(a_1,\ldots,a_m)$. By Exercise 7 of Chapter 4, the ideal $\ppp[x]$ is a minimal prime ideal of $\aaa[x]$ and therefore the height $\ppp[x]$ is $\le m$. On the other hand, a chain of prime ideals 
$$
\ppp_0<\ppp_1<\cdots<\ppp_m=\ppp
$$ 
gives rise to a chain 
$$
\ppp_0[x]<\ppp_1[x]<\cdots<\ppp_m[x]=\ppp[x],
$$ 
hence the height of $\ppp$ is $\ge m$. Hence the height of $\ppp[x]$ is equal to the height of $\ppp$. Now use the argument of Exercise~6.

\textbf{Solution.} As in the previous section, we denote the Krull dimension of any ring $A$ by $\dim A$ and the height of any prime ideal $\ppp$ by $h(\ppp)$. We follow the hint of the book, and we shall use the following obvious fact: 

\begin{note}\label{116a}
If $\ppp_0<\cdots<\ppp_n$ is a chain of prime ideals, then $h(\ppp_n)\ge n+h(\ppp_0)$. 
\end{note}

% version of 200604: https://docs.google.com/document/d/1Rnin3Ze0BD0GlcO3ZuP3MYOB9KdXi3YwBM34lHKbVqc/edit

We have 
%
\begin{equation}\label{hpx}
h(\ppp[x])=h(\ppp).
\end{equation}
%
by Exercise 4.7 p.~55 of the book and Section~\ref{1116} p.~\pageref{1116} above.

In view of Section~\ref{116} above p.~\pageref{116}, \eqref{dax} reduces to 
$$
\dim A[x]\le1+\dim A.
$$ 
We can assume $\dim A<\infty$. Set $n:=\dim A$ and let 
$$ 
\ppp_0<\cdots<\ppp_{n+2}
$$ 
be a chain of prime ideals in $A[x]$ of length $n+2$. 

It suffices to derive a contradiction from this assumption. 

The above chain contracting to a chain of length at most $n$ in $A$, there are indices $i$ such that $\ppp_i^{\oo c}=\ppp_{i+1}^{\oo c}$. Let $i$ be the largest such index. We have $\ppp_i=\ppp_i^{\oo c}[x]$ by Lemma~\ref{fiberx} p.~\pageref{fiberx} above, and 
%
\begin{equation}\label{hppp}
h(\ppp_i^{\oo c})=h(\ppp_i^{\oo c}[x])=h(\ppp_i)\ge i,
\end{equation} 
% 
the first equality following from \eqref{hpx} and the inequality following from Note~\ref{116a}. Then we get 
$$
h(\ppp_{n+2}^{\oo c})\ge n+1-i+h(\ppp_i^{\oo c})\ge n+1-i+i=n+1,
$$ 
the inequalities following respectively from Note~\ref{116a} and Display~\eqref{hppp}. This contradicts the definition of $n$, proving 
\eqref{dax}. 

% comment removed 200604 https://docs.google.com/document/d/1CTfGlVXmTDizq5LSn3m3ynlqnceyC_rfiCRLziiYAQ4/edit

\bigskip\bigskip\hrule\bigskip

This text is also available at 

\href{https://www.mediafire.com/folder/e72y1pvh76pg7/}{https://www.mediafire.com/folder/e72y1pvh76pg7/}

\href{https://mega.nz/#F!XVQHGSLb!iUGzAsdR4dNc1aCPoaxSEw}{https://mega.nz/\#F!XVQHGSLb!iUGzAsdR4dNc1aCPoaxSEw}

\href{https://tinyurl.com/sod9n2b}{https://tinyurl.com/sod9n2b}

\href{https://yadi.sk/d/cMhmbETNKNQROg}{https://yadi.sk/d/cMhmbETNKNQROg}

\href{https://app.box.com/s/4ves1ifaqzzmen3fmrx1c4s168q5s2ak}{https://app.box.com/s/4ves1ifaqzzmen3fmrx1c4s168q5s2ak}

\href{https://tinyurl.com/w48z943}{https://tinyurl.com/w48z943}

\href{https://1drv.ms/u/s!Ar0eXvL-m_9Nas0-rrpGQRJFpBg?e=ndQTS5}{https://1drv.ms/u/s!Ar0eXvL-m\_9Nas0-rrpGQRJFpBg?e=ndQTS5}

\href{https://tinyurl.com/wbd68zm}{https://tinyurl.com/wbd68zm}

\href{http://k00.fr/d1mxqtf7}{http://k00.fr/d1mxqtf7}

\end{document}
