% Atiyah_MacDonald_c_tex
% !TEX encoding = UTF-8 Unicode
% https://docs.google.com/document/d/1AW4qMXoarPW1L1Nxbgy4bODorWEpE6_Gdd35sFJKyew/edit
% https://github.com/Pierre-Yves-Gaillard/Atiyah_MacDonald_c/edit/master/Atiyah_MacDonald_c.tex
% version a of 20180208 https://docs.google.com/document/d/1p2ri2Mu-zyF7-Gk1eeJ4f0OinG0BPXZEAsljF3af2zs/edit
%\documentclass[12pt]{article}%\documentclass{article}
\documentclass[parskip=half,fontsize=12pt]{scrartcl}%\documentclass[parskip=full]{scrartcl}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{amssymb,amsmath,amsthm} 
\usepackage[papersize={400pt,520pt},margin=15pt]{geometry}% e-readers
%\usepackage{geometry}% normal
%\usepackage[margin=15pt]{geometry} old
%\usepackage[papersize={4.5in,6in},margin=0.5cm]{geometry} old
%\usepackage[parfill]{parskip}%https://tex.stackexchange.com/questions/133003/using-the-parskip-package-i-find-the-space-between-subtitles-ugly
\usepackage[pdfusetitle]{hyperref}
\usepackage{datetime}
\usepackage[osf]{Baskervaldx} % oldstyle figures
%\usepackage{Baskervaldx}
\usepackage[baskervaldx]{newtxmath}
\usepackage{tikz-cd}
\usepackage{comment}
%\pagestyle{empty}
%\newcommand{\nn}{\newcommand}
\newcommand{\oo}{\operatorname}
\newcommand{\mf}{\mathfrak}
\newcommand{\aaa}{\mf a}
\newcommand{\bbb}{\mf b}
\newcommand{\mmm}{\mf m}
\newcommand{\ppp}{\mf p}
\newcommand{\qqq}{\mf q}
\newcommand{\bu}{\bullet}
\newcommand{\ds}{\displaystyle}
\newcommand{\epi}{\twoheadrightarrow}
\newcommand{\incl}{\hookrightarrow}
\newcommand{\mono}{\rightarrowtail}
\newcommand{\Spec}{\oo{Spec}}\newcommand{\Sp}{\oo{Spec}}
\newcommand{\xr}{\xrightarrow}
%\newcommand{\todo}{To do: }%\newcommand{\up}{Unsolved problem: }
%\newcommand{\nt}{\newtheorem}
\newtheorem{thm}{Theorem}%[section]
\newtheorem{lem}[thm]{Lemma}
\newtheorem{qn}[thm]{Question}
\newtheorem{rk}[thm]{Remark}
%\addtolength{\parskip}{.2\baselineskip}
\title{About Atiyah and MacDonald's Book}
\author{Pierre-Yves Gaillard}
\date{\today,\currenttime}

\begin{document}%\ar[r,yshift=4pt]\ar[yshift=0.7ex]{r}\ar[yshift=-0.7ex]{r}

%\large

\maketitle\tableofcontents

This text is available at 

\href{http://www.iecl.univ-lorraine.fr/~Pierre-Yves.Gaillard/DIVERS/Atiyah_MacDonald_c/}{https://goo.gl/S9ykSu}\quad\href{https://github.com/Pierre-Yves-Gaillard/Atiyah_MacDonald_c/blob/master/Atiyah_MacDonald_c.tex}{https://goo.gl/8FNDcf}\quad\href{https://docs.google.com/document/d/1AW4qMXoarPW1L1Nxbgy4bODorWEpE6_Gdd35sFJKyew/edit?usp=sharing}{https://goo.gl/w26ZGZ}

Atiyah and MacDonald's book referred to in the title is of course the famous \textbf{Introduction to Commutative Algebra}.

Here are some links:

$\bu$ Errata \href{https://mathoverflow.net/q/42241/461}{https://mathoverflow.net/q/42241/461}

$\bu$ \href{https://sites.google.com/view/mathlife1}{https://sites.google.com/view/mathlife1}

$\bu$ Jeffrey Daniel Kasik Carlson \href{https://goo.gl/WEfMG7}{https://goo.gl/WEfMG7}

$\bu$ Thomas J. Haines, Lectures on Commutative Algebra, 

\href{http://www.math.umd.edu/~tjh/CommAlg.pdf}{http://www.math.umd.edu/$\sim$tjh/CommAlg.pdf}

$\bu$ Shengtian Yang 

\href{http://arxiv.codlab.net/book/note-am-ica/note-am-ica_0.1.2.pdf}{\small http://arxiv.codlab.net/book/note-am-ica/note-am-ica\_0.1.2.pdf}

\href{http://www.yangst.codlab.net}{http://www.yangst.codlab.net}

$\bu$ Yongwei Yao

\href{http://www2.gsu.edu/~matyxy/math831/}{http://www2.gsu.edu/$\sim$matyxy/math831/}

\href{http://www2.gsu.edu/~matyxy/math831/math831.html}{http://www2.gsu.edu/$\sim$matyxy/math831/math831.html}

%$\bu$ Takumi Murayama \href{http://www2.gsu.edu/~matyxy/math831/math831.html}{http://www2.gsu.edu/$\sim$matyxy/math831/math831.html}

$\bu$ Boocher \href{http://www.maths.ed.ac.uk/~aboocher/math/AMnotes.pdf}{\small http://www.maths.ed.ac.uk/$\sim$aboocher/math/AMnotes.pdf}

$\bu$ Allen Altman and Steven Kleinman %Flores \href{http://www.math.ku.edu/~zflores/mathematics.html}{http://www.math.ku.edu/$\sim$zflores/mathematics.html}

\href{http://web.mit.edu/18.705/www/13Ed.pdf}{http://web.mit.edu/18.705/www/13Ed.pdf}

\href{http://web.mit.edu/18.705/www/}{http://web.mit.edu/18.705/www/}

$\bu$ Wiki \href{http://am-solutions.wikispaces.com}{http://am-solutions.wikispaces.com}

\section{Page 6}%

\begin{rk}\label{ef}
The intersection and the product of the empty family of ideals is the unit ideal.
\end{rk}

It is written

\emph{In the ring $\mathbb Z$, $\cap$ and + are distributive over each other. This is not the case in general\dots}

Here is an example: In the ring $K[X,Y]$, where $K$ is a field and $X$ and $Y$ are indeterminates, we have 
$$
(X+Y)\cap\Big((X)+(Y)\Big)\not\subset\Big((X+Y)\cap (X)\Big)+\Big((X+Y)\cap (Y)\Big).
$$

\section{Page 7, Proposition 1.10}%

\textbf{Chinese Remainder Theorem.} \emph{Let $A$ be a commutative ring and $\aaa_1,\dots,\aaa_n$ ideals such that $\aaa_i+\aaa_j=A$ for $i\not=j$. Then the natural morphism from $A$ to the product of the $A/\aaa_i$ is surjective. Moreover the intersection of the $\aaa_i$ coincides with their product.}

\begin{proof} 
We have
\begin{equation}\label{crt}
A=\aaa_1+\aaa_2\cdots\aaa_n.
\end{equation}
Indeed, this can be checked either by multiplying together the equalities $A=\aaa_1+\aaa_i$ for $i=2,\dots,n$, or by noting that a prime ideal containing a product of ideals contains one of the factors. Then \eqref{crt} implies the existence of an $a_1$ in $A$ such that
$$
a_1\equiv1\bmod\aaa_1,\quad a_1\equiv0\bmod \aaa_i\ \forall\ i > 1.
$$
Similarly we can find elements $a_i$ in $A$ such that $a_i\equiv\delta_{ij}\bmod \aaa_j$ (Kronecker delta). This proves the first claim.

Let $\aaa$ be the intersection of the $\aaa_i$. Multiplying \eqref{crt} by $\aaa$ we get
$$
\aaa=
\aaa_1\aaa+
\aaa\aaa_2\cdots\aaa_n\subset
\aaa_1\ (\aaa_2\cap\cdots \cap \aaa_n)\subset \aaa.
$$
This gives the second claim, directly for $n=2$, by induction for $n>2$. 
\end{proof}

\section{Page 8}%

$\bu$ \textbf{\Large Proposition 1.11i, Prime Avoidance}%

The following is taken from Wikipedia:

\href{https://en.wikipedia.org/wiki/Prime_avoidance_lemma}{https://en.wikipedia.org/wiki/Prime\_avoidance\_lemma}

\emph{Let $A$ be a commutative ring and $S$ a multiplicatively closed additive subgroup of $A$. Let $\mf a_1,\dots,\mf a_n$, $n\ge1$ be ideals such that $\mf a_i$ is prime for $i\ge3$. If $S$ is not contained in any $\mf a_i$, then $S$ is not contained in their union.}

\begin{proof} 
We argue by induction on $n$. It suffices to find an element $s$ that is in $S$ and not in $\mf a_i$ for any $i$. 

1. The case $n=1$ is trivial. 

2. Suppose $n\ge2$. For each $i$ choose $s_i$ in $S\setminus\bigcup_{j \ne i}\mf a_j$, this set being nonempty by inductive hypothesis. We can assume $s_i \in \mf a_i$ for all $i$; otherwise, some $s_i$ avoids all the $\mf a_j$'s and we are done. 

Claim: the element $s:=s_1\cdots s_{n-1}+s_n$ is in $S$ but not in $\mf a_i$ for any $i$. 

2.1. If $s$ is in $\mf a_i$ for some $i\le n-1$, then $s_n$ is in $\mf a_i$, a contradiction. 

2.2. If $s$ is in $\mf a_n$, then $s_1\cdots s_{n-1}$ is in $\mf a_n$. 

2.2.1. If $n$ is 2, we get $s_1\in \mf a_2$, a contradiction.

2.2.2. If $n>2$ then, since $\mf a_n$ is prime, there is an $i$ less than $n$ such that $s_i$ is in $\mf a_n$, a contradiction.

This proves the claim, and thus the statement. 
\end{proof}

Here is a version which is slightly weaker but sufficient for our purpose:

\emph{Let $A$ be a commutative ring, let $\mf a$ be an ideal, and let $\mf p_1,\dots,\mf p_n,n\ge1$ be prime ideals. If $\mf a$ is not contained in any $\mf p_i$, then $\mf a$ is not contained in their union.}

\begin{proof} 
We can assume that $n\ge2$ and that there are elements $a_1,\dots,a_n$ in $\mf a$ such that 
$$
a_i\in\mf p_i\setminus\bigcup_{j \ne i}\mf p_j.
$$ 
Then $a:=a_1\cdots a_{n-1}+a_n$ is in $\mf a$ but not in $\mf p_i$ for any $i$.
\end{proof}

%About the proof of Part (ii) of Proposition 1.11 p.~8, if a prime ideal contains the intersection of a finite family of ideals, then it contains the product of this family, and thus one of the factors.

$\bu$ \textbf{\Large Proposition 1.11ii}%

Note that $\mf p$ is prime $\iff$
$$
\mf p\supset\mf a\mf b\quad\implies\quad\mf p\supset\mf a\quad\text{or}\quad\mf p\supset\mf b.
$$

$\bu$ \textbf{\Large Quotient ideal}%

We have 
$$
\mf a\subset\mf a',\ \mf b'\subset\mf b\ \implies\ (\mf a:\mf b)\subset(\mf a':\mf b'),
$$ 
$$
(1:\mf b)=(1)=(\mf a:0),\quad(\mf a:1)=\mf a.
$$

$\bu$ \textbf{\Large Exercise 1.12i}%

To show that the inclusion $\mf a\subset(\mf a:\mf b)$ is strict in general, let $A$ be nonzero and set $\mf a=\mf b=(0)$.

$\bu$ \textbf{\Large Exercise 1.12ii}%

To show that the inclusion $(\mf a\!:\!\mf b)\,\mf b\subset(\mf a:\mf b)$ is strict in general, let $A$ be nonzero and set $\mf a=(1),\ \mf b=(0)$.

\section{Page 9, extended ideal}%

If $f:A\to B$ is a morphism of rings and $\mf a$ is an ideal of $A$, then we can define $\mf a^{\oo e}$ by the formula
$$
\mf a^{\oo e}:=\sum_{\alpha\in\mf a}\ (f(\alpha)).
$$

\section{Page 10, Exercise 1.18, Part 1}%

Let $K$ be a field and let $X$ and $Y$ be indeterminates. If $\mf a$ is an ideal of $K[X,Y]$, we denote by $x$ and $y$ the images of $X$ and $Y$ in $K[X,Y]/\mf a$.

$\bu$ Let us show that the inclusion $(\mf a_1\cap\mf a_2)^{\oo e}\subset\mf a_1^{\oo e}\cap\mf a_2^{\oo e}$ is strict in general. Set (with obvious notation) 
$$
A:=K[X,Y]/(X^2,XY,Y^2),\quad B:=K[X]/(X^2),
$$ 
$$
f:A\to B,\quad f(x):=x,\quad f(\,y):=0,
$$ 
$$
\mf a_1:=(x),\quad\mf a_2:=(x-y).
$$

$\bu$ Let us show that the inclusion $\mf b_1^{\oo c}+\mf b_2^{\oo c}\subset(\mf b_1+\mf b_2)^{\oo c}$ is strict in general. Set (with obvious notation) 
$$
A:=K[X]/(X^2),\quad B:=K[X,Y]/(X^2,XY,Y^2),
$$ 
$$
f:A\to B,\quad f(x):=x,
$$ 
$$
\mf b_1:=(\,y),\quad\mf b_2:=(x-y).
$$

$\bu$ Let us show that the inclusion $\mf b_1^{\oo c}\mf b_2^{\oo c}\subset(\mf b_1\mf b_2)^{\oo c}$ is strict in general. Set $A:=K[XY]$, $B:=K[X,Y]$, and let $f:A\to B$ be the inclusion. Then we have 
$$
(X)^{\oo c}(Y)^{\oo c}=(X^2Y^2),\quad(XY)^{\oo c}=(XY).
$$

$\bu$ Let us show that the inclusion $(\mf a_1:\mf a_2)^{\oo e}\subset(\mf a_1^{\oo e}:\mf a_2^{\oo e})$ is strict in general. Set $A:=K[X]$, $B:=K[X,Y]/(XY)$, $f(X):=x$. Then we have 
$$
y\in((0)^{\oo e}:(X)^{\oo e})=((0):(X)^{\oo e}),
$$ 
$$y\notin(0)=(0)^{\oo e}=((0):(X))^{\oo e}.$$

$\bu$ Let us show that the inclusion $(\mf b_1:\mf b_2)^{\oo c}\subset(\mf b_1^{\oo c}:\mf b_2^{\oo c})$ is strict in general. Set $A:=K$, $B:=K[X]$, $\mf b_1:=(0)$, $\mf b_2:=(X)$. Then we have 
$$
1\in(\mf b_1^{\oo c}:\mf b_2^{\oo c})\setminus(\mf b_1:\mf b_2)^{\oo c}.
$$
$\bu$ Let us show that the inclusion $r(\mf a)^{\oo e}\subset r(\mf a^{\oo e})$ is strict in general. Set $A:=K[X^2]$, $B:=K[X]$, $\mf a:=(X^2)$. Then we have 
$$
X\in r(\mf a^{\oo e})\setminus r(\mf a)^{\oo e}.
$$

\section{Page 10, Exercise 1.18, Part 2}%

$\bu$ We have 
$$
\left(\sum\mf a_i\right)^{\oo e}=\sum\mf a_i^{\oo e},\quad\left(\sum\mf b_i\right)^{\oo c}\supset\sum\mf b_i^{\oo c},
$$
$$
\left(\bigcap\mf a_i\right)^{\oo e}\subset\bigcap\mf a_i^{\oo e},\quad\left(\bigcap\mf b_i\right)^{\oo c}=\bigcap\mf b_i^{\oo c}.
$$

We prove the first of these four statements, leaving the others to the reader. We have 
$$
\left(\sum\mf a_i\right)^{\oo e}=\sum_{\alpha\in\sum\mf a_i}(f(\alpha)),\quad\sum\mf a_i^{\oo e}=\sum_i\sum_{\alpha_i\in\mf a_i}(f(\alpha_i)).
$$ 
The inclusion $\supset$ is clear. Let's prove the inclusion $\subset$. Let $\alpha$ be in $\sum\mf a_i$. This means that $\alpha$ is of the form $\sum\alpha_i$ with $\alpha_i\in\mf a_i$, $\alpha_i=0$ for almost all $i$. This yields 
$$
f(\alpha)=\sum_if(\alpha_i)\in\sum_i\sum_{\alpha_i\in\mf a_i}(f(\alpha_i))=\sum\mf a_i^{\oo e}.
$$ 

\section{Page 10, Exercise 1.18, Part 3}%

$\bu$ Let us prove that $C$ is closed under quotients. 

For $\aaa,\bbb\in C$ we have
$$
(\aaa:\bbb)\subset(\aaa:\bbb)^{\oo{ec}}\subset(\aaa^{\oo e}:\bbb^{\oo e})^{\oo c}\subset(\aaa^{\oo{ec}}:\bbb^{\oo{ec}})=(\aaa:\bbb).
$$ 
Indeed, the first inclusion follows from Proposition 1.17 p.~10, whereas the second and third inclusions follow from Exercise 1.18 p.~10. 

$\bu$ Exercise 1.1. If $x$ is nilpotent, then $\sum_{n\ge0}x^n$ is the inverse of $1-x$. If $u$ is a unit and $x$ is nilpotent, then $u+x=u\,(1+x/u)$ is a unit.

\section{Page 11, Exercise 1.2iii}%

This will follow from Exercise 1.3iii.

\section{Page 11, Exercise 1.2iv}%

See \href{https://goo.gl/sbszfj}{https://goo.gl/sbszfj}

\section{Page 11, Exercise 1.3iii}%

Let $f\in A[x_1,\dots,x_n]$ be a zero divisor. We must show that there is a nonzero $b$ in $A$ such that $bf=0$. We equip the monomials with the graded lexicographic order, see 

\href{https://en.wikipedia.org/wiki/Monomial_order}{https://en.wikipedia.org/wiki/Monomial\_order}

We denote the multi-degree of $g\in A[x_1,\dots,x_n]$ by $\deg g$. Put 
$$
f=a_0+\cdots+a_\alpha x^\alpha,
$$ 
where $\alpha$ is the multi-degree of $f$. Let 
$$
g=b_0+\cdots+b_\beta x^\beta\in A[x_1,\dots,x_n]
$$ 
be a nonzero polynomial of least multi-degree $\beta$ such that 
\begin{equation}\label{1}
fg=0.
\end{equation}
It suffices to prove 
\begin{equation}\label{2}
\beta=0.
\end{equation}
For this it suffices to prove
\begin{equation}\label{3}
a_\gamma g=0\ \forall\ \gamma.
\end{equation}
Assume \eqref3 is false, and let $\gamma$ be the largest multi-index satisfying $a_\gamma g\neq0$. Then \eqref1 implies $a_\gamma b_\beta=0$ and thus $\deg a_\gamma g<\beta$. As $f\cdot(a_\gamma g)=0$, this entails $a_\gamma g=0$, a contradiction. This proves \eqref3 and thus \eqref2.

\section{Page 11, Exercise 1.5ii}

Here is an example of a non-nilpotent formal power series all of whose coefficients are nilpotent. Put $B:=\mathbb Z[y_2,y_3,\dots]$ where $y_2,y_3,\dots$ are indeterminates. Let $\aaa$ be the ideal of $B$ generated by the $y_i^i$ for $i\ge2$ and the $y_iy_j$ for $i\neq j$. Let $a_i$ be the image of $y_i$ in $A:=B/\aaa$. It is easy to see that $a_i^{i-1}\neq0$. Then $f:=a_2x^2+a_3x^3+\cdots$ satisfies 
$$
f^n=\sum_{i>n}a_i^nx^{in}\neq0.
$$

\section{Page 11, Exercise 1.5iii}

Other wording: $\mf R(A[[x]])=\mf R(A)+(x)$.

\section{Page 11, Exercise 1.5iv}

(a) $x\in\mf m$. Proof: $1-xf\in A[[x]]^\times$ by (i).

(b) $A[[x]]=A+\mf m$. Proof: $A[[x]]=A+(x)\overset{(\text a)}\subset A+\mf m$.

(c) $A/\mf m^{\oo c}\simeq A[[x]]/\mf m$. Proof: 
$$
A/\mf m^{\oo c}=A/(A\cap\mf m)\simeq(A+\mf m)/\mf m\overset{(\text b)}=A[[x]]/\mf m.
$$ 
Then (c) implies that $\mf m^{\oo c}$ is maximal.

(d) $\mf m=\mf m^{\oo c}+(x)$. Proof: If $f=a_0+xg\in\mf m$, then $a_0\in\mf m^{\oo c}$ by (a).

\section{Page 11, Exercise 1.5v}

In the next few lines, $A^*$ shall designate the set of prime ideals of the ring $A$, and $f^*:B^*\to A^*$ shall denote the map induced by the ring morphism $f:A\to B$. If 
$$
A\xrightarrow fB\xrightarrow gC
$$ 
are ring morphisms and if $(g\circ f)^*:C^*\to A^*$ is surjective, then so is $f^*:B^*\to A^*$. We solve Exercise 1.5v by applying this observation to the natural morphisms $A\to A[[x]]\to A$, whose composition is the identity of $A$.

\section{Page 11, Exercise 1.11iii}%

Let $A$ be boolean, and let us show that any finitely generated $\aaa$ ideal is principal. We can assume $\aaa=(x,y)$. Then $z:=x+y-xy\in\aaa$ satisfies $xz=x,yz=y$, and we get $\aaa=(z)$.

\section{Page 11, Exercise 1.12}%

A local ring contains no idempotents $\neq0,1$. A ring containing such an idempotent is a product of two nonzero rings, and, thus, cannot be local.

\section{Page 11, Exercise 1.13}%

In the notation of the exercise, let us show $\aaa\neq(1)$. 

Given $f_1,\dots,f_n\in\Sigma$, set $x_i:=x_{f_i}$ for $i=1,\dots,n$. Assuming $\aaa=(1)$ by contradiction, we can choose $f_1,\dots,f_n$ as above in such a way that there are $g_i(x_1,\dots,x_n)$ in $K[x_1,\dots,x_n]$ such that 
$$
\sum_{i=1}^n g_i(x_1,\dots,x_n)f_i(x_i)=1.
$$ 
Letting $L$ be an extension of $K$ in which each $f_i$ has a root $\alpha_i$, we get the equality $0=1$ in $L$ be evaluating the above display at $(\alpha_1,\dots,\alpha_n)$.

\section{Page 12, Exercise 1.14}\label{114}%

More precisely, for each $\mf a\in\Sigma$ there is a maximal element $\mf b\in\Sigma$ such that $\mf a\subset\mf b$.

\section{Page 13, Exercise 1.21iii}%

It seems better to prove first the equality 
$$
\overline S=V(\mf a),\quad \mf a:=\bigcap_{\mf p\in S}\ \mf p
$$ 
for $S\subset\oo{Spec}(A)$. 

\section{Page 14, Exercise 1.23}%

Part (i): In fact we have $X=X_f\sqcup X_{1-f}$ for all $f$ in $A$.

Part (iv): If $f\in\mf p\setminus\mf q$ then $\mf p\in X_{1-f}$ and $\mf q\in X_f$.

\section{Page 21, Proposition 2.4}\label{24}%

Proposition 2.4 reads:

\emph{Let $M$ be a finitely generated $A$-module, let $\mf a$ be an ideal of $A$, and let $\phi$ be an $A$-module endomorphism of $M$ such that $\phi(M)\subseteq\mf a M$. Then $\phi$ satisfies an equation of the form
$$
\phi^n+a_1\,\phi^{n-1}+\cdots+a_n=0
$$ 
where the $a_i$ are in $\mf a$.}

Strictly speaking, this makes no sense because $\phi$ and the $a_i$ belong to different rings. We suggest the following restatement:

\emph{Let $M$ be a finitely generated $A$-module, let $\mf a$ be an ideal of $A$, let $\phi$ be an $A$-module endomorphism of $M$ such that $\phi(M)\subseteq\mf a M$, and let $\psi:A\to\oo{End}_A(M)$ be the natural morphism. Then $\phi$ satisfies an equation of the form
$$
\phi^n+\psi(a_1)\,\phi^{n-1}+\cdots+\psi(a_n)=0
$$ 
where the $a_i$ are in $\mf a$.}

[We have used the symbol $\subseteq$ above to make the quote accurate, but in general we denote inclusions by $\subset$.]

Another fix would be to equip $\operatorname{End}_A(M)$ with its natural $A$-module structure and change the display to 
$$
\phi^n+a_1\,\phi^{n-1}+\cdots+a_n\,\phi^0=0.
$$

If $\phi=\psi(\,y)$ for some $y$ in $A$ we get 
\begin{equation}\label{2124}
\psi(\,y^n+a_1\,y^{n-1}+\cdots+a_n)=0.
\end{equation}
This yields the following:

\emph{If $yM\subset\mf aM$ for some $y$ in $A$, then there is an $x$ in $A$ such that $xM=0$ and $x\equiv y^n\pmod{\mf a}$ for some $n$.}

Corollary 2.5 reads:

\emph{Let $M$ be a finitely generated $A$-module and let $\mf a$ be an ideal of $A$ such that $\mf aM=M$. Then there exists $x\equiv1\pmod{\mf a}$ such that $xM=0$.}

The proof reads:

Take $\phi=$ identity, $x=1+a_1+\cdots+a_n$ in (2.4).

I suggest the following restatement of the proof:

Since $\phi=$ identity, we can take $y=1$ in \eqref{2124}. This gives 
$$
\psi(1+a_1+\cdots+a_n)=0,
$$ 
and we can set $x:=1+a_1+\cdots+a_n$.

Note that Corollary 2.5 can also be stated as follows:

\emph{Let $M$ be a finitely generated $A$-module and let $\mf a$ be an ideal of $A$ such that $\mf aM=M$. Then there exists $\alpha\in\mf a$ such that $\alpha m=m$ for all $m\in M$.}

In other words, we go from $\mf aM=M$ to $\alpha m=m$.

Let us rewrite the proof of Proposition 2.4 to turn it into a proof of the corrected statement:%with as few changes as possible:

Let $x_1,\dots,x_n$ be a set of generators of $M$. Then each $\phi(x_i)\in\mf aM$, so that we have say $\phi(x_i)=\sum_{j=1}^na_{ij}x_j\ (1\le i\le n; a_{ij}\in\mf a)$, i.e., 
$$
\sum_{j=1}^n\ (\delta_{ij}\phi-\psi(a_{ij}))\ x_j=0
$$ 
where $\delta_{ij}$ is the Kronecker delta. Set $b_{ij}:=\delta_{ij}\phi-\psi(a_{ij})$, and let us regard the matrix $(b_{ij})$ as a matrix with entries in the subring $B$ of $\text{End}_A(M)$ generated by $\psi(A)$ and $\phi$, subring which is clearly commutative. Letting $(c_{ij})$ be the adjoint of $(b_{ij})$, we get 
$$
0=\sum_jc_{ij}\sum_kb_{jk}x_k=\sum_{j,k}c_{ij}b_{jk}x_k=\sum_k\left(\sum_jc_{ij}b_{jk}\right)x_k
$$ 
$$
=\sum_k\delta_{ik}\det(b_{j\ell})\,x_k=\det(b_{j\ell})\,x_i.
$$ %By multiplying on the left by the adjoint $(c_{ij})$ of $(b_{ij})$ 
It follows that $\det(b_{j\ell})$ annihilates each $x_i$, hence is the zero endomorphism of $M$. Expanding out the determinant, we have an equation of the required form.

(The underlying reasoning is that we consider the natural morphism from the ring of $n$ by $n$ matrices with entries in $B$ to the endomorphism ring of the $A$-module $M^n$.)

\section{Page 23, proof of Proposition 2.9 (i)}%

Let's prove: $\overline v$ injective $\implies$ $v$ surjective. If $\phi:M''\to M''/\oo{Im}(v)$ is the canonical projection, we get 
$$
0=\phi\circ v=\overline v(\phi)\ \implies\ \phi=0\ \implies\ v\text{ surjective.}
$$

\section{Page 24, vanishing tensors}\label{vt}%

Permanent tag: vanten.

This is taken from Lemma 10, Chapter 1, Section 2, Subsection 11, page 41 in Nicolas Bourbaki, \textbf{Algèbre commutative: Chapitres 1 à 4}, Masson, Paris 1985:

\emph{Let $A$ be a (non necessarily commutative) associative ring with $1$, let $M$ be a right $A$-module, let $N$ be a left $A$-module, let 
$$
(\,y_i)_{i\in I}\subset N
$$ 
be a generating family, let 
$$
(\,x_i)_{i\in I}\subset M
$$ 
be a finitely supported family, and assume 
$$
\sum_{i\in I}x_i\otimes y_i=0
$$ 
in $M\otimes_AN$. Then there is a finite set $J$ and there are finitely supported families 
$$
(x'_j)_{j\in J}\subset M,\quad(a_{ij})_{i\in I,j\in J}\subset A
$$ 
such that 
$$
\sum_{j\in J} x'_ja_{ij}=x_i
$$ 
for all $i$ and 
$$
\sum_{i\in I}a_{ij}y_i=0
$$ 
for all $j$.}

\begin{proof} 
Let $F$ be the free left $A$-module whose basis is the family of symbols $(\,e_i)_{i\in I}$, and consider the exact sequence 
$$
0\to R\xrightarrow\iota F\xrightarrow\varphi N\to 0
$$ 
where $\varphi$ is defined by $\varphi(e_i)=y_i$. It induces the exact sequence 
$$
M\otimes_AR\xrightarrow{\iota'}M\otimes_AF\xrightarrow{\varphi'}M\otimes_AN\to 0,
$$ 
and we get successively
$$
\varphi'\left(\sum_{i\in I}x_i\otimes e_i\right)=\sum_{i\in I}x_i\otimes y_i=0,
$$ 
$$
\sum_{i\in I}x_i\otimes e_i=\iota'\left(\sum_{j\in J}x'_j\otimes r_j\right)=\sum_{j\in J}x'_j\otimes\iota(r_j)
$$ 
where $J$ is a finite set, where $x'_j$ is in $M$ and where $r_j$ is in $R$, 
$$
\iota(r_j)=\sum_{i\in I}a_{ij}e_i
$$ 
for some finitely supported family $(a_{ij})_{i\in I,j\in J}\subset A$, 
$$
\sum_{i\in I}x_i\otimes e_i=\sum_{j\in J}x'_j\otimes\iota(r_j)=\sum_{j\in J} x'_j\otimes\sum_{i\in I}a_{ij}e_i
$$
$$
=\sum_{i\in I}\sum_{j\in J} x'_j\otimes a_{ij}e_i=\sum_{i\in I}\left(\sum_{j\in J}x'_ja_{ij}\right)\otimes e_i,
$$ 
$$
x_i=\sum_{j\in J}x'_ja_{ij},
$$ 
$$
0=\varphi(\iota(r_j))=\sum_{i\in I}a_{ij}y_i.
$$ 
\end{proof}

In the same spirit, we have:

\emph{Let $A$ be a (non necessarily commutative) associative ring with $1$; let $I$ be a set; let $J$ be a finite set; let 
$$
A^{\oplus I}\xrightarrow\phi A^{\oplus J}\xrightarrow\psi N\to0
$$ 
be an exact sequence of left $A$-modules; let $\phi$ be given by 
$$
\phi(e_i)=\sum_ja_{ij}f_j,
$$ 
where $(e_i)$ and $(f_j)$ are the obvious canonical bases; for $j$ in $J$ set $v_j:=\psi(f_j)\in N$; let $M$ be a right $A$-module; let $u$ in $M^{\oplus J}$ satisfy $\sum u_j\otimes v_j=0$ in $M\otimes_AN$. Then there is a $w$ in $M^{\oplus I}$ such that 
$$
\sum_iw_ia_{ij}=u_j
$$ 
for all $j$.}

\begin{proof} 
Applying $M\otimes_A-\ $ to the above exact sequence we get the exact sequence 
$$
M^{\oplus I}\xrightarrow{\phi'}M^{\oplus J}\xrightarrow{\psi'}M\otimes_AN\to0
$$ 
and $\psi'(u)=0$. Thus there is a $w$ in $M^{\oplus I}$ such that $\phi'(w)=u$, and it's easy to see that this $w$ does the job. 
\end{proof}

\section{Page 27, contracted ideals}\label{27}%

If $A\to B$ is a morphism, then an ideal $\mf a$ of $A$ is contracted if and only if the natural map $A/\mf a\to B\otimes_A A/\mf a$ is injective. In particular, if a proper ideal $\mf a$ is contracted, we have $B\otimes_A A/\mf a\ne0$. Indeed, $B\otimes_A A/\mf a\simeq B/\mf a^{\oo e}$ and $\oo{Ker}(A/\mf a\to B\otimes_A A/\mf a)\simeq\mf a^{\oo{ec}}/\mf a$. %(Compare with Section~\ref{43b} p.~\pageref{43b}.)

\section{Page 32, Exercise 2.11}%

We solve the last part of Exercise 2.11. We claim that if $f:A^m\to A^n$ is an $A$-linear injection, then $m\le n$. 

Suppose for the sake of contradiction that there are positive integers $i,j$ and an $A$-linear injection $f:A^{i+j}\to A^i$. 

Set $k:=i+j$ and define $g:A^k\to A^k$ by $g(x,y):=(f(x,y),0)$ for $x\in A^i$, $j\in A^j$. Note that $g$ is injective. By Proposition~2.4 p.~21 of the book (see Section~\ref{24} p.~\pageref{24} above) there is a monic polynomial $P\in A[x]$ such that there is an $a$ in $A$ with 
\begin{equation}\label{211}
gP(g)=a\oo{id}_{A^k}.
\end{equation} 
We can assume that the degree of $P$ is minimal for this condition. In particular $P(g)$ is nonzero. Evaluating \eqref{211} on $(0,y)$, $y\in A^j$, gives $ay=0$. As $y$ is arbitrary, this implies $a=0$, and thus $gP(g)=0$, and the injectivity of $g$ yields $P(g)=0$, a contradiction.

\section{Page 33, Exercise 2.15}%\varinjlim

The proof of the following statements is left to the reader.

There is a unique equivalence relation $\sim$ on the disjoint union $M'$ of the $M_i$ such that, for any $x\in M_i$ and any $y$ in $M_j$, we have $x\sim y$ if and only if there is a $k\ge i,j$ with $\mu_{ki}(x)=\mu_{kj}(\,y)$. 

[I denote by $\mu_{ki}$ what the book denotes by $\mu_{ik}$.]

Then $M'/\sim$ is a direct of the $M_i$ in the category of sets. 

Let $p:M'\to M'/\sim$ be the canonical projection. 

There is a unique structure of $A$-module on $M'/\sim$ such that 

$\bullet\ ap(x)=p(ax)$ for all $x$ in $M_i$ and all $a$ in $A$, 

$\bullet\ p(x)+p(\,y)=p(\mu_{ki}(x)+\mu_{kj}(\,y))$ for all $x$ in $M_i$ and all $y$ in $M_j$. 

Then $M'/\sim$ is a direct of the $M_i$ also in the category of $A$-modules.

\section{Page 34, Exercise 2.25}%

Here is a solution to Exercise 2.25 which does \emph{not} us the Tor functor. Of course, the solution using the Tor functor is much simpler.

The proof below follows closely the proof of Proposition 1.2.5.5 in Bourbaki's \textbf{Algèbre commutative}.

In this section, the ground ring is denoted by $R$, not by $A$.

Let 
\begin{equation}\label{b10}
\begin{tikzcd}
A\ar[d,"\alpha"]\ar[r,"u"]&B\ar[d,"\beta"]\ar[r,"v"]&C\ar[d,"\gamma"]\\ 
A'\ar[r,"u'"']&B'\ar[r,"v'"']&C'
\end{tikzcd}
\end{equation}
be a commutative diagram of $R$-modules with exact rows. 
%
\begin{lem}\label{b1i}
If $\gamma$ is injective, we have 
$$
\oo{Im}(\beta)\cap\oo{Im}(u')=\oo{Im}(u'\circ\alpha)=\oo{Im}(\beta\circ u).
$$
\end{lem}
% 
\begin{proof}
We clearly have 
$$
\oo{Im}(u'\circ\alpha)=\oo{Im}(\beta\circ u)\subset\oo{Im}(\beta)\cap\oo{Im}(u').
$$ 
Conversely, let $b'\in\oo{Im}(\beta)\cap\oo{Im}(u')$. There is a $b\in B$ such that $b'=\beta(b)$. As $v'\circ u'=0$, we have 
$$
0=v'(b')=v'(\beta(b))=\gamma(v(b)),
$$ 
whence $v(b)=0$ since $\gamma$ is injective. The first row of \eqref{b10} being exact, there is an $a\in A$ such that $b=u(a)$, whence $b'=\beta(u(a))$.
\end{proof}
%
\begin{lem}\label{b1ii}
If $\alpha$ is surjective, we have 
$$
\oo{Ker}(\beta)+\oo{Im}(u)=\oo{Ker}(v'\circ\beta)=\oo{Ker}(\gamma\circ v).
$$
\end{lem}
% 
\begin{proof}
As $v\circ u=0$ and $v'\circ u'=0$, it is clear that 
$$
\oo{Ker}(\beta)+\oo{Im}(u)\subset\oo{Ker}(v'\circ\beta)=\oo{Ker}(\gamma\circ v).
$$ 
Conversely, let $b\in\oo{Ker}(v'\circ\beta)$. Then $\beta(b)\in\oo{Ker}(v')$, and there is a $a'\in A'$ such that $u'(a')=\beta(b)$ since the bottom row of \eqref{b10} is exact. As $\alpha$ is surjective, there is an $a\in A$ such that $\alpha(a)=a'$, whence 
$$
\beta(b)=u'(\alpha(a))=\beta(u(a));
$$ 
this implies that $b-u(a)$ is in in $\oo{Ker}(\beta)$.
\end{proof}
%
We extend the commutative diagram \eqref{b10} as follows:
\begin{equation}\label{b10x}
\begin{tikzcd}
\oo{Ker}(\alpha)\ar[d]\ar[r,"u_1"]&\oo{Ker}(\beta)\ar[d,"j"]\ar[r,"v_1"]&\oo{Ker}(\gamma)\ar[d,"k"]\\ 
A\ar[d,"\alpha"]\ar[r,"u"]&B\ar[d,"\beta"]\ar[r,"v"]&C\ar[d,"\gamma"]\\ 
A'\ar[d,"p"]\ar[r,"u'"]&B'\ar[d,"q"]\ar[r,"v'"]&C'\ar[d]\\ 
\oo{Coker}(\alpha)\ar[r,"u_2"]&\oo{Coker}(\beta)\ar[r,"v_2"]&\oo{Coker}(\gamma),
\end{tikzcd}
\end{equation} 
the new maps being the natural ones.

Recall that we are working under the assumption that the second and third row of \eqref{b10x} are exact.
%
\begin{lem}\label{b2i}
The sequence 
$$
\oo{Ker}(\alpha)\xr{u_1}\oo{Ker}(\beta)\xr{v_1}\oo{Ker}(\gamma)
$$ 
is a complex. Moreover, if $u'$ is injective, this complex is exact.
\end{lem}
% 
\begin{proof}
The first claim is clear. We have 
$$
\oo{Ker}(v_1)=\oo{Ker}(\beta)\cap\oo{Ker}(v)=\oo{Ker}(\beta)\cap\oo{Im}(u)=\oo{Im}(j)\cap\oo{Im}(u).
$$ 
Lemma~\ref{b1i} implies $\oo{Ker}(v_1)=\oo{Im}(j\circ u_1)=\oo{Im}(u_1)$ if $u'$ is injective.
\end{proof}
%
\begin{lem}\label{b2ii}
The sequence 
$$
\oo{Coker}(\alpha)\xr{u_2}\oo{Coker}(\beta)\xr{v_2}\oo{Coker}(\gamma)
$$ 
is a complex. Moreover, if $v$ is surjective, this complex is exact.
\end{lem}
% 
\begin{proof}
As $u_2$ and $v_2$ are obtained from $u$ and $v$ by taking quotients, it is clear that $v_1\circ u_2=0$. Suppose $v$ is surjective; $q$ and $p$ being surjective, we get, in view of the assumptions and Lemma~\ref{b1ii},
$$
\oo{Ker}(v_2) = q(\oo{Ker}(v_2\circ q))= q(\oo{Ker}(v')+\oo{Im}(\beta))=q(\oo{Ker}(v'))
$$ 
$$
=q(\oo{Im}(u'))=\oo{Im}(q\circ u')=\oo{Im}(u_2\circ p)=\oo{Im}(u_2).
$$
\end{proof} 
%
\begin{lem}\label{b2iii}
Assume that $u'$ is injective and that $v$ is surjective. Then there is a unique morphism $\delta:\oo{Ker}(\gamma)\to\oo{Coker}(\alpha)$ having the following property: if $c\in\oo{Ker}(\gamma),b\in B$ and $a'\in A'$ satisfy $v(b)=k(c)$ and $u'(a')= \beta(b)$, then we have $\delta(c)=p(a')$. Moreover the sequence 
$$
\oo{Ker}(\alpha)\xr{u_1}\oo{Ker}(\beta)\xr{v_1}\oo{Ker}(\gamma)\xr \delta\oo{Coker}(\alpha)\xr{u_2}\oo{Coker}(\beta)\xr{v_2}\oo{Coker}(\gamma) 
$$
is exact.
\end{lem}
% 
\begin{proof} (a) Definition of $\delta$: For $c\in\oo{Ker}(\gamma)$ there is a $b\in B$ such that $v(b)=k(c)$ because $v$ is surjective; moreover, we have $v'(\beta(b))=\gamma(k(c))=0$, and thus there is a unique $a'\in A'$ such that $u'(a')=\beta(b)$ because $u'$ is injective. Let us show that the element $p(a')\in\oo{Coker}(\alpha)$ does not depend on the choice of the element $b\in B$ such that $v(b)=k(c)$. Indeed, if $b^*\in B$ is another element such that $v(b^*)=k(c)$, we have $b^*=b+u(a)$ where $a\in A$; let us show that if $a'^*\in A'$ is such that $u'(a'^*)=\beta(b^*)$ we have $a'^*=a'+\alpha(a)$; indeed we have 
$$
u'(a'+\alpha(a))=u'(a')+u'(\alpha(a))=\beta(b)+\beta(u(a))
$$ 
$$
=\beta(b+u(a))=\beta(b^*)=u'(a'^*),
$$ 
and the injectivity of $u'$ implies $a'+\alpha(a)=a'^*$. Finally, we conclude that $p(a'^*)=p(a')+p(\alpha(a))=p(a')$. We can thus set $\delta(c)=p(a')$ and we have defined a map $\delta:\oo{Ker}(\gamma)\to\oo{Coker}(\alpha)$.

(b) Linearity of $\delta$: If $c_1,c_2$ are in $\oo{Ker}(\gamma)$ and $c=c_1+c_2$, pick $b_1$ and $b_2$ in $B$ such that $v(b_1)=k(c_1)$ and $v(b_2)=k(c_2)$, and define $b\in B$ by $b:=b_1+b_2$; it is then obvious that $\delta(c)=\delta(c_1)+\delta(c_2)$. We prove similarly that $\delta(rc)=r\delta(c)$ for $r\in R$.

(c) Exactness at $\oo{Ker}(\beta)$ and $\oo{Coker}(\beta)$: Follows from Lemmas \ref{b2i} and \ref{b2ii} respectively.

(d) Equality $\delta\circ v_1=0$: Suppose that $c=v_1(\bar b)$ with $\bar b\in\oo{Ker}(\beta)$; we then take for $b\in B$ the element $j(\bar b)$. As $\beta(j(\bar b))=0$, we see that $\delta(c)=0$, hence $\delta\circ v_1=0$. 

(e) Exactness at $\oo{Ker}(\gamma)$: Suppose that $\delta(c)=0$. It suffices to show that we have $c=v_1(b^*)$ for some $b^*\in\oo{Ker}(\beta)$. In the notation of (a) we have $a'=\alpha(a)$ with $a\in A$, and we get 
$$
\beta(b)=u'(a')= u'(\alpha(a))= \beta(u(a)),
$$ 
that is, $\beta(b-u(a))=0$. The element $b-u(a)$ is thus of the form $j(b^*)$ for some $b^*\in\oo{Ker}(\beta)$. It is enough to show $c=v_1(b^*)$. We have 
$$
k(c)=v(b)= v(u(a)+j(b^*))=v(j(b^*))=k(v_1(b^*)).
$$ 
The injectivity of $k$ yields $c=v_1(b^*)$, as desired.

(f) Equality $u_2\circ\delta=0$: We have (still with the notation of (a)) 
$$
u_2(\delta(c))=u_2(p(a'))=q(u'(a'))=q(\beta(b))=0.
$$ 
%hence $u_2\circ\delta=0$. 

(g) Exactness at $\oo{Coker}(\alpha)$: Suppose that an element $p(a')$ in $\oo{Coker}(\alpha)$ (with $a'\in A'$) satisfies $u_2(p(a'))=0$. It suffices to prove $p(a')=\delta(c)$ for some $c\in\oo{Ker}(\gamma)$. We have $q(u'(a'))=0$, and thus $u'(a')=\beta(b)$ for some $b\in B$; as $v'(u'(a')))=0$, we get $v'(\beta(b))=0$, thus $\gamma(v(b))=0$, that is $v(b)=k(c)$ for some $c\in\oo{Ker}(\gamma)$, and we get the sought-for equality $p(a')=\delta(c)$ by definition of $\delta$.%which shows that \eqref{eb2iii} is exact at $\oo{Coker}(\alpha)$.
\end{proof}
%\begin{lem}\label{bc1i}If $u',\alpha$ and $\gamma$ are injective, then $\beta$ is injective.\end{lem}\begin{proof}This follows from Lemma~\ref{b2i}: indeed we have $\oo{Ker}(\alpha)=0$ and $\oo{Ker}(\gamma)=0$, hence $\oo{Ker}(\beta)=0$.\end{proof}
\begin{lem}\label{b254}
If $M$ is a flat $R$-module, if 
$$
0\to M_1\to M_2\to M\to0
$$ 
is an exact sequence of $R$-modules, and if $N$ is an $R$-module, then the sequence 
$$
0\to M_1\otimes_RN\to M_2\otimes_RN\to M\otimes_RN\to0
$$ 
is exact.
\end{lem}
%
\begin{proof}
Let 
$$
0\to P\to F\to N\to 0
$$ 
be an exact sequence of $R$-modules such that $F$ is free, and form the diagram
$$
\begin{tikzcd}
&M_1\otimes P\ar[d]\ar[r]&M_2\otimes P\ar[d,"f"]\ar[r]&M\otimes P\ar[d,"g"]\ar[r]&0\\ 
0\ar[r]&M_1\otimes F\ar[d]\ar[r]&M_2\otimes F\ar[d]\ar[r]&M\otimes F\\ 
&M_1\otimes N\ar[d]\ar[r]&M_2\otimes N\ar[d]\\ 
&0&0
\end{tikzcd}
$$ 
where the tensor products are taken over $R$, and where the maps are the natural ones. This diagram is clearly commutative and exact. By Lemma~\ref{b2iii} there is an exact sequence  
$$
\oo{Ker}(f)\to\oo{Ker}(g)\to M_1\otimes N\to M_2\otimes N
$$ 
As $M$ is flat, $g$ is injective. Thus $M_1\otimes N\to M_2\otimes N$ is also injective. 
\end{proof}
%
\begin{lem}%\label{?}
Let $0\to M'\to M\to M''\to0$ be an exact sequence of $R$-modules with $M''$ flat. Then $M'$ if flat if and only if $M$ is flat.
\end{lem}
%
\begin{proof}
Let $N'\to N$ be a monomorphism of $R$-modules and form the commutative diagram 
$$
\begin{tikzcd}
&&&0\ar[d]\\ 
0\ar[r]&M'\otimes N'\ar[d,"\alpha"]\ar[r,"f"]&M\otimes N'\ar[d,"\beta"]\ar[r]&M''\otimes N'\ar[d,"\gamma"]\ar[r]&0\\ 
0\ar[r]&M'\otimes N\ar[r,"g"]&M\otimes N\ar[r]&M''\otimes N\ar[r]&0,
\end{tikzcd}
$$ 
the maps being the natural ones. The diagram is exact by flatness of $M''$ and Lemma~\ref{b254}.

Assume that $M$ is flat. Then $\beta$ is injective, and so is $\beta\circ f=g\circ\alpha$. This shows that $\alpha$ is injective, and thus that $M'$ is flat.

Assume that $M'$ is flat. Then $\alpha$ is injective, and Lemma~\ref{b2i} implies that $\beta$ is injective, and thus that $M$ is flat.
\end{proof}

\section{Page 35, Exercise 2.26}\label{35}%

Here is the sketch of a solution.

Given $A$-modules $M$ and $N$ we say that $M$ is $N$\textbf{-flat} if for all submodule $N'$ of $N$ the natural morphism $M\otimes N'\to M\otimes N$ is injective. (Here and in the sequel ``$\otimes$'' means ``$\otimes_A$''.) 

(a) If $M\otimes N'\to M\otimes N$ is injective for \emph{all finitely generated} submodule $N'$ of $N$, then $M$ is $N$-flat.

\begin{proof} 
Let $N''$ be an arbitrary submodule of $N$, let $t''=\sum x_i\otimes y_i$ in $M\otimes N''$ (with $x_i\in M,y_i\in N''$) be such that the tensor $t=\sum x_i\otimes y_i$ in $M\otimes N$ vanishes. It suffices to show $t''=0$. Let $N'$ be the submodule of $N''$ generated by the $y_i$. By assumption the tensor $t'=\sum x_i\otimes y_i$ of $M\otimes N'$ vanishes. As $t'\mapsto t''$, this implies $t''=0$. 
\end{proof}

(b) If $M$ is $N$-flat and if $P$ is a submodule or a quotient of $N$, then $M$ is $P$-flat.%, then so are the submodules and the quotients of $N$. 

\begin{proof} 
The case of the submodules is left to the reader. Let 
$$
0\to R\xrightarrow iN\xrightarrow pQ\to0
$$ 
be exact, and let us show that $M$ is $Q$-flat. Let $Q'$ be a submodule of $Q$, and set $N':=p^{-1}(Q')$. We get a commutative diagram with exact rows
$$
\begin{tikzcd}
0\ar[r]&R\ar[d,"r"]\ar[r,"i'"]&N'\ar[d,"n"]\ar[r,"p'"]& Q'\ar[d,"q"]\ar[r]&0\\ 
0\ar[r]&R\ar[r,"i"']&N\ar[r,"p"']& Q\ar[r]&0
\end{tikzcd}
$$ 
where $r$ is the identity of $R$, and the maps $i',p',n$ and $q$ are the obvious ones. Letting $S\mapsto\overline S$ be the ``functor'' $M\otimes-$ we obtain the commutative diagram with exact rows
$$
\begin{tikzcd}
\overline R\ar[d,"\overline r"]\ar[r,"\overline{i'}"]&\overline{N'}\ar[d,"\overline n"]\ar[r,"\overline{p'}"]& \overline{Q'}\ar[d,"\overline q"]\ar[r]&0\\ 
\overline R\ar[r,"\overline i"']&\overline N\ar[r,"\overline p"']& \overline Q\ar[r]&0
\end{tikzcd}
$$ 
where $\overline r$ is the identity of $\overline R$. As $\overline n$ is injective, so is $\overline q$. 
\end{proof}

(c) If $N=\bigoplus_{i\in I}N_i$ is the direct sum of a family of submodules, and if $M$ is $N_i$-flat for each $i$, then $M$ is $N$-flat.%The direct sum of a family of $M$-flat modules is $M$-flat. 

\begin{proof} 
Let $(N_i)_{i\in I}$ be our family. 

$\bu$ First assume $I=\{1,2\}$. We prove the result by considering the \emph{split} exact sequence 
$$
0\to N_1\xrightarrow i N_1\oplus N_2\xrightarrow pN_2\to0.
$$ 
%The details are left to the reader. 
\begin{proof}
Let $N'$ be a submodule of $N$, set $N'_1:=N'\cap N_1$, let $N'_2$ be the image of $N'$ in $N_2$, and let 
$$
\begin{tikzcd}
0\ar[r]&N'_1\ar[d,"f_1"]\ar[r,"i'"]&N'\ar[d,"f"]\ar[r,"p'"]&N'_2\ar[d,"f_2"]\ar[r]&0\\ 
0\ar[r]&N_1\ar[r,"i"']&N\ar[r,"p"']&N_2\ar[r]&0
\end{tikzcd}
$$  
be the obvious commutative diagram with exact rows. Letting $S\mapsto\overline S$ be the ``functor'' $M\otimes-$ we obtain the commutative diagram with exact rows
$$
\begin{tikzcd}
\overline{N'_1}\ar[d,"\overline{f_1}"]\ar[r,"\overline{i'}"]&\overline{N'}\ar[d,"\overline f"]\ar[r,"\overline{p'}"]& \overline{N'_2}\ar[d,"\overline{f_2}"]\\ 
\overline{N_1}\ar[r,"\overline i"']&\overline N\ar[r,"\overline p"']& \overline{N_2}.
\end{tikzcd}
$$ 
It is easy to see that $\overline{f_1},\overline{f_2}$ and $\overline i$ are injective, and that this implies that $\overline f$ is also injective.
\end{proof}

$\bu$ Second assume that $I$ is finite. We prove the statement by induction.

$\bu$ Third assume that $I$ is arbitrary, and let $N'$ be a finitely generated submodule of $N=\bigoplus_{i\in I}N_i$. Then there is a finite subset $J$ of $I$ such that $N'\subset\bigoplus_{j\in J}N_j$, and we have 
$$
N=\left(\bigoplus_{j\in J}N_j\right)\oplus\left(\bigoplus_{i\in I\setminus J}N_i\right). 
$$ 
We leave the rest of the proof to the reader.

(d) If $M\otimes\aaa\to M\otimes A$ is injective for all finitely generated ideal $\aaa$, then $M$ is flat.

We leave again the proof to the reader. 
\end{proof}

\section{Page 35, flat modules}%

Taken from Chapter 1, Section 2, Subsection 11 in Nicolas Bourbaki, \textbf{Algèbre commutative: Chapitres 1 à 4}, Masson, Paris 1985:

\emph{Let $A$ be a (non necessarily commutative) associative ring with $1$, let $M$ be a right $A$-module, and let $N$ be a left $A$-module. Then $M$ is $N$-flat (see \S\ref{35}) if and only if the following condition holds:}

\emph{For all finite families $(x_i)\subset M,(y_i)\subset N$ such that $\sum x_i\otimes y_i=0$ there are finite families $(a_{ij})\subset A$ and $(x'_j)\subset M$ such that $\sum_jx'_ja_{ij}=x_i$ for all $i$ and $\sum_ia_{ij}y_i=0$ for all $j$.}

\emph{Proof.} This follows easily from \S\ref{vt}. $\square$

We also have:

\emph{Let $A$ be a (non necessarily commutative) associative ring with $1$ and $M$ a right $A$-module. Then $M$ is flat if and only if the following condition holds:}

\emph{For all finite families $(x_i)\subset M,(a_i)\subset A$ such that $\sum x_ia_i=0$ there are finite families $(a'_{ij})\subset A$ and $(x'_j)\subset M$ such that $\sum_jx'_ja'_{ij}=x_i$ for all $i$ and $\sum_ia'_{ij}a_i=0$ for all $j$.}

\emph{Proof.} We set $N:=A$ in the previous statement and use \S\ref{35}(d). $\square$

There is also a statement and a proof of this result in the Stacks Project; see the tag http://stacks.math.columbia.edu/tag/00HK

\section{Page 35, Exercise 2.27, (i) implies (ii)}%

Consider the obvious diagram
$$
(x)\otimes A\to(x)\otimes A/(x)\to A\otimes A/(x)\to A/(x). 
$$ 
(We again write $\otimes$ for $\otimes_A$.) The first map is surjective, the second map is injective by flatness of $A/(x)$, the third map is bijective and the composition vanishes. This implies $(x)\otimes A/(x)=0$. The sequence 
$$
0\to(x)\otimes(x)\to(x)\otimes A\to(x)\otimes A/(x)\to0
$$ 
is exact by flatness of $(x)$. But this sequence can also be written as 
$$
0\to(x)\otimes(x)\to(x)\to0\to0.
$$ 
This prove $(x)=(x^2)$.

\section{Page 35, Exercise 2.28}\label{228}%

An absolutely flat local ring is a field: Let $(A,\mf m)$ be our local ring and let $\mu$ be in $\mf m$. It suffices to show $\mu=0$. If we had $\mu\ne0$, we would get $(\mu)=(e)$ for some nonzero idempotent $e$. Then $e\in\mf m=\mf R$ would imply that $f:=1-e$ is a unit, hence $f=f^2$ entails $f=1$ and thus $e=0$, a contradiction. 

\section{Page 37}%

It is written:

Conversely, these three conditions determine the ring $S^{-1}A$ up to isomorphism. Precisely:

\textbf{Corollary 3.2.} \emph{If $g:A\to B$ is a ring homomorphism such that}

(i) $s\in S\implies g(s)$ \emph{is a unit in} $B$;

(ii) $g(a)=0\implies as=0$ \emph{for some} $s\in S$;

iii) \emph{Every element of $B$ is of the form $g(a)g(s)^{-1}$; then there is a unique isomorphism $h:S^{-1}A\to B$ such that} $g=h\circ f$.

The following wording would be slightly better:

Conversely, these three conditions determine the ring $S^{-1}A$ up to unique isomorphism. Precisely:

\textbf{Corollary 3.2.} \emph{If $g:A\to B$ is a ring homomorphism such that}

(i) $s\in S\implies g(s)$ \emph{is a unit in} $B$;

(ii) $g(a)=0\implies as=0$ \emph{for some} $s\in S$;

iii) \emph{Every element of $B$ is of the form $g(a)g(s)^{-1}$; then there is a unique morphism $h:S^{-1}A\to B$ such that $g=h\circ f$. Moreover this morphism is an isomorphism.}

\section{Page 39, Proposition 3.4}%

It is easy to see that we have 
$$
S^{-1}\sum M_i=\sum S^{-1}M_i.
$$ 
It is also easy to see that we have 
$$
S^{-1}\bigcap M_i\ \subset\ \bigcap S^{-1}M_i.
$$ 
But the converse inclusion 
$$
\bigcap S^{-1}M_i\ \subset\ S^{-1}\bigcap M_i
$$ 
is not true in general. Here is a counterexample. Let $K$ be a field and $X$ an indeterminate. Setting $A:=K[X]$, $S:=K[X]\setminus\{0\}$ we get 
$$
\bigcap_n S^{-1}(X^n)=K(X),\quad S^{-1}\bigcap_n(X^n)=(0).
$$

\section{Pp 39-40, Propositions 3.5 and 3.7}%

The natural $A$-linear map $f:M\to S^{-1}M$ has the following universal property:

For all $A$-linear map $g:M\to N$ from $M$ to an $S^{-1}A$-module $N$ such that $sm=0$ for some $s$ in $S$ and some $m$ in $m$ implies $g(m)=0$ there is a unique $S^{-1}A$-linear map $h:S^{-1}M\to N$ such that $g=h\circ f$.

Using this universal property one can describe explicitly the respective inverses of the isomorphisms in Propositions 3.5 and 3.7.

\section{P 38, Proposition 3.5}%

In the notation of Proposition 3.5 p.~38 we have:

\emph{If $1\otimes x=0$ in $S^{-1}A\otimes_AM$ then we have $sx=0$ for some} $s\in S$.

\emph{Proof.} We have $1\otimes x=0$ in $N\otimes_AM$ where $N$ is a finitely generated sub-$A$-module of $S^{-1}A$. For any $s\in S$ set $A/s:=\{a/s\ |\ a\in A\}$; this is also a sub-$A$-module of $S^{-1}A$. Then $N\subset A/s$ for some $s$, and we have $1\otimes x=0$ in $A/s\otimes_AM$. Defining $f:A\to A/s$ by $f(a):=a/s$ and letting $B$ be the kernel of $f$ and $g:M\to A/s\otimes_AN$ the map induced by $f$, we get exact sequences 
$$
B\otimes_AM\to M\xr gA/s\otimes_AM\to0
$$ 
and 
$$
0\to BM\to M\xr gA/s\otimes_AM\to0.
$$ 
We have $g(sx)=0$ and thus $sx=\sum_{i=1}^nb_ix_i$ with $b_i\in B$ and $x_i\in M$. As $b_i/s=0$ in $S^{-1}A$ there is a $t\in S$ such that $tb_i=0$ for all $i$. This gives $tsx=0.\ \square$

\section{P 40, Proposition 3.9}\label{re}%

Here is a mild generalization:

\emph{The complex of $A$-modules $M\xr fN\xr g P$ is exact if and only if the complex} 
$$
M_{\mf m}\xr{f_{\mf m}}N_{\mf m}\xr{g_{\mf m}}P_{\mf m}
$$ 
\emph{is exact for all maximal ideal $\mf m$ of} $A$.
\begin{proof}
Use the isomorphism 
$$
\oo{Ker}(g_{\mf m})/\oo{Im}(f_{\mf m})\simeq(\oo{Ker}(g)/\oo{Im}(f))_{\mf m}
$$ 
and Proposition 3.8 of the book.
\end{proof}

\section{Pp 41-42, proof of Proposition 3.11}%

\subsection{Part (ii)}

Here is a more detailed proof of the statement 

\emph{If $\mf a$ is an ideal in $A$, then $\mf a^{\oo{ec}}=\bigcup_{s\in S}\ (\mf a:s)$}.

We have 

$x\in\mf a^{\oo{ec}}=(S^{-1}\mf a)^{\oo c}$

$\ds\iff\frac{x}{1}=\frac{a}{s'}$ for some $a\in\mf a,s'\in S$ 

$\iff(xs'-a)t'=0$ for some $a\in\mf a$ and some $s',t'\in S$ 

$\iff xst\in\mf a$ for some $s,t\in S$

$\iff xs\in\mf a$ for some $s\in S$

$\iff x\in\bigcup_{s\in S}\ (\mf a:s)$.

To prove 

$xst\in\mf a$ for some $s,t\in S$ $\implies$ $(xs'-a)t'=0$ for some $a\in\mf a$ and some $s',t'\in S$

we set $a:=xst$, $s':=st$, $t':=1$.%\bigskip%\hrule\bigskip\textbf{Comment.} 

$\bu$ About Part (ii): A particular case of the statement 

\emph{$\mf a^{\oo e}=(1)$ if and only if $\mf a$ meets $S$}

is 

\emph{$(0)^{\oo e}=(1)$ if and only if $\ 0\in S$,}

that is 
\begin{equation}\label{s-1a}
S^{-1}A=0\iff\ 0\in S
\end{equation}
(It is easy to prove this particular case directly.)

\subsection{Part (iv)}\label{prcor}%

Set $X:=\Sp(A),Y:=\Sp(S^{-1}A)$ and let $c:Y\to X$ be the contraction map. In view of Proposition 1.17iii p.~10 of the book, it suffices to show:
$$
c(Y)=\{\ppp\in X\ |\ \ppp\cap S=\varnothing\}
$$ 
and 
$$
\ppp\in c(Y)\implies S^{-1}\ppp\in c(X).
$$ 
The conclusion is that 

\emph{the contraction and extension maps are inverse bijections between $Y$ and $c(Y)$.} 

\begin{comment}

\emph{Let $U$ be the set of prime ideals of $A$ disjoint from $S$ and $V$ the set of prime ideals of $S^{-1}A$. Then the maps $U\to V$, $\ppp\mapsto S^{-1}\ppp$ and $V\to U$, $\qqq\mapsto \qqq^{\oo c}$ are well-defined inverse bijections.} 

\emph{Proof.}

$\mf q\in V\implies\mf q^{\oo c}\in U$: It suffices to check that $\mf q^{\oo c}$ is disjoint from $S$. If $s$ is in $S\cap\mf q^{\oo c}$, then $s/1$ is in $\mf q$, which is impossible since $s/1$ is a unit.

$\mf p\in U\implies\mf p^{\oo e}\in V$: As written in the book, ``if $\mf p$ is a prime ideal in $A$, then $A/\mf p$ is an integral domain; if $\overline S$ is the image of $S$ in $A/\mf p$, we have $S^{-1}A/S^{-1}\mf p\simeq\bar S^{-1}(A/\mf p)$ which is either $0$ or else is contained in the field of fractions of $A/\mf p$ and is therefore an integral domain, and therefore $\bar S^{-1}(A/\mf p)$ is either prime or is the unit ideal; by i) the latter possibility occurs if and only if $\mf p$ meets $S$.'' Instead of ``by i)'', I would say ``by \eqref{s-1a}''.

$\mf p^{\oo{ec}}=\mf p$ for $\mf p\in U$: It suffices to show $\mf p^{\oo{ec}}\subset\mf p$. Let $s$ be in $S$. In view of Proposition 3.11 (ii), it suffices to show $(\mf p:s)\subset\mf p$, which is easy.

$\mf q^{\oo{ce}}=\mf q$ for $\mf q\in V$: This is a particular case of Part (i). $\square$

\end{comment}

\section{Page 43, Proposition 3.14}%

The inclusion 
$$
S^{-1}\oo{Ann}M\subset\oo{Ann}S^{-1}M
$$ 
holds even is $M$ is not finitely generated. Here is a counterexample to the reverse inclusion:

Let $K$ be a field and $X$ an indeterminate. Set 
$$
A:=K[X],\quad S:=K[X]\setminus\{0\},\quad M:=\bigoplus A/(X^n).
$$ 
We get $\oo{Ann}M=(0)$, $S^{-1}M=0$, $\oo{Ann}S^{-1}M=(1)$. 

\section{Page 43, Proposition 3.16}%\label{43b}

Compare with Exercise 3.21iv p. 47 of the book Section~\ref{321iv} p.~\pageref{321iv} below.

\subsection{Proof of Proposition 3.16}

The commutative diagram
$$
\begin{tikzcd}
\kern-22pt\ppp<A\ar[d,"\alpha"']\ar[r,"f"]&B>\ppp B\ar[d,"\beta"]\kern-30pt\\ 
\kern-22pt\ppp_\ppp<A_\ppp\ar[r,"f_\ppp"']&B_\ppp>\mf m\supset\ppp B_\ppp\kern-66pt.
\end{tikzcd}
$$ 
might help. Note that we have $f_\ppp^{-1}(\mf m)=\ppp_\ppp$.

%https://docs.google.com/document/d/1YYUDEGhoImy-b_Lx9foGoetelzzXbN1IiNbpo7pXh98/edit {comment} 180522

\subsection{Strengthening of Proposition 3.16}\label{43}

Proposition 3.16 can also be stated as follows:

\emph{Let $A\to B$ be a morphism of commutative rings, let $\aaa$ be a contracted ideal in $A$, and let $\Sigma$ be the set of those ideals in $B$ which contract to $\aaa$. (In particular $\Sigma$ is nonempty.) Order $\Sigma$ by inclusion. Then we have}

(a) \emph{$\aaa^{\oo e}$ is the least element of $\Sigma$, or, equivalently, $\aaa^{\oo e}$ is the intersection of all the elements of $\Sigma$,}

(b) \emph{$\Sigma$ has one, or more, maximal elements,}

(c) \emph{if $\ \aaa$ is prime, then any maximal element of $\Sigma$ is also prime.}

The proofs of these statements are straightforward and elementary. We'll prove (c), the proofs of (a) and (b) being similar and left to the reader.

To prove (c), let $\mf q$ be a maximal element of $\Sigma$. Assume by contradiction that $\mf q$ is not prime. Then there are ideals $\mf{b,b}'$ in $B$ such that $\mf q$ is a proper sub-ideal of $\bbb$ and $\bbb'$, and the product $\mf{bb}'$ is contained in $\mf q$. By maximality of $\mf q$, the prime ideal $\aaa$ is a proper sub-ideal of $\bbb^{\oo c}$ and $\bbb'^{\oo c}$. By Exercise 1.18 p.~10 we also have 
$$
\bbb^{\oo c}\bbb'^{\oo c}\subset(\mf{bb}')^{\oo c}\subset\mf q^{\oo c}=\aaa,
$$ 
in contradiction with the primality of $\aaa$.

\subsection{Related result}\label{res}

Here is a related result:

\emph{$\mf p$ is the contraction of a prime ideal if and only if $A_\ppp/\ppp_\ppp\otimes_AB\ne0$.}

Indeed we have 
\begin{equation}\label{f1}
A_\ppp/\ppp_\ppp\otimes_AB\simeq\frac{A_\ppp\otimes_AB}{\ppp_\ppp\otimes_AB}\simeq\frac{B_\ppp}{\ppp_\ppp\otimes_AB}\simeq\frac{B_\ppp}{(\ppp B)_\ppp}\simeq\big(B/\ppp B\big)_\ppp=\big(B/\ppp^{\oo e}\big)_\ppp\ ,
\end{equation} 
$$
\big(B/\ppp^{\oo e}\big)_\ppp=0\iff\frac11=\frac01\text{ in }B/\ppp^{\oo e}\iff\exists\ s\in A\setminus\ppp\ |\ f(s)\in\ppp^{\oo e},
$$ 
$$
\iff\exists\ s\in\ppp^{\oo{ec}}\setminus\ppp\iff\ppp^{\oo{ec}}\ne\ppp.
$$ 
Note that the above statement follows also from Exercise 3.21iv p.~47 of the book.

\section{Page 44, Exercise 3.8}%

Implication (v)$\implies$(i). Let $\mf p$ be a prime ideal of $A$ disjoint from $S$. By Proposition 3.9 p.~40 of the book, it suffices to show that the natural map 
$$
\psi:(S^{-1}A)_{S^{-1}\mf p}\to(T^{-1}A)_{S^{-1}\mf p}
$$ 
is bijective. 

The element $r/s\in S^{-1}A$ is not in $S^{-1}\mf p$ if and only if $r$ is not in $\mf p$. In particular an element of $(S^{-1}A)_{S^{-1}\mf p}$ is of the form 
$$
\frac{a/s}{r/s'}
$$ 
with $a\in A, r\in A\setminus\mf p$ and $s,s'\in S$.

Injectivity of $\psi$: If 
$$
\frac{a/s}{r/s'}=0
$$ 
in $(T^{-1}A)_{S^{-1}\mf p}$, then there is an $r'\in A\setminus\mf p$ and an $s''\in S$ such that the element 
$$
\frac{a}{s}\frac{r'}{s''}=\frac{ar'}{ss''}
$$ 
is equal to zero in $T^{-1}A$, and there is a $t\in T$ such that $ar't=0$. Then $t$ is not in $\mf p$, and we get 
$$
\frac{a/s}{r/s'}=\frac{ar't/s}{rr't/s'}=0.
$$ 
Surjectivity of $\psi$: An element of $(T^{-1}A)_{S^{-1}\mf p}$ is of the form 
$$
\frac{a/t}{r/s}
$$ 
with $a\in A,t\in T,r\in A\setminus\mf p, s\in S$, and we have 
$$
\frac{a/t}{r/s}=\frac{a/1}{rt/s}\ .
$$ 
We see that $rt$ is not in $\mf p$, and thus 
$$
\frac{a/t}{r/s}=\psi\left(\frac{a/1}{rt/s}\right).
$$

\section{P. 44, Exercise 3.9}%

See Section \ref{114} p.~\pageref{114}. --- Actually there are two proofs of the fact that the set of zero-divisors  is a union of prime ideals: one is Exercise 1.14 p.~12, the other is Exercise 3.7 p.~44.

(ii) Assume that $a/s\in S_0^{-1}A$ is neither a unit nor a zero-divisor. We have $e\notin S_0$. Then there is a nonzero $b$ in $A$ with $ab=0$, and we get $\frac as\frac b1=0$, hence $\frac b1=0$, that is $bt=0$ for some $t\in S_0$. This implies $b=0$, a contradiction.

\section{P. 44, Exercise 3.10i}%

$$a=a^2x\implies\frac{a^2}{s^2}\frac{sx}1=\frac{ax^2s}{s^2}=\frac as\ .$$ 

\section{P. 44, Exercise 3.10ii}\label{310ii}%

Equivalent statements: 

$A$ \emph{is absolutely flat if and only if for all maximal ideal $\mf m$ of $A$ we have} $\mf m_{\mf m}=(0)$.

$A$ \emph{is absolutely flat if and only if for all $\mu\in\mf m\subset A$ with $\mf m$ maximal, there is an $s\in A\setminus\mf m$ such that} $s\mu=0$.

Here is a proof: If $A$ is absolutely flat, then so is $A_{\mf m}$ by Part (i) of the same Exercise, and $A_{\mf m}$ is a field by Exercise 2.28 p.~35 of the book (see Section~\ref{228} p.~\pageref{228} above). Conversely, assume that $A_{\mf m}$ is a field for each maximal ideal $\mf m$ of $A$, and let $a$ be in $A$. We have $(a^2)_{\mf m}=(a)_{\mf m}$ for all maximal $\mf m$, and thus $(a^2)=(a)$. This shows that $A$ is absolutely flat by Exercise 2.27 p.~35 of the book ((ii) implies (i)).

\section{P. 44, Exercise 3.11}%

The equivalence (ii)$\iff$(iii) is clear, as well as the implication (iv)$\implies$(iii).

(ii)$\implies$(iv): Let $x$ and $y$ be two distinct points of $X=\oo{Spec}(A)$. 

Claim: there are elements $a\in\mf p_x\setminus\mf p_y$, $b\in\mf p_y\setminus\mf p_x$ such that $ab=0$.

The claim implies (iv): $X_a$ and $X_b$ are disjoint open neighborhood of $x$ and $y$ respectively. 

Proof of the claim. Assume the claim is false. Then $S:=(A\setminus\mf p_x)(A\setminus\mf p_y)$ is a multiplicatively closed subset avoiding $0$, hence $S^{-1}A$ is not the zero ring, hence there is a maximal ideal $\mf m$ in $S^{-1}A$ whose contraction in $A$ is a prime ideal contained in $\mf p_x\cap\mf p_y$, a contradiction.

(iv)$\implies$(i): For any ideal $\mf a$ of any ring $R$ write $\overline{\mf a}$ for the image of $\mf a$ in $\overline R:=R/\mf N(R)$, define $\overline r\in\overline R$ for $r\in R$ similarly. Let $\mu\in\mf m\subset A$ with $\mf m$ maximal. By Section~\ref{310ii} p.~\pageref{310ii} above, it suffices to show that %there is an $s\in A\setminus\mf m$ such that 
$\overline \mu=\overline 0$. By Corollary 3.15 p.~42 of the book, this is equivalent to showing that %there is an $s\in A\setminus\mf m$ such that 
the element $\mu/1$ of $A_{\mf m}$ is nilpotent, which is clear since $\mf m$ is a minimal prime ideal of $A$ (and thus $\mf m_{\mf m}$ is the nilradical of $A_{\mf m}$).

(i)$\implies$(ii): Assume by contradiction there is a prime ideal $\mf p$ strictly contained in a maximal ideal $\mf m$. Let us denote this situation by $\mf p<\mf m$. In the above notation we get firstly $\overline{\mf p}<\overline{\mf m}$ with $\overline{\mf p}$ prime and $\overline{\mf m}$ maximal, and secondly $\overline{\mf p}_{\overline{\mf m}}<\overline{\mf m}_{\overline{\mf m}}$ with $\overline{\mf p}_{\overline{\mf m}}$ prime and $\overline{\mf m}_{\overline{\mf m}}$ maximal. But Exercise 3.10ii p.~44 of the book (see Section~\ref{310ii} above) implies $\overline{\mf m}_{\overline{\mf m}}=(\overline0).\ \square$

Proof that $X$ is totally disconnected: Let $x$ and $y$ be two different points of $X$. We saw that there is an $a\in A$ such that $x\in X_a$ and $y\notin X_a$ (see above claim). As $X$ is Hausdorff and $X_a$ is compact, $X_a$ is closed, that is open and closed, and so is its complement $V(a)$, which contains $y.\ \square$

Here is a related result:

\emph{The following conditions on a ring $A$ are equivalent:}

(a) \emph{the Krull dimension of $A$ is at most zero,}

(b) \emph{$A/\mf n$ is absolutely flat, where $\mf n$ is the nilradical of $A$,}

(c) \emph{for each $a$ in $A$ the descending chain $(a)\supset(a^2)\supset\cdots$ stabilizes.}

\emph{Proof.} In view of Exercise 3.11 p. 44 of the book, it suffices to prove (b)$\implies$(c)$\implies$(a). %(a)$\implies$(b): We can assume $\mf n=(0)$. Let $a$ be in $A$. It suffices to show $(a)=(a^2)$. Let $\mf p$ be a prime ideal of $A$. Then the nilradical of $A_{\mf p}$ is $(0)$ and $\mf p_{\mf p}$ is the only prime ideal of $A_{\mf p}$. This implies that $A_{\mf p}$ is a field, and we get successively the equalities $$(a)_{\mf p}=(a^2)_{\mf p},\quad(a)_{\mf p}/(a^2)_{\mf p}=(0),\quad((a)/(a^2))_{\mf p}=(0).$$ As $\mf p$ is an arbitrary prime ideal of $A$, this forces $(a)=(a^2)$.

(b)$\implies$(c): With obvious notation we have $\bar a=\bar a^2\bar b$ for some $b$ in $A$, that is $(a-a^2b)^n=0$ for some $n\ge1$. This is easily seen to imply $a^{n+1}\in(a^n)$ and thus $(a^{n+1})=(a^n)$. 

(c)$\implies$(a): Let $\mf p$ be a prime ideal of $A$ and let $a$ be in $A\setminus\mf p$. We have $a^n(1-ab)=0$ for some $b$ in $A$ and some $n$ in $\mathbb N$. In particular $a^n(1-ab)\in\mf p$, and thus $1-ab\in\mf p$. This implies that $A/\mf p$ is a field, and therefore that $\mf p$ is maximal. $\square$

\section{P. 45, Exercise 3.14}%\label{321iv}

Let $\mf m$ be a maximal ideal of $A/\mf a$. It suffices to show $(M/\mf aM)_{\mf m}=0$. Letting $\mf m^{\oo c}$ be the contraction of $\mf m$ in $A$, we get 
$$
(M/\mf aM)_{\mf m}\simeq(M/\mf aM)_{\mf m^{\oo c}}\simeq M_{\mf m^{\oo c}}/(\mf aM)_{\mf m^{\oo c}}=0.
$$ 

\section{P. 45, Exercise 3.15}%\label{321iv}

See Lemma \ref{b254} p. \pageref{b254} above.

\section{P. 46, Exercise 3.20}%\label{321iv}

Counterexample to the converse of (ii): $B:=k$ a field, $A:=k[\varepsilon]$ with $\varepsilon^2=0$, $f:k[\varepsilon]\to k$ the canonical projection. 

\section{P. 47, Exercise 3.21iv}\label{321iv}%

We just give the commutative diagram
$$
\begin{tikzcd}
(B/\mf pB_{\mf p})^*\ar[d,"\overline{f_{\mf p}}^*"]\ar[r]&(B_{\mf p})^*\ar[d,"(f_{\mf p})^*"]\ar[r]& B^*\ar[d,"f^*"]\\ 
(A_{\mf p}/\mf p_{\mf p})^*\ar[r]&(A_{\mf p})^*\ar[r]& A^*,
\end{tikzcd}
$$ 
where $R^*$ stands for $\oo{Spec}(R)$, and the chain of isomorphisms  
$$
(A_{\mf p}/\mf p_{\mf p})\otimes_AB\simeq(A/\mf p)_{\mf p}\otimes_AB\simeq(A/\mf p)_{\mf p}\otimes_{A/\mf p}A/\mf p\otimes_AB
$$ 
$$
\simeq(A/\mf p)_{\mf p}\otimes_{A/\mf p}B/\mf pB\simeq(B/\mf pB)_{\mf p}.
$$ 
(See \eqref{f1} p.~\pageref{f1} for a minor variant of the above calculation.)

\section{P. 47, Exercise 3.23}%\label{321iv}%

It's simpler to proceed as follows:

For $f\in A$ put 
$$
S(f):=A\ \setminus\ \bigcup_{\mf p\notni f}\ \mf p,
$$ 
where it is understood that $\mf p$ is in $X$. Note that $S(f)$ is a multiplicatively closed set depending only on $X_f$, not on $f$. Finally put 
$$
A(X_f):=S(f)^{-1}A.
$$ 
Here is a mild generalization: 

For each radical ideal $\mf a$ of $A$ put 
$$
S_{\mf a}:=A\ \setminus\ \bigcup_{\mf p\not\supset\mf a}\ \mf p.
$$ 
This is multiplicatively closed. For $\mf a\subset\mf b$ we have a natural morphism $S_{\mf b}^{-1}A\to S_{\mf a}^{-1}A$. We also have a canonical isomorphism 
$$
\varinjlim_{\mf a\not\subset\mf p}S_{\mf a}^{-1}A.
$$

\section{P. 47, Exercise 3.24}%

Denote the natural morphism $A\to A_{f_i}$ by $a\mapsto a_{|i}$, and the natural morphism $A_{f_i}\to A_{f_if_j}$ by $a_i\mapsto a_{i|j}$. 

Step 1: $I=\{1,\dots,n\}$. Consider the diagram 
$$
0\to A\xr\alpha\prod_{i\in I}A_{f_i}\xr\beta\prod_{i,j\in I}A_{f_if_j}
$$ 
defined by $\alpha(a):=(a_{|i})$ and $\beta((a_i)):=((a_{i|j}-a_{j|i}))$. This is clearly a complex. It suffices to show that it is exact. By Section~\ref{re} p.~\pageref{re}, we can assume that $A$ is local. Let $\mf m$ be its maximal ideal. As the $f_i$ generate the unit ideal, one of them is a unit, so that we can assume $f_1=1$. It is easy to see that $\alpha$ is injective. Assuming $\beta((a_i))=0$, it is straightforward to check that $(a_i)$ is equal to $\alpha(a_1)$. This solves the exercise in the case $I=\{1,\dots,n\}$.

Step 2: $I$ arbitrary. Let $(s_i)$ be a family such that $s_i\in A_{f_i}$ for all $i$ and $s_{i|j}=s_{j|i}$ for all $i,j$. There are $i_1,\dots,i_n$ such that $(f_{i_1},\dots,f_{i_n})=(1)$ and, by Step~1, there is an $s\in A$ such that $s_{|i_k}=s_{i_k}$ for $1\le k\le n$. Let $i_{n+1}$ be in $I$. There is again a $t\in A$ such that $t_{|i_k}=s_{i_k}$ for $1\le k\le n+1$. By uniqueness we get $t=s$. As $i_{n+1}$ was arbitrary, we have $s_{|i}=s_i$ for all $i$. This proves the existence of a solution to our problem. The uniqueness is clear.

\section{P. 48, Exercise 3.25}%

For the hint see Exercise 3.21iv p. 47 of the book and Section~\ref{res} p.~\pageref{res} above.

\section{P. 48, Exercise 3.26}%

For the hint see Exercise 3.21iv p. 47 of the book and Section~\ref{res} p.~\pageref{res} above.

\section{Contracted primary ideals}\label{cpi}%

Section~\ref{43} p.~\pageref{43} prompts the question: Is a contracted primary ideal the contraction of a primary ideal? We show that the answer is negative.

Let $K$ be a field and set $A:=K[\varepsilon]$ with $\varepsilon^2=0$ but $\varepsilon\ne0$. Note that $(0)\subset A$ is primary. We will define a ring $B$ which contains $A$. Then $(0)\subset A$ will be a contracted primary ideal, and we will show that $(0)\subset A$ is not the contraction of a primary ideal of $B$. 

We define $B$ by 
$$
B=K[X,Y_1,Y_2,\dots]/\mathfrak b=K[x,y_1,y_2,\dots]
$$ 
(obvious notation) with 
$$
\mathfrak b=(X^2Y_1)+\sum_{i\ge2}(X^nY_n-XY_1),
$$
and we embed $A$ in $B$ by setting $\varepsilon:=xy_1$. We get $\varepsilon x=0$ and $\varepsilon=x^ny_n$ for all $n\ge1$; in particular $\varepsilon\in(x^n)$ for all $n\ge1$.

We claim that we have $XY_1\notin\mathfrak b$, or, equivalently, $\varepsilon\ne0$.

Proof of the claim: Assume by contradiction 
$$
XY_1\in(X^2Y_1,X^2Y_2-XY_1,\dots,X^nY_n-XY_1).
$$ 
Dividing by $X$ we get 
$$
Y_1\in(XY_1,XY_2-Y_1,X^2Y_3-Y_1,\dots,X^{n-2}Y_{n-1}-Y_1,X^{n-1}Y_n-Y_1).
$$ 
Setting $Y_i:=X^{n-i}Y_n$ for $1\le i\le n-1$ we get $X^{n-1}Y_n\in(X^nY_n)$, which is false. 

The above proof was explained to me by an anonymous user, whose user name is user26857, of the Mathematics Stackexchange forum; see 

\href{https://math.stackexchange.com/q/2389114/660}{https://math.stackexchange.com/q/2389114/660}

We prove that $(0)\subset A$ is not the contraction of a primary ideal of $B$.

Let $\mathfrak q$ be a primary ideal of $B$. If we had $\varepsilon\notin\mathfrak q$ and $x^n\notin\mathfrak q$ for all $n\ge1$, then $x$ would be a non nilpotent zero divisor in $B/\mathfrak q$, contradicting the assumption that $\mathfrak q$ is primary. Thus we have $x^n\in\mathfrak q$ for some $n\ge1$, or $\varepsilon\in\mathfrak q$. But, since $\varepsilon\in(x^n)$, we get $\varepsilon\in\mathfrak q$ in both cases, and $\mathfrak q$ contracts to $(1)$ instead of contracting to $(0)$.

\section{Page 50}\label{contrpry}%

Just before Proposition 4.1: In fact, the contraction of a $\ppp$-primary ideal is a $\ppp^{\oo c}$-primary ideal.

\section{Page 52}%

$\bu$ Proof of Theorem 4.5.

The following statement, occurring in the proof of Theorem 4.5, is often used in the sequel of the book:

{\em In the setting of Theorem 4.5 we have} 
\begin{equation}\label{45}
r(\mf a:x)=\bigcap_{x\notin\mf q_j}\mf p_j.
\end{equation}
(See Remark~\ref{ef} p.~\pageref{ef}). Here are more details. Still in the setting and notation of Theorem 4.5, for $x$ in $A$ set $J(x):=\{j\ |\ x\notin\mf q_j\}$. Then $(\mf q_j:x)$ is $\mf p_j$-primary for $j\in J(x)$, and we have 
$$
(\mf a:x)=\bigcap_{j\in J(x)}(\mf q_j:x).
$$ 
In particular, we have $J(x_i)=\{i\}$, and thus 
$$
(\mf a:x_i)=(\mf q_i:x_i),\quad r(\mf a:x_i)=\mf p_i.
$$
$\bu$ Corollary to Proposition 4.6:

\begin{rk}\label{fmme}
If $\mf a$ is decomposable, then the set of prime ideals containing $\mf a$ has only finitely many minimal elements.
\end{rk}

\section{Page 53, proof of Proposition 4.8.ii}%\label{prcor}%\label{contrpry}

Using the notation of Section~\ref{prcor} p.~\pageref{prcor} and taking Section~\ref{contrpry} p.~\pageref{contrpry} into account, we set 
$$
X':=\{\qqq\ |\ \qqq\text{ primary ideal of }A\},
$$ 
$$
Y':=\{\qqq\ |\ \qqq\text{ primary ideal of }S^{-1}A\}.
$$ 
We then have a contraction map $c:Y'\to X'$ compatible with radicals. We check that  
$$
c(Y')=\{\qqq\in X'\ |\ r(\qqq)\in c(Y)\}
$$ 
and that 
$$
\qqq\in c(Y')\implies S^{-1}\qqq\in X',
$$ 
and we see that 

\emph{the contraction and extension maps are inverse bijections compatible with radicals between $Y'$ and $c(Y')$.} 

\begin{comment}

We have 
$$
\mf q^{\text{ec}}=\bigcup_{s\in S}\ (\mf q:s)=\mf q
$$ 
by Proposition 3.11ii p.~41 and Lemma 4.4iii p.~51, and 
$$
r(\mf q^{\text e})=r(S^{-1}\mf q)=S^{-1}r(\mf q)=S^{-1}\mf p
$$ 
by Proposition 3.11v p.~42.

\end{comment}

\section{Page 54, decomposable ideals}\label{di}%

An ideal having only finitely many minimal primes is not necessarily decomposable.

The following is due to user26857 of Mathematics Stackexchange.\bigskip\bigskip

\hrule\bigskip

Taken from\\ https://math.stackexchange.com/a/207468/660:

In order to find an ideal which doesn't have a primary decomposition, the following construction is useful. Let $R$ be a commutative ring and $M$ an $R$-module. On the set $A=R\times M$ one defines the following two algebraic operations:
$$
(a,x)+(b,y)=(a+b,x+y)
$$
$$
(a,x)(b,y)=(ab,ay+bx).
$$
With these two operations $A$ becomes a commutative ring with $(1,0)$ as unit element. ($A$
is called the \emph{idealization} of the $R$-module $M$ or the \emph{trivial extension} of $R$ by $M$.)

Let's list some important properties of this ring:

1. $\{0\}\times M$ is an ideal of $A$ isomorphic to $M$ (as $R$-modules) and there is a ono-to-one correspondence between the ideals of $R$ and the ideals of $A$ containing $\{0\}\times M$, the ideal $\mf a\subset R$ corresponding to $\mf a\times M\subset A$.

2. $A$ is a Noetherian ring if and only if $R$ is Noetherian and $M$ is finitely generated.

3. All prime (maximal) ideals of $A$ have the form $\mf p\times M$, where $\mf p$ is a prime (maximal) ideal of $R$.

4. If $R$ is an integral domain and $M$ is divisible, then all the ideals of $A$ have the form $\mf a\times M$ with $\mf a$ ideal of $R$, or $\{0\}\times N$ with $N$ submodule of $M$.\bigskip\bigskip

\hrule\bigskip%

Taken from\\ https://math.stackexchange.com/a/1679116/660:\bigskip

\begin{rk}%\label{nice}
If $A$ is the idealization of the $\mathbb Z$-module $\mathbb Q$, then the primary ideals of $A$ are  

$\bullet\quad p^n\mathbb Z\times\mathbb Q$ with $p$ prime, $n\ge1$, 

$\bullet\quad\{0\}\times\mathbb Q$,

$\bullet\quad\{0\}\times\{0\}$. 

Moreover $\{0\}\times\mathbb Q$ is the only minimal prime of $\{0\}\times\mathbb Z$, and $\{0\}\times\mathbb Z$ has no primary decomposition (see Remark~\ref{fmme}).
\end{rk}\bigskip
%Then $\mf a:=\{0\}\times\mathbb Z$ has only one minimal prime $\{0\}\times\mathbb Q$ and $\mf a$ has no primary decomposition.\bigskip%https://math.stackexchange.com/a/1679116/660

\hrule\bigskip

\section{P. 55, Exercise 4.6}%

Claim: any prime ideal is contained in a \emph{unique} maximal ideal.

Proof: Using Urysohn's Lemma it is easy to see that, given distinct points $x$ and $y$ in $X$ and denoting by $\mmm_x$ and $\mmm_y$ the corresponding maximal ideals, there are $f,g\in C(X)$ such that $fg=0$, $f\in\mmm_x\setminus\mmm_y$, $g\in\mmm_y\setminus\mmm_x$. 

The claim implies that there are infinitely many minimal prime ideals.

%Using Urysohn's Lemma it is easy to see that any prime ideal is contained in a \emph{unique} maximal ideal. This implies that there are infinitely many minimal prime ideals.

\section{P. 55, Exercise 4.7}\label{5547}%

Part iii: Use Exercises 1.18 p.~10 and 1.2ii p.~11. Note that we have (by Exercise 1.2ii p.~11)
\begin{equation}\label{rax}
r(\aaa[x])=r(\aaa)[x]
\end{equation}
(obvious notation).
 
Part iv: We claim: %$(\aaa\cap\bbb)[x]=\aaa[x]\cap\bbb[x]$ (obvious notation).
\begin{equation}\label{acbx}
(\aaa\cap\bbb)[x]=\aaa[x]\cap\bbb[x]
\end{equation}
(obvious notation).

Proof: The diagram 
$$
\begin{tikzcd}
0\ar[r]&(\aaa\cap\bbb)[x]\ar[d]\ar[r]&(\aaa\oplus\bbb)[x]\ar[d]\ar[r]&(\aaa+\bbb)[x]\ar[d]\ar[r]&0\\ 
0\ar[r]&\aaa[x]\cap\bbb[x]\ar[r]&\aaa[x]\oplus\bbb[x]\ar[r]&\aaa[x]+\bbb[x]\ar[r]&0
\end{tikzcd}
$$ 
(where the arrows are the obvious ones) commutes, the rows are exact, the first vertical arrow is clearly an isomorphism, and the second vertical arrow is an isomorphism by Exercises 1.18 p.~10. Thus the first vertical arrow is also an isomorphism. But by its (implicit) definition this arrow is an inclusion. Being surjective, it is actually an equality. $\square$

Then Part iv follows from \eqref{acbx} and Part iii.

Part v: We clearly have 
\begin{equation}\label{asb}
\aaa\subset\bbb\iff\aaa[x]\subset\bbb[x]
\end{equation}
(obvious notation), and Part v follows from \eqref{asb}, Part iv and Proposition 4.6 p.~52 of the book.

\section{P. 55, Exercise 4.8}%

Use Section \ref{5547} and the following easy facts:

Let $A$ be a ring and $x$ an indeterminate.

If $\aaa$ and $\bbb$ are ideals of $A$, then $(\aaa+\bbb)[x]=\aaa[x]+\bbb[x]$ (Exercise 1.18 p.~10 of the book).

For $a$ in $A$ we have $(aA)[x]=a(A[x])$. (In fact for any overring $B$ of $A$ we have $(aA)^{\oo e}=aB$.) %Let $a$ be in $A$, write $(a)_A$ for the ideal of $A$ generated by $a$, and $(a)_{A[x]}$ for the ideal of $A[x]$ generated by $a$. Then we have $(a)_A[x]=(a)_{A[x]}$.

\section{P. 55, Exercise 4.9}%

Let $a,b\in A$ and $\ppp\in\oo{Spec}(A)$ be such that $a\in\ppp$ and $\ppp$ is minimal over $(0:b)$.

Claim 1: $a$ is zero-divisor.

Proof of Claim 1. Obviously $b\ne0$ and $a\notin(0:b)$. Let $s$ be in $A\setminus\ppp$ and $n$ be in $\mathbb N$. 

Claim 2: $a^ns\notin(0:b)$.

Proof of Claim 2. Assume by contradiction that $a^ns\in(0:b)$. We can suppose that $n$ is minimum for this condition. In particular $n\ge2$. We have $a(a^{n-1}sb)=a^nsb=0$. As $a$ is not a zero-divisor, this implies $a^{n-1}sb=0$, that is $a^{n-1}s\in(0:b)$, in contradicition with the minimality of $n$. This ends the proof of Claim~2.  $\square$

Set $T:=\{\ a^ns|\ n\in\mathbb N,s\in A\setminus\ppp\}$. Claim~2 implies that $T$ is disjoint from $(0:b)$. Then there is a prime ideal $\qqq$ which contains $(0:b)$ and is disjoint from $T$, and we have $A\setminus\ppp\subset T\subset A\setminus\qqq$, that is $(0:b)\subset\qqq\subset\ppp$. By minimality of $\ppp$ over $(0:b)$ this forces $\qqq=\ppp$, and thus $a\in\ppp\cap T=\qqq\cap T=\varnothing$, a contradiction. This completes the proof of Claim~1. $\square$ 

Proof of the inclusion $D(S^{-1}A)\subset D(A)\cap\Sp(S^{-1}A)$: 

Let $\ppp$ be a prime ideal of $A$ disjoint from $S$. It suffices to show $\ppp\in D(A)$. Note that $S^{-1}\ppp$ is minimal over $(0:\frac as)$ for some $a\in A$ and some $s\in S$ such that $\frac as$ is a zero-divisor. It suffices to show that $a$ is a zero-divisor and that $\ppp$ is minimal over $(0:a)$. It is easy to prove that $a$ is a zero-divisor. It remains to verify that $\ppp$ is minimal over $(0:a)$.

Claim 1: $(0:a)\subset\ppp$.

Proof of Claim 1. Let $b\in A$ satisfy $ab=0$. It is enough to check $b\in\ppp$. We have $\frac as\frac b1=0$, hence $\frac b1\in(0:\frac as)\subset S^{-1}\ppp$, and thus $b\in\ppp$. $\square$

Assume by contradiction that there is a prime ideal $\qqq$ such that $(0:a)\subset\qqq<\ppp$. 

Claim 2: $(0:\frac as)\subset S^{-1}\qqq$.

Proof of Claim 2. Assuming $\frac bt\frac as=0$ (obvious notation), we get $abu$ for some $u\in S$, hence $bu\in\qqq$, hence $b\in\qqq$, and thus $\frac bt\in S^{-1}\qqq$. $\square$ 

We get $(0:\frac as)\subset S^{-1}\qqq<S^{-1}\ppp$, contradicting the minimality of $\ppp$ over $(0:a)$. $\square$

Let $(0)=\qqq_1\cap\cdots\cap\qqq_n$ be a reduced decomposition and set $\ppp_i:=r(\qqq_i)$. We have 
$$
D(A)\subset\{\ppp_1,\dots,\ppp_n\}.
$$ 
Proof. Let $\ppp$ be in $D(A)$. Then $\ppp$ is minimal over $(0:a)$ for some $a\in A$. By \eqref{45} p.~\pageref{45} we have 
$$
r(0:a)=\bigcap_{\qqq_i\ni a}\ppp_i\subset\ppp.
$$ 
In particular $a\in\qqq_i$ for some $i$, and we get 
$$
\ppp\supset\prod_{\qqq_i\ni a}\ppp_i,
$$ 
hence $\ppp\supset\ppp_i$ for some $i$, and thus $\ppp=\ppp_i$ for some $i$. $\square$

\section{P. 55, Exercise 4.10}%

Note that $S_\ppp(0)=(0)^{\oo c}$, where the contraction is taken with respect to $A\to A_\ppp$. Note also that we have $r((0)^{\oo c})=r(0)^{\oo c}$.

(ii) We must show that $\ppp$ is minimal if and only if $r(0)^{\oo c}=\ppp$. 

If $\ppp$ is minimal we have $r(0)=\ppp_\ppp$ and thus $r(0)^{\oo c}=\ppp$. 

If $\ppp$ is \emph{not} minimal, there is a prime ideal $\qqq$ such that $\qqq<\ppp$, and we get $r(0)\subset\qqq_\ppp<\ppp_\ppp$, hence $r(0)^{\oo c}\subset\qqq_\ppp<\ppp_\ppp$ and thus $r(0)^{\oo c}\ne\ppp$.

\section{Page 61, Corollary 5.9}\label{59}%

Here is a slightly stronger statement: 

\emph{Let $A$ be a subring of a ring $B$ such that $B$ is integral over $A$; let $\mf q,\mf b$ be ideals of $B$ such that $\mf q$ is prime, $\mf q\subset\mf b$ and $\mf q^{\oo c}=\mf b^{\oo c}=\mf p$ say. Then $\mf q=\mf b$.}

Proof. Arguing as in the book, we see that $\mf p_{\mf p}\subset A_{\mf p}$ and $\mf q_{\mf p}\subset B_{\mf p}$ are maximal, and that we have $\mf q_{\mf p}\subset\mf b_{\mf p}\subset B_{\mf p}$. Proposition 3.11ii p.~41 of the book implies $\mf b_{\mf p}\ne B_{\mf p}$, and thus $\mf q_{\mf p}=\mf b_{\mf p}$. If $b$ is in $\mf b$, we get $b/1=q/s$ for some $q$ in $\mf q$ and some $s$ in $A\setminus\mf p$, then $tb\in\mf q$ for some $t$ in $A\setminus\mf p$, and thus $b\in\mf q$.

\section{Page 62, proof of Corollary 5.9}%

Let $A\subset B$ be rings, let $\mf q$ be a prime ideal of $B$ and set $\mf p:=A\cap\mf q$:
$$
\begin{tikzcd}
A\ar[d,"\alpha"']\ar[r,hook]&B\ar[d,"\beta"]\\ 
A_{\mf p}\ar[r,hook]&B_{\mf p}.
\end{tikzcd}
$$
Then Corollary 3.4ii p.~39 of the book implies $A_{\mf p}\cap\mf q_{\mf p}=\mf p_{\mf p}$.
%We claim $A_{\mf p}\cap\mf q_{\mf p}=\mf p_{\mf p}$. Set $S:=A\setminus\mf p$. As $S\cap\mf q=S\cap A\cap\mf q=S\cap\mf p=\varnothing$, we see that $\mf q_{\mf p}$ is prime, and it suffices to show $\mf p_{\mf p}\subset\mf q_{\mf p}$, which is clear.

\section{Page 62, Theorem 5.10}%

Let $\mf b$ be an ideal of $B$, let $\mf a$ be its contraction in $A$, and assume $\mf a\subset\mf p$. Then it is easy to see that $\mf q$ can be chosen among the prime ideals of $B$ containing $\mf b$.

\section{Page 62, dim A = dim B}%

\emph{If $A\subset B$ is an integral extension, then we have $\dim A=\dim B$.}

More precisely, we have $\dim A\ge\dim B$ by Corollary 5.9 p.~61 and $\dim A$ $\le$ $\dim B$ by Theorem 5.11 p.~62.

\section{Page 62, integrally closed domain}%

Here is an example of a domain which is \emph{not} integrally closed. Let $k$ be a field, let $X$ be an indeterminate and set $A:=k[X^2,X^3]\subset k[X]$. Then $X$ is in the field of fractions of $A$, and is integral over $A$, but is not in $A$.

\section{Page 63}%

If $A\subset D$ are domains, and if $\mf a$ is an ideal of $A$, then we denote the extension of $\mf a$ in $D$ by $D\,\mf a$, and the integral closure of $\mf a$ in $D$ by $D*\mf a$. 

Lemma 5.14 says
\begin{equation}\label{514}
D*\mf a=r\Big((D*A)\,\mf a\Big).
\end{equation}
In particular $D*\mf a$ is an ideal of $D*A$. 

In the proof of Proposition 5.15, we have the inclusions $\mf a\subset A\subset L$. Let 
$$
X^m+a_1X^{m-1}+\cdots+a_m
$$ 
be the minimal polynomial of $x$ over $K$. Each $a_j$ being in the ideal $(x_1,\dots,x_n)$ of $L*A$ generated by the $x_i$, and each $x_i$ being in the set $L*\mf a$, which is an ideal of $L*A$ by \eqref{514}, we get 
$$
a_j\in(L*\mf a)\cap K=K*\mf a=r\Big((K*A)\,\mf a\Big)=r(A\,\mf a)=r(\mf a)
$$ 
for all $j$ (the second equality following from \eqref{514}).

\section{Page 64, proof of Theorem 5.16}%

Last line of the first paragraph of the proof: It suffices to show $B_{\mf q_1}\mf p_2\cap A\subset\mf p_2$.

\section{Page 65}%

Sentence

The conditions of Zorn's lemma are clearly satisfied and therefore the set $\Sigma$ has at least one maximal element.

I would change this to 

Assuming the set $\Sigma$ is nonempty, the conditions of Zorn's lemma are clearly satisfied and therefore $\Sigma$ has at least one maximal element.

\section{Page 66, proof of Corollary 5.22}%

Sentences

Then the restriction to $A$ of the natural homomorphism $A'\to k'$ defines a homomorphism of $A$ into $\Omega$. By (5.21) this can be extended to some valuation ring $B\supseteq A$.

I would change this to 

Then the restriction to $A$ of the natural homomorphism $A'\to k'$ defines a homomorphism of $A'$ into $\Omega$. By (5.21) this can be extended to some valuation ring $B\supseteq A'$.

Also, it would be slightly better to change ``let $x\notin\overline A$'' to ``let $x\in K\setminus\overline A$'' on the third line of the proof.%\bigskip

\section{Page 67, Exercise 5.2}\label{67}%

Set $\mf p:=\oo{Ker}f$ and let $\mf q\subset B$ be given by Theorem 5.10 p.~62. Our problem can be summarized as follows: 
$$
\begin{tikzcd}
A/\mf p\ar[r,hook]\ar[d,hook]&B/\mf q\ar[dl,dashrightarrow,hook]\\ 
\Omega.
\end{tikzcd}
$$ 
Writing $K$ and $L$ for the respective fields of fractions of $A/\mf p$ and $B/\mf q$, Our problem becomes  
$$
\begin{tikzcd}
K\ar[r,hook]\ar[d,hook]&L\ar[dl,dashrightarrow,hook]\\ 
\Omega.
\end{tikzcd}
$$ 
As $L/K$ is algebraic and $\Omega$ algebraically closed, this problem has a solution.

\section{Page 69, Exercise 5.16, NNT}\label{nnt}%

NNT stands for Noether Normalization Theorem.

The purpose of this section is to review the following closely related statements: Noether's Normalization Theorem, Zariski's Lemma, the Weak Nullstellensatz and the Nullstellensatz.

\textbf{\Large Noether Normalization Theorem}

Before proceeding, it might be useful to spell out a fact which is proved but, it seems to me, not stated explicitly in the book:

$(\star)$ \emph{Let $A\subset B$ be rings such that $B$ is finitely generated as an $A$-algebra. Then $B$ is finitely generated as an $A$-module if and only if it is integral over $A$.}

Recall the general notation $A_s:=A[s^{-1}]$.%

\textbf{Noether Normalization Theorem.} \emph{Let $A\subset B$ be an inclusion of nonzero rings such that $B$ a finitely generated $A$-algebra. Then there exist a nonzero element $s$ in $A$, a nonnegative integer $n$, and elements $x_1,\dots,x_n$ in $B_s$ which are algebraically independent over $A_s$, such that $B_s$ is a finitely generated module over} 
$$
A_s[x_1,\dots,x_n].
$$ 
\begin{proof} 
Let $y_1,\dots,y_m\in B$. Assume that $B=A[\,y_1,\dots,y_m]$. We argue by induction on $m$. If $m=0$ or if the $y_i$ are algebraically independent over $A$, there is nothing to prove, so that we can assume that $m\ge1$, that the statement holds with $m$ replaced by $m-1$, and that there is a non-constant polynomial $f\in A[Y_1,\dots,Y_m]$, where the $Y_i$ are indeterminates, such that $f(\,y_1,\dots,y_m)=0$. Let $r$ be an integer larger than the degree of $f$. 

We claim that there is a nonzero $t$ in $A$ such that $B_t$ is finitely generated as a module over 
$$
C:=A_t\left[\,y_2-y_1^r,\dots,y_m-y_1^{r^{m-1}}\right].
$$ 
It suffices to show that $B_t$ is integral over $C$. As $B_t=C[\,y_1]$, it is enough to prove that $y_1$ is integral over $C$. In fact, we only need to check that 

$(\star)$ There is a nonzero $t$ in $A$, an integer $d\ge1$, and a 
$$
g\in\bigg(A\left[Y_2-Y_1^r,\dots,Y_m-Y_1^{r^{m-1}}\right]\bigg)[Y_1]
$$ 
of degree less than $d$, such that $f=tY_1^d+g$. 

If, for any monomial $u\in A[Y_1,\dots,Y_m]$ occurring in $f$ (with a nonzero coefficient), we denote by $u'$ the monomial $u$ \emph{viewed as a polynomial in the ring} 
$$
\bigg(A\left[Y_2-Y_1^r,\dots,Y_n-Y_1^{r^{m-1}}\right]\bigg)[Y_1],
$$ 
then $(\star)$ follows immediately from 

$(\star\star)$ The polynomial $u'$ is monic. Moreover, if $u$ and $v$ are two distinct such monomials, then we have $\deg(u')\ne\deg(v')$.

In fact, if $u=Y_1^{\alpha_1}\cdots X_n^{\alpha_m}$, then $u'$ is monic of degree 
$$
\alpha_1+\alpha_2r+\cdots+\alpha_mr^{m-1}.
$$ 
So, we have proved that there exist a nonzero $t$ in $A$ and elements $z_1$, \dots, $z_{m-1}$ in $B$ such that $B_t$ is a finitely generated $A_t[z_1,\dots,z_{m-1}]$-module. 

We can assume that $A_t$ is nonzero. By the inductive hypothesis applied to the inclusion 
$$
A_t\subset A_t[z_1,\dots,z_{m-1}],
$$ 
there exist a nonzero element $u$ in $A_t$, a nonnegative integer $n$, and elements $x_1$, \dots, $x_n$ in 
$$
A_t[z_1,\dots,z_{m-1}]_u=(A_t)_u[z_1,\dots,z_{m-1}]
$$ 
which are algebraically independent over $(A_t)_u$, such that 
$$
(A_t)_u[z_1,\dots,z_{m-1}]
$$ 
is a finitely generated $(A_t)_u[x_1,\dots,x_n]$-module. Now $u=v/t^i$ for some nonzero $v$ in $A$ and some integer $i\ge0$, and we have $(A_t)_u=A_{tv}$. Setting $s:=tv$, we see that $s\ne0$, and we get elements $x_1$, \dots, $x_n$ in 
$
A_s[z_1,\dots,z_{m-1}]
$ 
which are algebraically independent over $A_s$, such that 
$
A_s[z_1,\dots,z_{m-1}]
$ 
is a finitely generated $A_s[x_1,\dots,x_n]$-module. Recall that $B_t$ is a finitely generated $A_t[z_1,\dots,z_{m-1}]$-module. Therefore $B_s$ is a finitely generated $A_s[z_1,\dots,z_{m-1}]$-module, which is itself, as we have just seen, a finitely generated $A_s[x_1,\dots,x_n]$-module. This implies that $B_s$ is a finitely generated $A_s[x_1,\dots,x_n]$-module,  as desired.
\end{proof} 
% https://docs.google.com/document/d/1oTZtahmZAPeNJrbs65b2IzgWHBKkWBjzasbWtsHpWDA/edit old versions
%[Added later: An approach which I find better is expounded in Mel Hochster, Noether normalization and Hilbert’s Nullstellensatz, \href{http://www.math.lsa.umich.edu/~hochster/615W10/supNoeth.pdf}{http://www.math.lsa.umich.edu/$\sim$hochster/615W10/supNoeth.pdf}\ ]

Here is a statement of Zariski's Lemma:

(ZL)\emph{Let $k$ be a field, $A$ a finitely generated $k$-algebra. Let $\mf m$ be a maximal ideal of $A$. Then the field $A/\mf m$ is a finite algebraic extension of $k$. In particular, if $k$ is algebraically closed then $A/\mf m\simeq k$, that is, the natural morphism $k\to A/\mf m$ is an isomorphism.}

In view of Proposition 5.7 p.~61 of the book, Zariski's Lemma follows immediately from Noether's Normalization Theorem. %In view of Proposition 5.7 p.~61 of the book, Zariski's \- Lemma follows immediately from Noether's Normalization Theorem.

Here is an easy consequence of (ZL):

(ZL2) \emph{Set $A:=k[t_1,\dots,t_n]$ where $k$ is an algebraically closed field and the $t_i$ are indeterminates, let $\mf m$ be a maximal ideal of $A$, let} 
$$
k\xrightarrow\iota A\xrightarrow{\pi}A/\mf m
$$ 
\emph{be the canonical morphisms, and set $x_i:=(\pi\circ\iota)^{-1}(\pi(t_i))$ (recall that $\pi\circ\iota$ is bijective). Then we have} 
$$
\mf m=(t_1-x_1,\dots,t_n-x_n)
$$ 
\emph{and} 
$$
(\pi\circ\iota)^{-1}(\pi(f))=f(x)
$$ 
\emph{(with $x:=(x_1,\dots,x_n)$) for all $f$ in $A$. In particular} 
$$
\mf m=\{f\in A\ |\ f(x)=0\}.
$$

The detailed proof of (ZL2) is left to the reader.

The Nullstellensatz is stated in Exercise 14 of Chapter 7 as follows:

(N) \emph{Let $k$ be an algebraically closed field, let $A$ denote the polynomial ring $k[t_1,\dots,t_n]$ and let $\mf a$ be an ideal in $A$. Let V be the variety in $k^n$ defined by the ideal $\mf a$, so that $V$ is the set of all $x=(x_1,\dots,x_n)\in k^n$ such that $f(x)=0$ for all $f\in\mf a$. Let $I(V)$ be the ideal of $V$, i.e. the ideal of all polynomials $g\in A$ such that $g(x)=0$ for all $x\in V$. Then $I(V)=r(\mf a)$.}

\begin{proof} 
The inclusion $r(\mf a)\subset I(V)$ is clear. Let's prove $I(V)\subset r(\mf a)$. 

(ZL2) implies that $I(V)$ is the intersection of all the maximal ideals of $A$ containing $\mf a$. As $r(\mf a)$ is the intersection of all the prime ideals of $A$ containing $\mf a$, we can assume that $\mf a$ is a prime ideal $\mf p$. Then the statement follows immediately from Exercises 5.23 and 5.24 p.~71 of the book. Here is a slightly different argument:

Let $f$ be in $A\setminus\mf p$ and set $A_f:=A[1/f]$.

It suffices to prove the claim below.

Claim: There is a maximal ideal of $A$ which doesn't contain $f$. 

We give two proofs of the claim.

Proof 1. The extension $\mf p^{\oo e}$ of $\mf p$ in $A_f$ being clearly a proper ideal, there is a maximal ideal $\mf m\subset A_f$ containing $\mf p^{\oo e}$. 

Note successively that $f\notin\mf m$; that $\mf q:=\mf m\cap A$ is a prime ideal of $A$ which doesn't contain $f$; that $A_f/\mf m$ is isomorphic to $k$ by (ZL); and that the monomorphism of $k$-algebras $0\ne A/\mf q\mono A_f/\mf m\simeq k$ implies that $\mf q$ is a maximal ideal of $A$.

Proof 2. By Noether Normalization Theorem applied to the $k$-algebra $A_f$, there are elements $u_1,\dots,u_m$ of $A_f$ which are algebraically independent over $k$, such that $A_f$ is integral over $k[u_1,\dots,u_m]$. By Exercise 5.2 %Theorem 5.10 
p.~67 of the book (see Section~\ref{67} p.~\pageref{67} above) the $k$-algebra morphism $\varphi:k[u_1,\dots,u_m]\to k$ which maps $u_i$ to $0$ extends to a $k$-algebra morphism $\Phi:A_f\to k$. As $\Phi(f)\ne0$, we see that $A\cap\oo{Ker}\Phi$ is a maximal ideal of $A$ which doesn't contain $f$.
\end{proof}
%https://docs.google.com/document/d/1YYUDEGhoImy-b_Lx9foGoetelzzXbN1IiNbpo7pXh98/edit {comment} 180522
%The assumption that $B$ is a domain (instead of an arbitrary ring) is not used. For another approach, see the following reference (already given in Section~\ref{nnt} p.~\pageref{nnt}): Mel Hochster, Noether normalization and Hilbert’s Nullstellensatz, \href{http://www.math.lsa.umich.edu/~hochster/615W10/supNoeth.pdf}{http://www.math.lsa.umich.edu/$\sim$hochster/615W10/supNoeth.pdf}

\section{Page 69, Exercise 5.17}%

%As observed by the Mathematics Stackexchange user Kato here \href{https://math.stackexchange.com/q/2808775/660}{https://math.stackexchange.com/q/2808775/660} t
The Weak Nullstellensatz is the statement
$$
\mf a\ne(1)\implies V(\mf a)\ne\varnothing.
$$ 
It is \emph{not} the trivial statement 
$$
I(X)\ne(1)\implies X\ne\varnothing.
$$

\section{Page 70, Exercise 5.22}% 

We have $k\subset g(B)\subset\Omega$. By Proposition 5.7 p.~71 of the book, $g(B)$ is a field.

\section{Page 71, Exercise 5.24}%

Here is a partial solution. Let's prove 

\emph{If $A\subset B$ is an integral extension of rings and if $A$ is Jacobson, then $B$ is Jacobson.}

Proof. By Theorem 5.10 p.~62 of the book we can assume that $B$ is a domain. Let $\mf b\subset B$ be the Jacobson radical of $B$. It suffices to prove $\mf b=(0)$.

Claim: $\mf b^{\oo c}=(0)$. 

Proof of the claim. By contradiction let $0\ne a\in\mf b^{\oo c}$, and let $\mf m$ be a maximal ideal of $A$ avoiding $a$. By Theorem 5.10 p.~62 of the book, there is a prime ideal $\mf n$ of $B$ such sitting above $\mf m$. Then $\mf n$ is maximal by Corollary 5.8 p.~61 of the book, and $a\in\mf n\cap A=\mf m$, a contradiction.

In view of the version of Corollary 5.9 p.~61 of the book proved in Section~\ref{59} p.~\pageref{59}, the claim implies $\mf b=(0)$.

\section{Page 81, proof of Hilbert Basis Theorem}%

Here is a (well known) shorter proof:

Assume by contradiction some ideal %$I$ 
of $A[X]$ is \textbf{not} finitely generated, and let $f_1,f_2,\dots$ be a sequence in $A[X]$ such that the sequence $(f_1,\dots,f_i)$ of ideals of $A[X]$ increases, and $\deg f_i$ is minimum for this condition. Let $a_i$ be the leading coefficient of $f_i$; let $n$ be such that $(a_1,\dots,a_n)$ is the ideal of $A$ generated by the $a_i$; let $b_1,\dots,b_n\in A$ satisfy 
$$
a_{n+1}=a_1\,b_1+\cdots+a_n\,b_n;
$$ 
set $d(i):=\deg f_{n+1}-\deg f_i$, 
$$
g:=\sum_{i=1}^n\,X^{d(i)}\,b_i\,f_i;
$$ 
and observe that $\deg(f_{n+1}-g)$ is less than $\deg f_{n+1}$, which is impossible.

\section{Page 83, proof of Lemma 7.12}%

The equalities $xy=0$ and $\oo{Ann}(x^n)=\oo{Ann}(x^{n+1})$ imply $(x^n)\cap(\,y)=(0)$. Indeed, if $a$ is in $(x^n)\cap(\,y)$ we have $a=bx^n=cy$ for some $b$ and $c$ in $A$, and thus $bx^{n+1}=cyx=0$. Now $bx^{n+1}=0$ implies $bx^n=0$, that is $a=0$. 

%https://docs.google.com/document/d/1YYUDEGhoImy-b_Lx9foGoetelzzXbN1IiNbpo7pXh98/edit {comment} 180522

%\section{P. 89, Proposition 8.1}%\label{dt}%

Here is a related result:

\emph{The following conditions on a ring $A$ are equivalent:}

(a) \emph{the Krull dimension of $A$ is at most zero,}

(b) \emph{$A/\mf n$ is absolutely flat, where $\mf n$ is the nilradical of $A$,}

(c) \emph{for each $a$ in $A$ the descending chain $(a)\supset(a^2)\supset\cdots$ stabilizes.}

\emph{Proof.} (a)$\implies$(b): We can assume $\mf n=(0)$. Let $a$ be in $A$. It suffices to show $(a)=(a^2)$. Let $\mf p$ be a prime ideal of $A$. Then the nilradical of $A_{\mf p}$ is $(0)$ and $\mf p_{\mf p}$ is the only prime ideal of $A_{\mf p}$. This implies that $A_{\mf p}$ is a field, and we get successively the equalities 
$$
(a)_{\mf p}=(a^2)_{\mf p},\quad(a)_{\mf p}/(a^2)_{\mf p}=(0),\quad((a)/(a^2))_{\mf p}=(0).
$$ 
As $\mf p$ is an arbitrary prime ideal of $A$, this forces $(a)=(a^2)$.

(b)$\implies$(c): With obvious notation we have $\bar a=\bar a^2\bar b$ for some $b$ in $A$, that is $(a-a^2b)^n=0$ for some $n\ge1$. This is easily seen to imply $a^{n+1}\in(a^n)$ and thus $(a^{n+1})=(a^n)$. 

(c)$\implies$(a): Let $\mf p$ be a prime ideal of $A$ and let $a$ be in $A\setminus\mf p$. We have $a^n(1-ab)=0$ for some $b$ in $A$ and some $n$ in $\mathbb N$. In particular $a^n(1-ab)\in\mf p$, and thus $1-ab\in\mf p$. This implies that $A/\mf p$ is a field, and therefore that $\mf p$ is maximal. $\square$

\section{Page 90}\label{90}%

$\bu$ About Proposition 8.6. I suggest the following restatement of Proposition 8.6:

\emph{Let $A$ be a Noetherian local ring, $\mf m$ its maximal ideal. Then exactly one of the following two statements is true:}

(i) $\mf m^n\ne\mf m^{n+1}$ \emph{for all $n$ and $A$ is \emph{not} Artin};

(ii) $\mf m^n=0$ \emph{for some $n$, in which case $A$ is an Artin local ring.}

In particular 
\begin{equation}\label{86}
A\text{ is Artin $\iff\mf m$ is nilpotent.}
\end{equation}%Indeed, if $A$ is Artin, then, as observed before Proposition 8.6, $\mf m$ is the nilradical of $A$, and Proposition 8.5 p.~89 implies that $\mf m$ is nilpotent. 

$\bu$ By Proposition 8.6 and Proposition 4.2 p.~51, we have:

\emph{Every proper ideal of an Artin local ring is $\mf m$-primary (where $\mf m$ is the maximal ideal).} 

This fact is implicitly used in the proof of Theorem 8.7.

$\bu$ It seems to me that the second part of the proof of Theorem 8.7 can be simplified. We must check the essential uniqueness of the decomposition of an Artin ring $A$ as a finite product of Artin local rings $A_i$. But, looking at minimal idempotents, one sees that, if a ring can be decomposed as a product of finitely many local rings, such a decomposition is essentially unique. More precisely, the kernels of the morphisms from the ring to the various factors are exactly those ideals which are maximal among the proper ideals generated by an idempotent. %To do this it suffices to observe that the kernels of the canonical projections $A\to A_i$ are precisely the minimal primary ideals of $A$.%%, for each minimal primary ideal $\mathfrak q$ of $A$, there is a unique $i$ such that $\mathfrak q$ is the kernel of the canonical projection onto $A_i$.

\section{Page 91, Proposition 8.8}\label{88}%

Let $A$ be an Artin local ring with maximal ideal $\mf m$ and consider the condition

$(*)$ there is an $x$ in $\mf m$ such that every ideal of $A$ is of the form $(x^r)$. 

The proof of Proposition 8.8 shows that $(*)$ is equivalent to any of the conditions (i), (ii) or (iii).

\section{Page 94, Proposition 9.2}\label{92}%

In the setting of Proposition 9.2, the condition

(v') every non-zero ideal can be written in a unique way as a power of $\mf m$

 is equivalent to any of the conditions (i) to (vi). The same holds for

(vi') there exists $x\in A$ such that every non-zero ideal can be written in a unique way as $(x^n)$.

This follows from Statement (B) in the proof of Proposition 9.2.

\section{Page 95}%

$\bu$ Proof of the implication (iv) $\implies$ (v) in Proposition 9.2 p.~94. It is written: ``from (8.8) (applied to $A/\mf m^n$) it follows that $\mf a$ is a power of $\mf m$''. The fact that $A/\mf m^n$ is Artin follows from Proposition 8.6 p.~90 of the book (see Section~\ref{90} p.~\pageref{90} above). %Actually it is better to use the version of (8.8) given in Section~\ref{88} above.

$\bu$ The proof of the equivalence (ii) $\iff$ (iii) in Theorem 9.3 uses Statement (B) in the proof of Proposition 9.2 p.~94.

$\bu$ Corollary 9.4. See Section~\ref{92} above.

$\bu$ The domain $\mathbb Z[-5]$ is Dedekind but doesn't have unique factorization. %The fact that $\mathbb Z[-5]$ is Dedekind follows from Theorem 5.15 p.~63 and Theorem 9.5 p.~96.???
The fact that $\mathbb Z[-5]$ doesn't have unique factorization follows from the fact that $2\cdot3$ and $$\left(1+\sqrt5\right)\left(1-\sqrt5\right)$$ are irreducible factorizations of $6$.%Indeed, it is easy to check that $2\cdot3$ and $$\left(1+\sqrt5\right)\left(1-\sqrt5\right)$$ are irreducible factorizations of $6$.

\section{Page 97, proof of Theorem 9.8}%

The last sentence of the proof of Theorem 9.8 is ``Then $\mf a$ is invertible, hence $\mf b=\mf a_{\mf p}$ is invertible by (9.7)''. I think the authors meant (9.6). Here are more details: We have $\mf b=\mf a_{\mf p}$ by Proposition 3.11i p.~41 and Proposition 1.17.iii p.~10 (see the proof of Proposition 7. p.~80). Moreover $\mf a_{\mf p}$ is invertible by Proposition 9.6 ((i) $\implies$ (ii)).

\section{Page 102, Completions 1}%

In the first paragraph after the proof of Lemma 10.1, it is written ``Two Cauchy sequences are equivalent if $x_\nu-y_\nu\to0$ in $G$''. Note that a sequence may have several limits.%The correct condition is ``the image of $x_\nu-y_\nu$ in $G/H$ tends to $0$, where $H$ is the intersection of all neighborhoods of $0$ in $G$''.

In the penultimate paragraph of p.~102 it is claimed that $\widehat f:\widehat G\to\widehat H$ is continuous, but no topologies have been defined on $\widehat G$ and $\widehat H$. It is simpler to fix this problem in the setting considered in the last paragraph of p.~102. We shall use Corollary 10.4 p.~105. Note that, in this corollary, $\widehat G_n$ really means $(G_n)^\wedge$, which can, and will, be viewed as a subgroup of $\widehat G$. 

Then these subgroups do define a topology on $\widehat G$, and the canonical morphism $c:G\to\widehat G$ is continuous and its image is dense. 

Moreover $\widehat f:\widehat G\to\widehat H$ is continuous if $f:G\to H$ is. (Here we assume that the topology of $G$ and $H$ are such that $0$ has a countable fundamental system of neighborhoods.)

%Finally, for each continuous morphism $f:G\to H$, where $H$ is complete, there is a unique continuous morphism $g:\widehat G\to H$ such that $g\circ c=f$.

\section{Page 103, Completions 2}%

The penultimate display is 
$$
\widehat G\simeq\varprojlim G/G_n.
$$ 
More precisely, let $\pi_i:G\to G/G_i$ be the canonical projection; let $C\subset G^{\mathbb N}$ be the group of Cauchy sequences (this is indeed easily seen to be a subgroup of $G^{\mathbb N}$); and note that $x\in G^{\mathbb N}$ is Cauchy if and only if for each $i$ the sequence $j\mapsto\pi_i(x_j)$ is eventually constant, in which case we write $\pi_i(x_\infty)$ for its eventual value. Then there is a unique group morphism 
$$
\varphi:C\to\varprojlim G/G_i
$$ 
such that $\varphi(x)_i=\pi_i(x_\infty)$ for all $x$ in $C$ and all $i$ in $\mathbb N$, this morphism is an epimorphism, and it induces an isomorphism 
$$
\widehat G\xrightarrow\sim\varprojlim G/G_i.
$$ %The proof is left to the reader.%We sketch the proof of the surjectivity of $\varphi$ and leave the rest of the proof to the reader. \dots Let $\xi$ be in $\widehat G$. 

\section{Page 105}%

Even if it is very easy, we give additional details about the proofs of Corollary 10.4 and Proposition 10.5. 

%In Corollary 10.3 we set $G':=G_{n_0}$. We get the exact sequence 
Setting $G':=G_{n_0}$ in Corollary 10.3 yields the exact sequence
$$
0\to\widehat{G_{n_0}}\to\widehat G\to(G/G_{n_0})\ \widehat{}\to0.
$$ 
Recall that $p:G\to G/G_{n_0}$ is the natural morphism. For $n\ge n_0$ we have $pG_n=0$. This implies $(G/G_{n_0})\ \widehat{}\simeq G/G_{n_0}$ (canonical isomorphism), and thus 
$$
\widehat G/\widehat{G_{n_0}}\simeq G/G_{n_0},
$$ 
that is, $\widehat G/\widehat{G_n}\simeq G/G_n$ for all $n$. This entails $\widehat{\widehat G\,}\simeq\widehat G$.

\section{Page 109, Proposition 10.15}%

Proposition 10.15 (iii) says 
\begin{equation}\label{1015a}
\mf a^n/\mf a^{n+1}\simeq\hat{\mf a}^n/\hat{\mf a}^{n+1}.
\end{equation}
Moreover \eqref{1015a} is derived from 
\begin{equation}\label{1015b}
A/\mf a^n\simeq\hat A^n/\hat{\mf a}^n,
\end{equation} 
but in the sequel \eqref{1015b} is needed at various places, and it is justified by stating that it follows from \eqref{1015a}. For instance in the proof of Proposition 10.16 it is written

``By (10.15) iii) we have $\hat A/\hat{\mf m}\simeq A/\mf m$''.

In fact, I think it's better to prove $\hat{\mf a}^n/\hat{\mf a}^{n+k}\simeq\mf a^n/\mf a^{n+k}$ directly by noting that we have 
$$
\hat{\mf a}^n/\hat{\mf a}^{n+k}\simeq(\mf a^n)^\wedge/(\mf a^{n+k})^\wedge\simeq(\mf a^n/\mf a^{n+k})^\wedge\simeq\mf a^n/\mf a^{n+k},
$$ 
the first isomorphism following from Proposition 10.15 (ii), the second from Corollary 10.3 p.~104, and the third being obvious.

Note that (i), (ii) and the proof of (ii) imply  
$$
(\mf a^n)^\wedge=\hat A\,\mf a^n=(\hat A\,\mf a)^n=\hat{\mf a}^n\simeq\hat A\otimes_A\mf a^n.
$$ 
In particular, the equality $(\mf a^n)^\wedge=\hat A\,\mf a^n$ shows that 
$$
\boxed{\text{the $\mf a$-topology and the $\hat{\mf a}$-topology of $\hat A$ coincide.}} 
$$
The $\mf a$-topology is finer than the $\hat{\mf a}$-topology even if $A$ is not noetherian.

\section{Page 111, Corollaries 10.20 and 10.21}%

About the proof of Corollary 10.20: The fact that ``an $\mf m$-primary ideal of $A$ is just any ideal contained between $\mf m$ and some power $\mf m^n$'' has already been stated as Corollary 7.16 p.~83.

About Corollary 10.21: Let $a$ be in $A$. We must show: 

$a\in\mf q$ for all $\mf p$-primary ideal $\mf q$ $\iff$ there is an $s$ in $A\setminus\mf p$ such that $as=0$. 

\begin{proof} 
If $s$ in $A\setminus\mf p$ satifies $as=0$, and if $\mf q$ is a $\mf p$-primary ideal, then $a$ is in $\mf q$.

If $as\neq0$ for all $s\in A\setminus\mf p$, then $\frac a1\neq0$, and Corollary 10.20 implies that there is a $\mf p$-primary ideal $\mf q$ such that $\frac a1\notin\mf q_{\mf p}$, and thus $a\notin\mf q$. 
\end{proof}

\section{Page 118, proof of Proposition 11.4}%\label{odnd}

$\bu$ The ring $A/\mf q$ is Artin by \eqref{86} p.~\pageref{86}.

$\bu$ The fact below is used on line 5 of the proof of Proposition 11.4:

\emph{A noetherian module over an Artin ring has finite length.}

This follows from Propositions 6.2 p.~75 and 6.8 p.~77.

\section{Page 119, old d new d}\label{odnd}%

On p. 119 it is claimed that the new $d$ evaluated on $A$ coincides with the old $d$ evaluated on $G_{\mf m}(A)$, the asserted equality being written $d(A)=d(G_{\mf m}(A))$. 

We denote the old $d$ by $d_o$ and the new $d$ by $d_\nu$, so that the equality to check becomes 
\begin{equation}\label{dd}
d_o(A)=d_\nu(G_{\mf m}(A)).
\end{equation}

Note that $d_o(A)$ is defined when $A$ is a noetherian graded ring, and $d_\nu(A)$ is defined when $A$ is a noetherian local ring. By Proposition 10.22 (i) p.~111, $G_{\mf a}(A)$ is a noetherian graded ring if $A$ is a noetherian ring and $\mf a$ is an ideal of $A$.

As in (1) p. 118 of the book we set $\ell_n:=\ell(A/\mf m^n)$. 

Corollary 11.5 p.~119 says that, for large $n$, the function $n\mapsto\ell_n$ is a polynomial whose degree is $d_\nu(A)$ by definition. 

Corollary 11.2 p.~117 says that, for large $n$, the function $n\mapsto\ell(\mf m^n/\mf m^{n+1})$ is a polynomial whose degree is $d_o(G_{\mf m}(A))-1$.

Now \eqref{dd} follows from (1) p. 117.

\section{Page 120, proof of Proposition 11.10}%

The claim ``$A$ is an Artin ring'' is justified by \eqref{86} p.~\pageref{86}.

\section{P. 121, the Dimension Theorem}\label{dt}%

Here is an application of the Dimension Theorem: 

Let $K$ be a field, let $x_1,x_2,\dots$ be indeterminates, and form the $K$-algebra  $A:=K[[x_1,x_2,\dots]]$. 

Recall that $A$ can be defined as the set of expressions of the form $\sum_ua_uu$, where $u$ runs over the set monomials in $x_1,x_2,\dots$, and each $a_u$ is in $K$, the addition and multiplication being the obvious ones. 

Then $A$ is a local domain, its maximal ideal $\mathfrak m$ is defined by the condition $a_1=0$, and we claim 
\begin{equation}\label{u1a}
\boxed{A\text{ is not }\mathfrak m\text{-adically complete.}}
\end{equation}
This result is due to Uriya First and to the MathOverflow user dhy. See \\ %\smallskip

\centerline{\href{https://mathoverflow.net/a/308266/461}{https://mathoverflow.net/a/308266/461}}

We equip $A$ with the $\mf m$-adic topology.

Let $v:\mathbb Z_{>0}\to\mathbb Z_{>1}$ be strictly increasing, assume that, for all $n\in\mathbb Z_{>0}$, the characteristic of $K$ does not divide $v(n)$, and consider the sequence $(s_n)_{n\in\mathbb Z_{>0}}$ defined by $s_n=\sum_{i=1}^nx_i^{v(i)}$. This sequence being clearly Cauchy, it suffices to show that it diverges. To prove this we argue by contradiction and assume that $(s_n)$ has a limit in $A$. It is easy to see that this limit is $\sum_{n>0}x_n^{v(n)}$, and that this element of $A$ is in $\mf m^2$. Thus \eqref{u1a} will follow from 
\begin{equation}\label{u1b}
\sum_{n>0}\ x_n^{v(n)}\notin\mf m^2.
\end{equation} 
Our proof of \eqref{u1b} starts with the following claim.

%\textbf{Claim.}
$(\star)$ {\em Let $k$ and $r$ be positive integers; let $\mathfrak n$ be the maximal ideal of} 
$$
B:=K[[x_1,\dots,x_k]];
$$ 

{\em let $a_1,\dots,a_r,b_1,\dots,b_r$ be in $\mathfrak n$; set $f=\sum_{i=1}^ra_ib_i$ and $D_j:=\frac{\partial}{\partial x_j}$ for $1\le j\le k$; and assume that the ideal $(D_1f,\dots,D_kf)\subset B$ is $\mathfrak n$-primary. Then $k\le2r$.}

Proof of $(\star)$. We have 
$$
D_jf=\sum_{i=1}^r\Big((D_ja_i)\ b_i+a_i\ (D_jb_i)\Big). 
$$ 
This implies that 
$$
(D_1f,\dots,D_kf)\subset(a_1,\dots,a_r,b_1,\dots,b_r),
$$ 
and thus that $(a_1,\dots,a_r,b_1,\dots,b_r)$ is $\mathfrak n$-primary (see Corollary 7.16 p.~83 of the book). By the Examples pages 118 and 121, and by Corollary 11.19 p.~122 of the book, we have $\dim B=k$. Now the Dimension Theorem entails $k\le2r$, as desired. $\square$

Proof of \eqref{u1b}. Assume by contradiction that we have 
$$
\sum_{n>0}\ x_n^{v(n)}=\sum_{i=1}^r\ c_i\,d_i
$$ 
with $c_i,d_i\in\mf m$. Let $k$ be an integer $>2r$. Mapping $x_j$ to $0$ for $j>k$ we get 
$$
f:=\sum_{n=1}^k\ x_n^{v(n)}=\sum_{i=1}^r\ a_i\,b_i\in K[[x_1,\dots,x_k]]
$$ 
for some $a_i,b_i\in(x_1,\dots,x_k)\subset K[[x_1,\dots,x_k]]$. As $(D_1f,\dots,D_kf)$ is $(x_1,\dots,x_k)$-primary by Corollary 7.16 p.~83 of the book, this contradicts $(\star)$. $\square$

The case when $K$ is \emph{finite} is a Bourbaki exercise: Exercice 22c p. 288 in Exercices du \S2 chap. III, \textbf{Algèbre commutative}, Bourbaki, Masson, Paris 1985.

\section{Page 122}%

$\bu$ Proof of Corollary 11.16. The fact that $(x_1,\dots,x_r)_{\mf p}$ is $\mf p_{\mf p}$-primary follows easily from Propositions 4.8 (ii) p~53 and 4.9 p~54.

$\bu$ Proof of Proposition 11.20. The $d(?)$ are $d_o(?)$ in the notation of Section~\ref{odnd}.

\section{Page 123, proof of Theorem 11.22}%

I think ``by (11.20)'' should be ``by (11.21)''.

\section{Page 125, proof of (11.25)}%

For the last sentence of the proof, see the Examples on p.~121.

\section{P. 126}%% previous version https://docs.google.com/document/d/1pXphjmJVG5y2JSIiE6W0ZBNaBsdVPPTXytsjLOLYc7g/edit

We denote the Krull dimension of the ring $A$ by $\dim A$ and the height of the prime ideal $\mf p$ by $h(\mf p)$. If $\mf p$ and $\mf q$ are prime ideals of a ring $B$, we write $\mf p<\mf q$ instead of 
$$
\mf p\underset\ne\subset\mf q,
$$ 
and $\mf p_i^{\oo c}$ instead of $(\mf p_i)^{\oo c}$. 

We'll freely use the following obvious fact:

($\star$) \emph{If $\mf p_0<\cdots<\mf p_n$ is a chain of prime ideals, then} $h(\mf p_n)\ge n+h(\mf p_0)$. 

We'll also use the following fact which occurs in the hint to Exercise 11.6 p.~126 of the book:

($\star\star$) \emph{If $f:A\to A[x]$ is the natural embedding, then the fiber of} 
$$
f^*:\oo{Spec}(A[x])\to\oo{Spec}(A)
$$ 
\emph{over a prime ideal $\mf p$ of $A$ is order isomorphic to the spectrum of} 
$$
k\otimes_AA[x]\simeq k[x],
$$ 
\emph{where $k$ is the residue field at} $\mf p$.

\subsection{Exercise 11.6}%

For Exercise 3.21iv p.~47 of the book see Section~\ref{321iv} p.~\pageref{321iv} above. 

For Exercise 4.7 p.~55 of the book see Section~\ref{5547} p.~\pageref{5547} above.

\emph{Proof of the inequality} $\dim A[x]\ge1+\dim A$: If 
$
\mf p_0<\dots<\mf p_n
$ 
is a chain of prime ideals in $A$, then 
$$
\mf p_0[x]<\dots<\mf p_n[x]<(\mf p,x)
$$ 
is chain of prime ideals in $A[x].\ \square$

\emph{Proof of the inequality} $\dim A[x]\le1+2\dim A$: Statement ($\star\star$) above implies that, for any chain $\mf p_0<\mf p_1<\mf p_2$ of prime ideals in $A[x]$, we have:

$\bullet$ if $\mf p_0^{\oo c}=\mf p_1^{\oo c}$ then $\mf p_0=\mf p_0^{\oo c}[x]$ and $\mf p_1^{\oo c}<\mf p_2^{\oo c}$,

$\bullet$ if $\mf p_1^{\oo c}=\mf p_2^{\oo c}$ then $\mf p_1=\mf p_1^{\oo c}[x]$ and $\mf p_0^{\oo c}<\mf p_1^{\oo c}$.

This implies that a chain of length $\ell$ in $A[x]$ contracts to a chain of length at least $\lfloor\ell/2\rfloor$ in $A$. Hence 
$$
\left\lfloor\frac{\dim A[x]}2\right\rfloor\le\dim A,
$$ 
that is,
$$
\frac{\dim A[x]}2\le\frac12+\dim A.\ \square
$$

\subsection{Exercise 11.7}%

$\bullet$ Second sentence of the hint: see Proposition 11.13 p.~121 of the book. 

$\bullet$ Inequality $\oo{height }\mf p[x]\le m$: see Corollary 11.16 p.~121 of the book.

$\bullet$ Inequality $\dim A[x]\le1+\dim A$ (last sentence of the hint). 

%We denote the height of the prime ideal $\mf p$ by $h(\mf p)$.

%We give two proofs of the inequality $\dim A[x]\le1+\dim A$.

\emph{Proof.} We can assume $\dim A<\infty$. Set $n:=\dim A$ and let 
$ 
\mf p_0<\cdots<\mf p_{n+2}
$ 
be a chain of prime ideals in $A[x]$ of length $n+2$. It suffices to derive a contradiction from this assumption. 

The above chain contracting to a chain of length at most $n$ in $A$, there are indices $i$ such that $\mf p_i^{\oo c}=\mf p_{i+1}^{\oo c}$. Let $i$ be the largest such index. We have $\mf p_i=\mf p_i^{\oo c}[x]$ by ($\star\star$), and $h(\mf p_i^{\oo c})=h(\mf p_i)\ge i$ by ($\star$). Using again ($\star$) we get  
%and $\mf p_i=\mf p_i^{\oo c}[x]$ by ($\star$), and thus $h(\mf p_i^{\oo c})=h(\mf p_i)\ge i$. This implies
$$
h(\mf p_{n+2}^{\oo c})\ge n+1-i+h(\mf p_i^{\oo c})\ge n+1,
$$ 
which is impossible. $\square$

\section{Questions}%%

Let $A$ be a ring, and let $M,N,P$ be $A$-modules.

%\begin{qn}Assume $M\otimes_AN=0$ and $N\ne0$. Is there a nonzero \emph{finitely generated} $A$-module $P$ such that $M\otimes_AP=0\ $?\end{qn}

%\begin{qn}$A$ has only finitely many minimal primes $\implies\ (0)$ is decomposable\ ?\end{qn}

\begin{qn}
Consider the following conditions on a ring $A$:

\begin{enumerate}
\item\label{noe} $A$ is noetherian.
\item\label{dec} Each ideal of $A$ is decomposable.
\item\label{fmm} Each ideal of $A$ has only finitely many minimal primes over it.
\item\label{ip} Each irreducible ideal of $A$ is primary.
\item\label{fii} Each ideal of $A$ is a finite intersection of irreducible ideals.
\end{enumerate}

It is well known that item~\ref{noe} implies items \ref{dec}, \ref{fmm}, \ref{ip} and \ref{fii}.%It is well known that item \ref{noe} implies item \ref{dec}, item \ref{fmm}, item \ref{ip} and item \ref{fii}. 

What are the implications between these conditions?
\end{qn}

The ideal would be to find a ring which satisfies items \ref{dec}, \ref{fmm}, \ref{ip} and \ref{fii}, but not item \ref{noe}.%The ideal would be to find a ring which satisfies item \ref{dec}, item \ref{fmm}, item \ref{ip} and item \ref{fii}, but not item \ref{noe}.

[About items \ref{fmm} and \ref{dec}, see Section~\ref{di} p.~\pageref{di}.]

About item \ref{ip}: There are rings in which $(0)$ is irreducible but not primary: see 

\href{https://mathoverflow.net/q/185739/461}{https://mathoverflow.net/q/185739/461}. 

In fact, the following statement is easy to check. Let $A$ be a domain which is not a field, let $K$ be its field of fractions, form the $A$-module $B:=A\oplus K/A$ and define a multiplication on $B$ by $$(a,\alpha)(b,\beta)=(ab,a\beta+b\alpha).$$ Then $B$ is a commutative ring in which the zero ideal is irreducible but not primary. 

\end{document}%\overset?\implies

http://www.iecl.univ-lorraine.fr/~Pierre-Yves.Gaillard/DIVERS/Atiyah-MacDonald/Atiyah_MacDonald_a.pdf - https://app.box.com/s/xds73ntdm111fo36qhod - https://www.mediafire.com/folder/mtgw19tn7aefy/Atiyah_MacDonald - https://www.dropbox.com/sh/u0o5u9m7qxaujtw/AAADHlB7_qXeC5sQFysIUgGta?dl=0 - https://mega.co.nz/#F!KEBCzZxa!DO9J4U98neAjQISi8eazMQ

%

\begin{enumerate}
%\item $(0)$ irreducible $\implies\ (0)$ primary\ ? (True if $A$ is noetherian.)
%\item $(0)$ primary $\implies\ (0)$ irreducible\ ?
%\item $(0)$ primary and $A$ noetherian $\implies\ (0)$ irreducible\ ?
\item $A$ has only finitely many minimal primes $\implies\ (0)$ is decomposable\ ?
\item Each ideal is decomposable $\implies\ A$ noetherian\ ?
\item Each ideal has only finitely many minimal primes over it $\implies\ A$ noetherian\ ?
%\item Is a primary contracted ideal the contraction of a primary ideal? (See Section~\ref{cpi} p.~\pageref{cpi}.)
\item\label{ip} All irreducible ideals are primary $\implies\ A$ noetherian\ ?
%\item Is there an ideal which is not a finite intersection of irreducible ideals? 
\item Assume that each ideal of $A$ is a finite intersection of irreducible ideals. Is $A$ necessarily noetherian?
\end{enumerate}
